import{e as $,i as D}from"./chunk-TWT74DP3.js";import{a as B}from"./chunk-NYKZT4IC.js";import{$b as O,Ba as o,Bb as E,Cb as k,Db as F,Eb as L,Fa as P,La as S,P as x,Pa as p,_b as M,ba as y,ca as b,cc as T,da as _,dc as V,ea as j,eb as d,fb as t,gb as i,hb as m,j as h,lb as C,nb as I,pb as g,vb as c,wb as u,xb as v,za as w}from"./chunk-HP6BDGMU.js";var N=()=>[1,2,3,4,5,6],R=e=>["/portfolio/project/",e];function z(e,r){if(e&1){let n=C();t(0,"div",6)(1,"span"),c(2),i(),t(3,"button",7),I("click",function(){y(n);let a=g();return b(a.loadProjects())}),c(4," Reintentar "),i()()}if(e&2){let n=g();o(2),u(n.errorMessage)}}function G(e,r){e&1&&(t(0,"div",10),m(1,"div",11)(2,"div",12)(3,"div",13),i())}function H(e,r){e&1&&(t(0,"div",8),p(1,G,4,0,"div",9),i()),e&2&&(o(),d("ngForOf",E(1,N)))}function U(e,r){if(e&1&&(t(0,"div",22),m(1,"a",23),t(2,"div",24)(3,"h3",25),c(4),i(),t(5,"p",26),c(6),i(),t(7,"p",27),c(8),i()()()),e&2){let n=r.$implicit;o(),d("routerLink",k(4,R,n.id)),o(3),v(" ",n.title," "),o(2),u(n.position),o(2),u(n.client)}}function A(e,r){if(e&1&&(t(0,"div")(1,"header",16)(2,"div",17),m(3,"img",18),i(),t(4,"h2",19),c(5),i()(),t(6,"div",20),p(7,U,9,6,"div",21),i()()),e&2){let n=r.$implicit,s=g(2);o(3),d("src",s.defaultCompanyIcon,w),o(2),v(" ",n.key," "),o(2),d("ngForOf",n.value)}}function K(e,r){if(e&1&&(t(0,"div",14),p(1,A,8,3,"div",15),F(2,"keyvalue"),i()),e&2){let n=g();o(),d("ngForOf",L(2,1,n.groupedProjects))}}function q(e,r){e&1&&(t(0,"div",28)(1,"div",29),_(),t(2,"svg",30),m(3,"path",31),i(),j(),t(4,"h3",32),c(5,"No hay proyectos disponibles"),i(),t(6,"p",33),c(7,"Intenta agregar uno nuevo o revisar los filtros."),i()()())}var te=(()=>{let r=class r{constructor(s){this.globalDataService=s,this.projects=[],this.groupedProjects={},this.isLoading=!0,this.errorMessage=null,this.destroy$=new h,this.defaultCompanyIcon="https://dummyimage.com/64x64/777/fff.png&text=?"}ngOnInit(){this.loadProjects()}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}loadProjects(){this.isLoading=!0,this.errorMessage=null,this.globalDataService.projects$.pipe(x(this.destroy$)).subscribe({next:s=>{this.projects=s.filter(a=>a.state===!0),this.groupProjectsByCompany(this.projects),this.isLoading=!1,console.log("Projects loaded:",this.projects)},error:s=>{console.error("Error loading projects:",s),this.errorMessage="Error al cargar los proyectos. Por favor, int\xE9ntalo de nuevo m\xE1s tarde.",this.isLoading=!1},complete:()=>{this.isLoading=!1}})}groupProjectsByCompany(s){this.groupedProjects=s.reduce((a,l)=>{let f=l.companyName||"Sin compa\xF1\xEDa";return a[f]||(a[f]=[]),a[f].push(l),a},{})}};r.\u0275fac=function(a){return new(a||r)(P(B))},r.\u0275cmp=S({type:r,selectors:[["portfolio-projects-page"]],decls:6,vars:4,consts:[[1,"min-h-screen","bg-gray-600","p-6","text-white"],[1,"mx-auto","max-w-7xl"],["class","mb-6 p-4 bg-red-800/30 text-red-300 rounded-lg border border-red-500 flex justify-between items-center",4,"ngIf"],["class","grid sm:grid-cols-2 md:grid-cols-3 gap-6",4,"ngIf"],["class","space-y-12",4,"ngIf"],["class","flex justify-center items-center h-60",4,"ngIf"],[1,"mb-6","p-4","bg-red-800/30","text-red-300","rounded-lg","border","border-red-500","flex","justify-between","items-center"],[1,"text-blue-400","underline","ml-4",3,"click"],[1,"grid","sm:grid-cols-2","md:grid-cols-3","gap-6"],["class","bg-gray-800 rounded-2xl shadow-lg p-4 animate-pulse space-y-4",4,"ngFor","ngForOf"],[1,"bg-gray-800","rounded-2xl","shadow-lg","p-4","animate-pulse","space-y-4"],[1,"h-5","bg-gray-700","rounded","w-3/4"],[1,"h-4","bg-gray-700","rounded","w-1/2"],[1,"h-3","bg-gray-700","rounded","w-full"],[1,"space-y-12"],[4,"ngFor","ngForOf"],[1,"flex","items-center","gap-4","mb-6","border-b","border-gray-500","pb-3"],[1,"w-12","h-12","rounded-full","bg-white/10","backdrop-blur-md","flex","items-center","justify-center","shadow-inner"],["alt","icono",1,"w-8","h-8","object-contain","transition-transform","duration-300","group-hover:scale-110",3,"src"],[1,"text-2xl","font-bold","text-white","tracking-tight","transition-colors","duration-300","group-hover:text-blue-400"],[1,"grid","sm:grid-cols-2","lg:grid-cols-3","gap-6"],["class","bg-gradient-to-br from-gray-700 to-gray-800 rounded-2xl shadow-lg overflow-hidden group relative transition-transform hover:-translate-y-1 hover:shadow-blue-500/20 duration-300",4,"ngFor","ngForOf"],[1,"bg-gradient-to-br","from-gray-700","to-gray-800","rounded-2xl","shadow-lg","overflow-hidden","group","relative","transition-transform","hover:-translate-y-1","hover:shadow-blue-500/20","duration-300"],["aria-label","Ver proyecto",1,"absolute","inset-0","z-10",3,"routerLink"],[1,"p-5","space-y-2"],[1,"text-lg","font-semibold","text-blue-400","group-hover:underline","transition"],[1,"text-sm","text-gray-300"],[1,"text-xs","text-gray-400","italic"],[1,"flex","justify-center","items-center","h-60"],[1,"text-center","space-y-3","text-gray-400"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"h-12","w-12","mx-auto","text-gray-500"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M9 17v-2a4 4 0 014-4h4m-2 6h6m0 0V9a2 2 0 00-2-2h-6.586a1 1 0 01-.707-.293l-2.414-2.414A1 1 0 008.586 4H6a2 2 0 00-2 2v12a2 2 0 002 2h6"],[1,"text-lg","font-medium"],[1,"text-sm"]],template:function(a,l){a&1&&(t(0,"div",0)(1,"div",1),p(2,z,5,1,"div",2)(3,H,2,2,"div",3)(4,K,3,3,"div",4)(5,q,8,0,"div",5),i()()),a&2&&(o(2),d("ngIf",l.errorMessage),o(),d("ngIf",l.isLoading),o(),d("ngIf",!l.isLoading&&l.groupedProjects),o(),d("ngIf",!l.isLoading&&!(l.projects!=null&&l.projects.length)))},dependencies:[D,$,V,M,O,T],styles:[".img[_ngcontent-%COMP%]{width:100px;height:100px}"]});let e=r;return e})();export{te as ProjectsPageComponent};
