import{A as Ce,B as Ai,C as wn,D as Pc,H as bi,I as kc,J as Nc,K as Mc,M as Oc,N as E_,P as Jt,a as __,e as e0,g as t0,h as Ic,i as ua,p as n0,q as Sc,r as Rc,s as x_,v as Fc}from"./chunk-LQ5X5755.js";import{$ as Q,$a as i_,A as Bt,Aa as Wv,B as Gn,Ba as Tr,Cb as Ac,D as Bf,Da as Hf,E as ds,Ea as Kv,Fa as Gf,G as Ei,Ga as Qv,H as Dr,Ha as ia,Hb as bc,I as Vf,Ia as Xv,J as Ov,Ja as Yv,Jb as Tc,Ka as Ec,Kb as f_,L as Bv,La as ps,Lb as p_,Ma as Wf,Mb as Jf,N as Vv,Na as Zv,Nb as Ci,O as Vt,Oa as Ir,Ob as g_,Pa as pe,Pb as m_,Q as Lv,Qa as Jv,Qb as y_,R as yt,Ra as sa,Rb as ms,S as fe,Sa as e_,Sb as En,T as Cr,Ta as wc,Tb as ys,U as yc,Ua as gs,Ub as v_,V as ne,Va as Ut,W as Lt,Wa as lt,X as Uv,Xa as t_,Y as ae,Ya as wi,Z as Lf,Za as n_,_ as re,_a as r_,a as Iv,ab as Dc,b as Sv,ba as Uf,bb as Cc,c as _i,ca as jv,cb as Kf,d as Pf,da as xn,db as oa,e as kf,ea as vt,eb as Qf,f as Ot,fa as zv,fb as s_,g as Xt,ga as Wn,gb as o_,h as Rv,ha as $v,hb as Xf,i as Fv,ia as qv,ib as Yf,j as Hn,ja as vc,k as Nf,ka as _c,kb as Zf,l as Mf,la as na,m as tt,ma as jf,mb as on,n as ie,na as Ar,nb as Kn,o as xi,oa as zf,ob as Di,p as Pv,pb as a_,q as kv,qa as ra,qb as Zt,r as xe,ra as xc,rb as We,s as mc,sa as Yt,sb as Qn,t as St,ta as Ct,tb as u_,u as ta,ua as $f,v as Nv,va as Hv,vb as c_,w as Of,wa as br,wb as l_,x as Mv,xa as fs,xb as h_,ya as Gv,yb as aa,z as _n,za as qf,zb as d_}from"./chunk-3OU2N6WO.js";import{a as X,b as Re,c as Tv,e as ge,g as Ob,h as Ff,i as O}from"./chunk-K2H6WANG.js";var nA=ge(()=>{"use strict"});var ye=ge((kd,rA)=>{"use strict";(function(n,e){typeof kd=="object"?rA.exports=kd=e():typeof define=="function"&&define.amd?define([],e):n.CryptoJS=e()})(kd,function(){var n=n||function(e,t){var r;if(typeof window<"u"&&window.crypto&&(r=window.crypto),typeof self<"u"&&self.crypto&&(r=self.crypto),typeof globalThis<"u"&&globalThis.crypto&&(r=globalThis.crypto),!r&&typeof window<"u"&&window.msCrypto&&(r=window.msCrypto),!r&&typeof global<"u"&&global.crypto&&(r=global.crypto),!r&&typeof Tv=="function")try{r=nA()}catch{}var i=function(){if(r){if(typeof r.getRandomValues=="function")try{return r.getRandomValues(new Uint32Array(1))[0]}catch{}if(typeof r.randomBytes=="function")try{return r.randomBytes(4).readInt32LE()}catch{}}throw new Error("Native crypto module could not be used to get secure random number.")},s=Object.create||function(){function x(){}return function(D){var R;return x.prototype=D,R=new x,x.prototype=null,R}}(),o={},a=o.lib={},c=a.Base=function(){return{extend:function(x){var D=s(this);return x&&D.mixIn(x),(!D.hasOwnProperty("init")||this.init===D.init)&&(D.init=function(){D.$super.init.apply(this,arguments)}),D.init.prototype=D,D.$super=this,D},create:function(){var x=this.extend();return x.init.apply(x,arguments),x},init:function(){},mixIn:function(x){for(var D in x)x.hasOwnProperty(D)&&(this[D]=x[D]);x.hasOwnProperty("toString")&&(this.toString=x.toString)},clone:function(){return this.init.prototype.extend(this)}}}(),l=a.WordArray=c.extend({init:function(x,D){x=this.words=x||[],D!=t?this.sigBytes=D:this.sigBytes=x.length*4},toString:function(x){return(x||f).stringify(this)},concat:function(x){var D=this.words,R=x.words,F=this.sigBytes,k=x.sigBytes;if(this.clamp(),F%4)for(var P=0;P<k;P++){var T=R[P>>>2]>>>24-P%4*8&255;D[F+P>>>2]|=T<<24-(F+P)%4*8}else for(var v=0;v<k;v+=4)D[F+v>>>2]=R[v>>>2];return this.sigBytes+=k,this},clamp:function(){var x=this.words,D=this.sigBytes;x[D>>>2]&=4294967295<<32-D%4*8,x.length=e.ceil(D/4)},clone:function(){var x=c.clone.call(this);return x.words=this.words.slice(0),x},random:function(x){for(var D=[],R=0;R<x;R+=4)D.push(i());return new l.init(D,x)}}),h=o.enc={},f=h.Hex={stringify:function(x){for(var D=x.words,R=x.sigBytes,F=[],k=0;k<R;k++){var P=D[k>>>2]>>>24-k%4*8&255;F.push((P>>>4).toString(16)),F.push((P&15).toString(16))}return F.join("")},parse:function(x){for(var D=x.length,R=[],F=0;F<D;F+=2)R[F>>>3]|=parseInt(x.substr(F,2),16)<<24-F%8*4;return new l.init(R,D/2)}},p=h.Latin1={stringify:function(x){for(var D=x.words,R=x.sigBytes,F=[],k=0;k<R;k++){var P=D[k>>>2]>>>24-k%4*8&255;F.push(String.fromCharCode(P))}return F.join("")},parse:function(x){for(var D=x.length,R=[],F=0;F<D;F++)R[F>>>2]|=(x.charCodeAt(F)&255)<<24-F%4*8;return new l.init(R,D)}},m=h.Utf8={stringify:function(x){try{return decodeURIComponent(escape(p.stringify(x)))}catch{throw new Error("Malformed UTF-8 data")}},parse:function(x){return p.parse(unescape(encodeURIComponent(x)))}},y=a.BufferedBlockAlgorithm=c.extend({reset:function(){this._data=new l.init,this._nDataBytes=0},_append:function(x){typeof x=="string"&&(x=m.parse(x)),this._data.concat(x),this._nDataBytes+=x.sigBytes},_process:function(x){var D,R=this._data,F=R.words,k=R.sigBytes,P=this.blockSize,T=P*4,v=k/T;x?v=e.ceil(v):v=e.max((v|0)-this._minBufferSize,0);var C=v*P,I=e.min(C*4,k);if(C){for(var A=0;A<C;A+=P)this._doProcessBlock(F,A);D=F.splice(0,C),R.sigBytes-=I}return new l.init(D,I)},clone:function(){var x=c.clone.call(this);return x._data=this._data.clone(),x},_minBufferSize:0}),w=a.Hasher=y.extend({cfg:c.extend(),init:function(x){this.cfg=this.cfg.extend(x),this.reset()},reset:function(){y.reset.call(this),this._doReset()},update:function(x){return this._append(x),this._process(),this},finalize:function(x){x&&this._append(x);var D=this._doFinalize();return D},blockSize:512/32,_createHelper:function(x){return function(D,R){return new x.init(R).finalize(D)}},_createHmacHelper:function(x){return function(D,R){return new E.HMAC.init(x,R).finalize(D)}}}),E=o.algo={};return o}(Math);return n})});var Wu=ge((Nd,iA)=>{"use strict";(function(n,e){typeof Nd=="object"?iA.exports=Nd=e(ye()):typeof define=="function"&&define.amd?define(["./core"],e):e(n.CryptoJS)})(Nd,function(n){return function(e){var t=n,r=t.lib,i=r.Base,s=r.WordArray,o=t.x64={},a=o.Word=i.extend({init:function(l,h){this.high=l,this.low=h}}),c=o.WordArray=i.extend({init:function(l,h){l=this.words=l||[],h!=e?this.sigBytes=h:this.sigBytes=l.length*8},toX32:function(){for(var l=this.words,h=l.length,f=[],p=0;p<h;p++){var m=l[p];f.push(m.high),f.push(m.low)}return s.create(f,this.sigBytes)},clone:function(){for(var l=i.clone.call(this),h=l.words=this.words.slice(0),f=h.length,p=0;p<f;p++)h[p]=h[p].clone();return l}})}(),n})});var oA=ge((Md,sA)=>{"use strict";(function(n,e){typeof Md=="object"?sA.exports=Md=e(ye()):typeof define=="function"&&define.amd?define(["./core"],e):e(n.CryptoJS)})(Md,function(n){return function(){if(typeof ArrayBuffer=="function"){var e=n,t=e.lib,r=t.WordArray,i=r.init,s=r.init=function(o){if(o instanceof ArrayBuffer&&(o=new Uint8Array(o)),(o instanceof Int8Array||typeof Uint8ClampedArray<"u"&&o instanceof Uint8ClampedArray||o instanceof Int16Array||o instanceof Uint16Array||o instanceof Int32Array||o instanceof Uint32Array||o instanceof Float32Array||o instanceof Float64Array)&&(o=new Uint8Array(o.buffer,o.byteOffset,o.byteLength)),o instanceof Uint8Array){for(var a=o.byteLength,c=[],l=0;l<a;l++)c[l>>>2]|=o[l]<<24-l%4*8;i.call(this,c,a)}else i.apply(this,arguments)};s.prototype=r}}(),n.lib.WordArray})});var uA=ge((Od,aA)=>{"use strict";(function(n,e){typeof Od=="object"?aA.exports=Od=e(ye()):typeof define=="function"&&define.amd?define(["./core"],e):e(n.CryptoJS)})(Od,function(n){return function(){var e=n,t=e.lib,r=t.WordArray,i=e.enc,s=i.Utf16=i.Utf16BE={stringify:function(a){for(var c=a.words,l=a.sigBytes,h=[],f=0;f<l;f+=2){var p=c[f>>>2]>>>16-f%4*8&65535;h.push(String.fromCharCode(p))}return h.join("")},parse:function(a){for(var c=a.length,l=[],h=0;h<c;h++)l[h>>>1]|=a.charCodeAt(h)<<16-h%2*16;return r.create(l,c*2)}};i.Utf16LE={stringify:function(a){for(var c=a.words,l=a.sigBytes,h=[],f=0;f<l;f+=2){var p=o(c[f>>>2]>>>16-f%4*8&65535);h.push(String.fromCharCode(p))}return h.join("")},parse:function(a){for(var c=a.length,l=[],h=0;h<c;h++)l[h>>>1]|=o(a.charCodeAt(h)<<16-h%2*16);return r.create(l,c*2)}};function o(a){return a<<8&4278255360|a>>>8&16711935}}(),n.enc.Utf16})});var ci=ge((Bd,cA)=>{"use strict";(function(n,e){typeof Bd=="object"?cA.exports=Bd=e(ye()):typeof define=="function"&&define.amd?define(["./core"],e):e(n.CryptoJS)})(Bd,function(n){return function(){var e=n,t=e.lib,r=t.WordArray,i=e.enc,s=i.Base64={stringify:function(a){var c=a.words,l=a.sigBytes,h=this._map;a.clamp();for(var f=[],p=0;p<l;p+=3)for(var m=c[p>>>2]>>>24-p%4*8&255,y=c[p+1>>>2]>>>24-(p+1)%4*8&255,w=c[p+2>>>2]>>>24-(p+2)%4*8&255,E=m<<16|y<<8|w,x=0;x<4&&p+x*.75<l;x++)f.push(h.charAt(E>>>6*(3-x)&63));var D=h.charAt(64);if(D)for(;f.length%4;)f.push(D);return f.join("")},parse:function(a){var c=a.length,l=this._map,h=this._reverseMap;if(!h){h=this._reverseMap=[];for(var f=0;f<l.length;f++)h[l.charCodeAt(f)]=f}var p=l.charAt(64);if(p){var m=a.indexOf(p);m!==-1&&(c=m)}return o(a,c,h)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="};function o(a,c,l){for(var h=[],f=0,p=0;p<c;p++)if(p%4){var m=l[a.charCodeAt(p-1)]<<p%4*2,y=l[a.charCodeAt(p)]>>>6-p%4*2,w=m|y;h[f>>>2]|=w<<24-f%4*8,f++}return r.create(h,f)}}(),n.enc.Base64})});var hA=ge((Vd,lA)=>{"use strict";(function(n,e){typeof Vd=="object"?lA.exports=Vd=e(ye()):typeof define=="function"&&define.amd?define(["./core"],e):e(n.CryptoJS)})(Vd,function(n){return function(){var e=n,t=e.lib,r=t.WordArray,i=e.enc,s=i.Base64url={stringify:function(a,c){c===void 0&&(c=!0);var l=a.words,h=a.sigBytes,f=c?this._safe_map:this._map;a.clamp();for(var p=[],m=0;m<h;m+=3)for(var y=l[m>>>2]>>>24-m%4*8&255,w=l[m+1>>>2]>>>24-(m+1)%4*8&255,E=l[m+2>>>2]>>>24-(m+2)%4*8&255,x=y<<16|w<<8|E,D=0;D<4&&m+D*.75<h;D++)p.push(f.charAt(x>>>6*(3-D)&63));var R=f.charAt(64);if(R)for(;p.length%4;)p.push(R);return p.join("")},parse:function(a,c){c===void 0&&(c=!0);var l=a.length,h=c?this._safe_map:this._map,f=this._reverseMap;if(!f){f=this._reverseMap=[];for(var p=0;p<h.length;p++)f[h.charCodeAt(p)]=p}var m=h.charAt(64);if(m){var y=a.indexOf(m);y!==-1&&(l=y)}return o(a,l,f)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",_safe_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"};function o(a,c,l){for(var h=[],f=0,p=0;p<c;p++)if(p%4){var m=l[a.charCodeAt(p-1)]<<p%4*2,y=l[a.charCodeAt(p)]>>>6-p%4*2,w=m|y;h[f>>>2]|=w<<24-f%4*8,f++}return r.create(h,f)}}(),n.enc.Base64url})});var li=ge((Ld,dA)=>{"use strict";(function(n,e){typeof Ld=="object"?dA.exports=Ld=e(ye()):typeof define=="function"&&define.amd?define(["./core"],e):e(n.CryptoJS)})(Ld,function(n){return function(e){var t=n,r=t.lib,i=r.WordArray,s=r.Hasher,o=t.algo,a=[];(function(){for(var m=0;m<64;m++)a[m]=e.abs(e.sin(m+1))*4294967296|0})();var c=o.MD5=s.extend({_doReset:function(){this._hash=new i.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(m,y){for(var w=0;w<16;w++){var E=y+w,x=m[E];m[E]=(x<<8|x>>>24)&16711935|(x<<24|x>>>8)&4278255360}var D=this._hash.words,R=m[y+0],F=m[y+1],k=m[y+2],P=m[y+3],T=m[y+4],v=m[y+5],C=m[y+6],I=m[y+7],A=m[y+8],S=m[y+9],b=m[y+10],j=m[y+11],te=m[y+12],ee=m[y+13],oe=m[y+14],le=m[y+15],L=D[0],q=D[1],H=D[2],U=D[3];L=l(L,q,H,U,R,7,a[0]),U=l(U,L,q,H,F,12,a[1]),H=l(H,U,L,q,k,17,a[2]),q=l(q,H,U,L,P,22,a[3]),L=l(L,q,H,U,T,7,a[4]),U=l(U,L,q,H,v,12,a[5]),H=l(H,U,L,q,C,17,a[6]),q=l(q,H,U,L,I,22,a[7]),L=l(L,q,H,U,A,7,a[8]),U=l(U,L,q,H,S,12,a[9]),H=l(H,U,L,q,b,17,a[10]),q=l(q,H,U,L,j,22,a[11]),L=l(L,q,H,U,te,7,a[12]),U=l(U,L,q,H,ee,12,a[13]),H=l(H,U,L,q,oe,17,a[14]),q=l(q,H,U,L,le,22,a[15]),L=h(L,q,H,U,F,5,a[16]),U=h(U,L,q,H,C,9,a[17]),H=h(H,U,L,q,j,14,a[18]),q=h(q,H,U,L,R,20,a[19]),L=h(L,q,H,U,v,5,a[20]),U=h(U,L,q,H,b,9,a[21]),H=h(H,U,L,q,le,14,a[22]),q=h(q,H,U,L,T,20,a[23]),L=h(L,q,H,U,S,5,a[24]),U=h(U,L,q,H,oe,9,a[25]),H=h(H,U,L,q,P,14,a[26]),q=h(q,H,U,L,A,20,a[27]),L=h(L,q,H,U,ee,5,a[28]),U=h(U,L,q,H,k,9,a[29]),H=h(H,U,L,q,I,14,a[30]),q=h(q,H,U,L,te,20,a[31]),L=f(L,q,H,U,v,4,a[32]),U=f(U,L,q,H,A,11,a[33]),H=f(H,U,L,q,j,16,a[34]),q=f(q,H,U,L,oe,23,a[35]),L=f(L,q,H,U,F,4,a[36]),U=f(U,L,q,H,T,11,a[37]),H=f(H,U,L,q,I,16,a[38]),q=f(q,H,U,L,b,23,a[39]),L=f(L,q,H,U,ee,4,a[40]),U=f(U,L,q,H,R,11,a[41]),H=f(H,U,L,q,P,16,a[42]),q=f(q,H,U,L,C,23,a[43]),L=f(L,q,H,U,S,4,a[44]),U=f(U,L,q,H,te,11,a[45]),H=f(H,U,L,q,le,16,a[46]),q=f(q,H,U,L,k,23,a[47]),L=p(L,q,H,U,R,6,a[48]),U=p(U,L,q,H,I,10,a[49]),H=p(H,U,L,q,oe,15,a[50]),q=p(q,H,U,L,v,21,a[51]),L=p(L,q,H,U,te,6,a[52]),U=p(U,L,q,H,P,10,a[53]),H=p(H,U,L,q,b,15,a[54]),q=p(q,H,U,L,F,21,a[55]),L=p(L,q,H,U,A,6,a[56]),U=p(U,L,q,H,le,10,a[57]),H=p(H,U,L,q,C,15,a[58]),q=p(q,H,U,L,ee,21,a[59]),L=p(L,q,H,U,T,6,a[60]),U=p(U,L,q,H,j,10,a[61]),H=p(H,U,L,q,k,15,a[62]),q=p(q,H,U,L,S,21,a[63]),D[0]=D[0]+L|0,D[1]=D[1]+q|0,D[2]=D[2]+H|0,D[3]=D[3]+U|0},_doFinalize:function(){var m=this._data,y=m.words,w=this._nDataBytes*8,E=m.sigBytes*8;y[E>>>5]|=128<<24-E%32;var x=e.floor(w/4294967296),D=w;y[(E+64>>>9<<4)+15]=(x<<8|x>>>24)&16711935|(x<<24|x>>>8)&4278255360,y[(E+64>>>9<<4)+14]=(D<<8|D>>>24)&16711935|(D<<24|D>>>8)&4278255360,m.sigBytes=(y.length+1)*4,this._process();for(var R=this._hash,F=R.words,k=0;k<4;k++){var P=F[k];F[k]=(P<<8|P>>>24)&16711935|(P<<24|P>>>8)&4278255360}return R},clone:function(){var m=s.clone.call(this);return m._hash=this._hash.clone(),m}});function l(m,y,w,E,x,D,R){var F=m+(y&w|~y&E)+x+R;return(F<<D|F>>>32-D)+y}function h(m,y,w,E,x,D,R){var F=m+(y&E|w&~E)+x+R;return(F<<D|F>>>32-D)+y}function f(m,y,w,E,x,D,R){var F=m+(y^w^E)+x+R;return(F<<D|F>>>32-D)+y}function p(m,y,w,E,x,D,R){var F=m+(w^(y|~E))+x+R;return(F<<D|F>>>32-D)+y}t.MD5=s._createHelper(c),t.HmacMD5=s._createHmacHelper(c)}(Math),n.MD5})});var Uy=ge((Ud,fA)=>{"use strict";(function(n,e){typeof Ud=="object"?fA.exports=Ud=e(ye()):typeof define=="function"&&define.amd?define(["./core"],e):e(n.CryptoJS)})(Ud,function(n){return function(){var e=n,t=e.lib,r=t.WordArray,i=t.Hasher,s=e.algo,o=[],a=s.SHA1=i.extend({_doReset:function(){this._hash=new r.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(c,l){for(var h=this._hash.words,f=h[0],p=h[1],m=h[2],y=h[3],w=h[4],E=0;E<80;E++){if(E<16)o[E]=c[l+E]|0;else{var x=o[E-3]^o[E-8]^o[E-14]^o[E-16];o[E]=x<<1|x>>>31}var D=(f<<5|f>>>27)+w+o[E];E<20?D+=(p&m|~p&y)+1518500249:E<40?D+=(p^m^y)+1859775393:E<60?D+=(p&m|p&y|m&y)-1894007588:D+=(p^m^y)-899497514,w=y,y=m,m=p<<30|p>>>2,p=f,f=D}h[0]=h[0]+f|0,h[1]=h[1]+p|0,h[2]=h[2]+m|0,h[3]=h[3]+y|0,h[4]=h[4]+w|0},_doFinalize:function(){var c=this._data,l=c.words,h=this._nDataBytes*8,f=c.sigBytes*8;return l[f>>>5]|=128<<24-f%32,l[(f+64>>>9<<4)+14]=Math.floor(h/4294967296),l[(f+64>>>9<<4)+15]=h,c.sigBytes=l.length*4,this._process(),this._hash},clone:function(){var c=i.clone.call(this);return c._hash=this._hash.clone(),c}});e.SHA1=i._createHelper(a),e.HmacSHA1=i._createHmacHelper(a)}(),n.SHA1})});var zd=ge((jd,pA)=>{"use strict";(function(n,e){typeof jd=="object"?pA.exports=jd=e(ye()):typeof define=="function"&&define.amd?define(["./core"],e):e(n.CryptoJS)})(jd,function(n){return function(e){var t=n,r=t.lib,i=r.WordArray,s=r.Hasher,o=t.algo,a=[],c=[];(function(){function f(w){for(var E=e.sqrt(w),x=2;x<=E;x++)if(!(w%x))return!1;return!0}function p(w){return(w-(w|0))*4294967296|0}for(var m=2,y=0;y<64;)f(m)&&(y<8&&(a[y]=p(e.pow(m,1/2))),c[y]=p(e.pow(m,1/3)),y++),m++})();var l=[],h=o.SHA256=s.extend({_doReset:function(){this._hash=new i.init(a.slice(0))},_doProcessBlock:function(f,p){for(var m=this._hash.words,y=m[0],w=m[1],E=m[2],x=m[3],D=m[4],R=m[5],F=m[6],k=m[7],P=0;P<64;P++){if(P<16)l[P]=f[p+P]|0;else{var T=l[P-15],v=(T<<25|T>>>7)^(T<<14|T>>>18)^T>>>3,C=l[P-2],I=(C<<15|C>>>17)^(C<<13|C>>>19)^C>>>10;l[P]=v+l[P-7]+I+l[P-16]}var A=D&R^~D&F,S=y&w^y&E^w&E,b=(y<<30|y>>>2)^(y<<19|y>>>13)^(y<<10|y>>>22),j=(D<<26|D>>>6)^(D<<21|D>>>11)^(D<<7|D>>>25),te=k+j+A+c[P]+l[P],ee=b+S;k=F,F=R,R=D,D=x+te|0,x=E,E=w,w=y,y=te+ee|0}m[0]=m[0]+y|0,m[1]=m[1]+w|0,m[2]=m[2]+E|0,m[3]=m[3]+x|0,m[4]=m[4]+D|0,m[5]=m[5]+R|0,m[6]=m[6]+F|0,m[7]=m[7]+k|0},_doFinalize:function(){var f=this._data,p=f.words,m=this._nDataBytes*8,y=f.sigBytes*8;return p[y>>>5]|=128<<24-y%32,p[(y+64>>>9<<4)+14]=e.floor(m/4294967296),p[(y+64>>>9<<4)+15]=m,f.sigBytes=p.length*4,this._process(),this._hash},clone:function(){var f=s.clone.call(this);return f._hash=this._hash.clone(),f}});t.SHA256=s._createHelper(h),t.HmacSHA256=s._createHmacHelper(h)}(Math),n.SHA256})});var mA=ge(($d,gA)=>{"use strict";(function(n,e,t){typeof $d=="object"?gA.exports=$d=e(ye(),zd()):typeof define=="function"&&define.amd?define(["./core","./sha256"],e):e(n.CryptoJS)})($d,function(n){return function(){var e=n,t=e.lib,r=t.WordArray,i=e.algo,s=i.SHA256,o=i.SHA224=s.extend({_doReset:function(){this._hash=new r.init([3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428])},_doFinalize:function(){var a=s._doFinalize.call(this);return a.sigBytes-=4,a}});e.SHA224=s._createHelper(o),e.HmacSHA224=s._createHmacHelper(o)}(),n.SHA224})});var jy=ge((qd,yA)=>{"use strict";(function(n,e,t){typeof qd=="object"?yA.exports=qd=e(ye(),Wu()):typeof define=="function"&&define.amd?define(["./core","./x64-core"],e):e(n.CryptoJS)})(qd,function(n){return function(){var e=n,t=e.lib,r=t.Hasher,i=e.x64,s=i.Word,o=i.WordArray,a=e.algo;function c(){return s.create.apply(s,arguments)}var l=[c(1116352408,3609767458),c(1899447441,602891725),c(3049323471,3964484399),c(3921009573,2173295548),c(961987163,4081628472),c(1508970993,3053834265),c(2453635748,2937671579),c(2870763221,3664609560),c(3624381080,2734883394),c(310598401,1164996542),c(607225278,1323610764),c(1426881987,3590304994),c(1925078388,4068182383),c(2162078206,991336113),c(2614888103,633803317),c(3248222580,3479774868),c(3835390401,2666613458),c(4022224774,944711139),c(264347078,2341262773),c(604807628,2007800933),c(770255983,1495990901),c(1249150122,1856431235),c(1555081692,3175218132),c(1996064986,2198950837),c(2554220882,3999719339),c(2821834349,766784016),c(2952996808,2566594879),c(3210313671,3203337956),c(3336571891,1034457026),c(3584528711,2466948901),c(113926993,3758326383),c(338241895,168717936),c(666307205,1188179964),c(773529912,1546045734),c(1294757372,1522805485),c(1396182291,2643833823),c(1695183700,2343527390),c(1986661051,1014477480),c(2177026350,1206759142),c(2456956037,344077627),c(2730485921,1290863460),c(2820302411,3158454273),c(3259730800,3505952657),c(3345764771,106217008),c(3516065817,3606008344),c(3600352804,1432725776),c(4094571909,1467031594),c(275423344,851169720),c(430227734,3100823752),c(506948616,1363258195),c(659060556,3750685593),c(883997877,3785050280),c(958139571,3318307427),c(1322822218,3812723403),c(1537002063,2003034995),c(1747873779,3602036899),c(1955562222,1575990012),c(2024104815,1125592928),c(2227730452,2716904306),c(2361852424,442776044),c(2428436474,593698344),c(2756734187,3733110249),c(3204031479,2999351573),c(3329325298,3815920427),c(3391569614,3928383900),c(3515267271,566280711),c(3940187606,3454069534),c(4118630271,4000239992),c(116418474,1914138554),c(174292421,2731055270),c(289380356,3203993006),c(460393269,320620315),c(685471733,587496836),c(852142971,1086792851),c(1017036298,365543100),c(1126000580,2618297676),c(1288033470,3409855158),c(1501505948,4234509866),c(1607167915,987167468),c(1816402316,1246189591)],h=[];(function(){for(var p=0;p<80;p++)h[p]=c()})();var f=a.SHA512=r.extend({_doReset:function(){this._hash=new o.init([new s.init(1779033703,4089235720),new s.init(3144134277,2227873595),new s.init(1013904242,4271175723),new s.init(2773480762,1595750129),new s.init(1359893119,2917565137),new s.init(2600822924,725511199),new s.init(528734635,4215389547),new s.init(1541459225,327033209)])},_doProcessBlock:function(p,m){for(var y=this._hash.words,w=y[0],E=y[1],x=y[2],D=y[3],R=y[4],F=y[5],k=y[6],P=y[7],T=w.high,v=w.low,C=E.high,I=E.low,A=x.high,S=x.low,b=D.high,j=D.low,te=R.high,ee=R.low,oe=F.high,le=F.low,L=k.high,q=k.low,H=P.high,U=P.low,he=T,be=v,Ge=C,de=I,nn=A,fr=S,Lo=b,yn=j,ft=te,ut=ee,pr=oe,Un=le,gr=L,mr=q,ss=H,hi=U,It=0;It<80;It++){var Dt,Qt,di=h[It];if(It<16)Qt=di.high=p[m+It*2]|0,Dt=di.low=p[m+It*2+1]|0;else{var Ku=h[It-15],vn=Ku.high,jn=Ku.low,Uo=(vn>>>1|jn<<31)^(vn>>>8|jn<<24)^vn>>>7,et=(jn>>>1|vn<<31)^(jn>>>8|vn<<24)^(jn>>>7|vn<<25),at=h[It-2],rn=at.high,yr=at.low,Qu=(rn>>>19|yr<<13)^(rn<<3|yr>>>29)^rn>>>6,Xu=(yr>>>19|rn<<13)^(yr<<3|rn>>>29)^(yr>>>6|rn<<26),vr=h[It-7],Yu=vr.high,Zu=vr.low,os=h[It-16],vf=os.high,Ju=os.low;Dt=et+Zu,Qt=Uo+Yu+(Dt>>>0<et>>>0?1:0),Dt=Dt+Xu,Qt=Qt+Qu+(Dt>>>0<Xu>>>0?1:0),Dt=Dt+Ju,Qt=Qt+vf+(Dt>>>0<Ju>>>0?1:0),di.high=Qt,di.low=Dt}var jo=ft&pr^~ft&gr,zo=ut&Un^~ut&mr,ec=he&Ge^he&nn^Ge&nn,fi=be&de^be&fr^de&fr,$o=(he>>>28|be<<4)^(he<<30|be>>>2)^(he<<25|be>>>7),as=(be>>>28|he<<4)^(be<<30|he>>>2)^(be<<25|he>>>7),zn=(ft>>>14|ut<<18)^(ft>>>18|ut<<14)^(ft<<23|ut>>>9),tc=(ut>>>14|ft<<18)^(ut>>>18|ft<<14)^(ut<<23|ft>>>9),pi=l[It],nc=pi.high,_r=pi.low,pt=hi+tc,Ne=ss+zn+(pt>>>0<hi>>>0?1:0),pt=pt+zo,Ne=Ne+jo+(pt>>>0<zo>>>0?1:0),pt=pt+_r,Ne=Ne+nc+(pt>>>0<_r>>>0?1:0),pt=pt+Dt,Ne=Ne+Qt+(pt>>>0<Dt>>>0?1:0),qo=as+fi,gi=$o+ec+(qo>>>0<as>>>0?1:0);ss=gr,hi=mr,gr=pr,mr=Un,pr=ft,Un=ut,ut=yn+pt|0,ft=Lo+Ne+(ut>>>0<yn>>>0?1:0)|0,Lo=nn,yn=fr,nn=Ge,fr=de,Ge=he,de=be,be=pt+qo|0,he=Ne+gi+(be>>>0<pt>>>0?1:0)|0}v=w.low=v+be,w.high=T+he+(v>>>0<be>>>0?1:0),I=E.low=I+de,E.high=C+Ge+(I>>>0<de>>>0?1:0),S=x.low=S+fr,x.high=A+nn+(S>>>0<fr>>>0?1:0),j=D.low=j+yn,D.high=b+Lo+(j>>>0<yn>>>0?1:0),ee=R.low=ee+ut,R.high=te+ft+(ee>>>0<ut>>>0?1:0),le=F.low=le+Un,F.high=oe+pr+(le>>>0<Un>>>0?1:0),q=k.low=q+mr,k.high=L+gr+(q>>>0<mr>>>0?1:0),U=P.low=U+hi,P.high=H+ss+(U>>>0<hi>>>0?1:0)},_doFinalize:function(){var p=this._data,m=p.words,y=this._nDataBytes*8,w=p.sigBytes*8;m[w>>>5]|=128<<24-w%32,m[(w+128>>>10<<5)+30]=Math.floor(y/4294967296),m[(w+128>>>10<<5)+31]=y,p.sigBytes=m.length*4,this._process();var E=this._hash.toX32();return E},clone:function(){var p=r.clone.call(this);return p._hash=this._hash.clone(),p},blockSize:1024/32});e.SHA512=r._createHelper(f),e.HmacSHA512=r._createHmacHelper(f)}(),n.SHA512})});var _A=ge((Hd,vA)=>{"use strict";(function(n,e,t){typeof Hd=="object"?vA.exports=Hd=e(ye(),Wu(),jy()):typeof define=="function"&&define.amd?define(["./core","./x64-core","./sha512"],e):e(n.CryptoJS)})(Hd,function(n){return function(){var e=n,t=e.x64,r=t.Word,i=t.WordArray,s=e.algo,o=s.SHA512,a=s.SHA384=o.extend({_doReset:function(){this._hash=new i.init([new r.init(3418070365,3238371032),new r.init(1654270250,914150663),new r.init(2438529370,812702999),new r.init(355462360,4144912697),new r.init(1731405415,4290775857),new r.init(2394180231,1750603025),new r.init(3675008525,1694076839),new r.init(1203062813,3204075428)])},_doFinalize:function(){var c=o._doFinalize.call(this);return c.sigBytes-=16,c}});e.SHA384=o._createHelper(a),e.HmacSHA384=o._createHmacHelper(a)}(),n.SHA384})});var EA=ge((Gd,xA)=>{"use strict";(function(n,e,t){typeof Gd=="object"?xA.exports=Gd=e(ye(),Wu()):typeof define=="function"&&define.amd?define(["./core","./x64-core"],e):e(n.CryptoJS)})(Gd,function(n){return function(e){var t=n,r=t.lib,i=r.WordArray,s=r.Hasher,o=t.x64,a=o.Word,c=t.algo,l=[],h=[],f=[];(function(){for(var y=1,w=0,E=0;E<24;E++){l[y+5*w]=(E+1)*(E+2)/2%64;var x=w%5,D=(2*y+3*w)%5;y=x,w=D}for(var y=0;y<5;y++)for(var w=0;w<5;w++)h[y+5*w]=w+(2*y+3*w)%5*5;for(var R=1,F=0;F<24;F++){for(var k=0,P=0,T=0;T<7;T++){if(R&1){var v=(1<<T)-1;v<32?P^=1<<v:k^=1<<v-32}R&128?R=R<<1^113:R<<=1}f[F]=a.create(k,P)}})();var p=[];(function(){for(var y=0;y<25;y++)p[y]=a.create()})();var m=c.SHA3=s.extend({cfg:s.cfg.extend({outputLength:512}),_doReset:function(){for(var y=this._state=[],w=0;w<25;w++)y[w]=new a.init;this.blockSize=(1600-2*this.cfg.outputLength)/32},_doProcessBlock:function(y,w){for(var E=this._state,x=this.blockSize/2,D=0;D<x;D++){var R=y[w+2*D],F=y[w+2*D+1];R=(R<<8|R>>>24)&16711935|(R<<24|R>>>8)&4278255360,F=(F<<8|F>>>24)&16711935|(F<<24|F>>>8)&4278255360;var k=E[D];k.high^=F,k.low^=R}for(var P=0;P<24;P++){for(var T=0;T<5;T++){for(var v=0,C=0,I=0;I<5;I++){var k=E[T+5*I];v^=k.high,C^=k.low}var A=p[T];A.high=v,A.low=C}for(var T=0;T<5;T++)for(var S=p[(T+4)%5],b=p[(T+1)%5],j=b.high,te=b.low,v=S.high^(j<<1|te>>>31),C=S.low^(te<<1|j>>>31),I=0;I<5;I++){var k=E[T+5*I];k.high^=v,k.low^=C}for(var ee=1;ee<25;ee++){var v,C,k=E[ee],oe=k.high,le=k.low,L=l[ee];L<32?(v=oe<<L|le>>>32-L,C=le<<L|oe>>>32-L):(v=le<<L-32|oe>>>64-L,C=oe<<L-32|le>>>64-L);var q=p[h[ee]];q.high=v,q.low=C}var H=p[0],U=E[0];H.high=U.high,H.low=U.low;for(var T=0;T<5;T++)for(var I=0;I<5;I++){var ee=T+5*I,k=E[ee],he=p[ee],be=p[(T+1)%5+5*I],Ge=p[(T+2)%5+5*I];k.high=he.high^~be.high&Ge.high,k.low=he.low^~be.low&Ge.low}var k=E[0],de=f[P];k.high^=de.high,k.low^=de.low}},_doFinalize:function(){var y=this._data,w=y.words,E=this._nDataBytes*8,x=y.sigBytes*8,D=this.blockSize*32;w[x>>>5]|=1<<24-x%32,w[(e.ceil((x+1)/D)*D>>>5)-1]|=128,y.sigBytes=w.length*4,this._process();for(var R=this._state,F=this.cfg.outputLength/8,k=F/8,P=[],T=0;T<k;T++){var v=R[T],C=v.high,I=v.low;C=(C<<8|C>>>24)&16711935|(C<<24|C>>>8)&4278255360,I=(I<<8|I>>>24)&16711935|(I<<24|I>>>8)&4278255360,P.push(I),P.push(C)}return new i.init(P,F)},clone:function(){for(var y=s.clone.call(this),w=y._state=this._state.slice(0),E=0;E<25;E++)w[E]=w[E].clone();return y}});t.SHA3=s._createHelper(m),t.HmacSHA3=s._createHmacHelper(m)}(Math),n.SHA3})});var DA=ge((Wd,wA)=>{"use strict";(function(n,e){typeof Wd=="object"?wA.exports=Wd=e(ye()):typeof define=="function"&&define.amd?define(["./core"],e):e(n.CryptoJS)})(Wd,function(n){return function(e){var t=n,r=t.lib,i=r.WordArray,s=r.Hasher,o=t.algo,a=i.create([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13]),c=i.create([5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11]),l=i.create([11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6]),h=i.create([8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11]),f=i.create([0,1518500249,1859775393,2400959708,2840853838]),p=i.create([1352829926,1548603684,1836072691,2053994217,0]),m=o.RIPEMD160=s.extend({_doReset:function(){this._hash=i.create([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(F,k){for(var P=0;P<16;P++){var T=k+P,v=F[T];F[T]=(v<<8|v>>>24)&16711935|(v<<24|v>>>8)&4278255360}var C=this._hash.words,I=f.words,A=p.words,S=a.words,b=c.words,j=l.words,te=h.words,ee,oe,le,L,q,H,U,he,be,Ge;H=ee=C[0],U=oe=C[1],he=le=C[2],be=L=C[3],Ge=q=C[4];for(var de,P=0;P<80;P+=1)de=ee+F[k+S[P]]|0,P<16?de+=y(oe,le,L)+I[0]:P<32?de+=w(oe,le,L)+I[1]:P<48?de+=E(oe,le,L)+I[2]:P<64?de+=x(oe,le,L)+I[3]:de+=D(oe,le,L)+I[4],de=de|0,de=R(de,j[P]),de=de+q|0,ee=q,q=L,L=R(le,10),le=oe,oe=de,de=H+F[k+b[P]]|0,P<16?de+=D(U,he,be)+A[0]:P<32?de+=x(U,he,be)+A[1]:P<48?de+=E(U,he,be)+A[2]:P<64?de+=w(U,he,be)+A[3]:de+=y(U,he,be)+A[4],de=de|0,de=R(de,te[P]),de=de+Ge|0,H=Ge,Ge=be,be=R(he,10),he=U,U=de;de=C[1]+le+be|0,C[1]=C[2]+L+Ge|0,C[2]=C[3]+q+H|0,C[3]=C[4]+ee+U|0,C[4]=C[0]+oe+he|0,C[0]=de},_doFinalize:function(){var F=this._data,k=F.words,P=this._nDataBytes*8,T=F.sigBytes*8;k[T>>>5]|=128<<24-T%32,k[(T+64>>>9<<4)+14]=(P<<8|P>>>24)&16711935|(P<<24|P>>>8)&4278255360,F.sigBytes=(k.length+1)*4,this._process();for(var v=this._hash,C=v.words,I=0;I<5;I++){var A=C[I];C[I]=(A<<8|A>>>24)&16711935|(A<<24|A>>>8)&4278255360}return v},clone:function(){var F=s.clone.call(this);return F._hash=this._hash.clone(),F}});function y(F,k,P){return F^k^P}function w(F,k,P){return F&k|~F&P}function E(F,k,P){return(F|~k)^P}function x(F,k,P){return F&P|k&~P}function D(F,k,P){return F^(k|~P)}function R(F,k){return F<<k|F>>>32-k}t.RIPEMD160=s._createHelper(m),t.HmacRIPEMD160=s._createHmacHelper(m)}(Math),n.RIPEMD160})});var Qd=ge((Kd,CA)=>{"use strict";(function(n,e){typeof Kd=="object"?CA.exports=Kd=e(ye()):typeof define=="function"&&define.amd?define(["./core"],e):e(n.CryptoJS)})(Kd,function(n){(function(){var e=n,t=e.lib,r=t.Base,i=e.enc,s=i.Utf8,o=e.algo,a=o.HMAC=r.extend({init:function(c,l){c=this._hasher=new c.init,typeof l=="string"&&(l=s.parse(l));var h=c.blockSize,f=h*4;l.sigBytes>f&&(l=c.finalize(l)),l.clamp();for(var p=this._oKey=l.clone(),m=this._iKey=l.clone(),y=p.words,w=m.words,E=0;E<h;E++)y[E]^=1549556828,w[E]^=909522486;p.sigBytes=m.sigBytes=f,this.reset()},reset:function(){var c=this._hasher;c.reset(),c.update(this._iKey)},update:function(c){return this._hasher.update(c),this},finalize:function(c){var l=this._hasher,h=l.finalize(c);l.reset();var f=l.finalize(this._oKey.clone().concat(h));return f}})})()})});var bA=ge((Xd,AA)=>{"use strict";(function(n,e,t){typeof Xd=="object"?AA.exports=Xd=e(ye(),zd(),Qd()):typeof define=="function"&&define.amd?define(["./core","./sha256","./hmac"],e):e(n.CryptoJS)})(Xd,function(n){return function(){var e=n,t=e.lib,r=t.Base,i=t.WordArray,s=e.algo,o=s.SHA256,a=s.HMAC,c=s.PBKDF2=r.extend({cfg:r.extend({keySize:128/32,hasher:o,iterations:25e4}),init:function(l){this.cfg=this.cfg.extend(l)},compute:function(l,h){for(var f=this.cfg,p=a.create(f.hasher,l),m=i.create(),y=i.create([1]),w=m.words,E=y.words,x=f.keySize,D=f.iterations;w.length<x;){var R=p.update(h).finalize(y);p.reset();for(var F=R.words,k=F.length,P=R,T=1;T<D;T++){P=p.finalize(P),p.reset();for(var v=P.words,C=0;C<k;C++)F[C]^=v[C]}m.concat(R),E[0]++}return m.sigBytes=x*4,m}});e.PBKDF2=function(l,h,f){return c.create(f).compute(l,h)}}(),n.PBKDF2})});var dr=ge((Yd,TA)=>{"use strict";(function(n,e,t){typeof Yd=="object"?TA.exports=Yd=e(ye(),Uy(),Qd()):typeof define=="function"&&define.amd?define(["./core","./sha1","./hmac"],e):e(n.CryptoJS)})(Yd,function(n){return function(){var e=n,t=e.lib,r=t.Base,i=t.WordArray,s=e.algo,o=s.MD5,a=s.EvpKDF=r.extend({cfg:r.extend({keySize:128/32,hasher:o,iterations:1}),init:function(c){this.cfg=this.cfg.extend(c)},compute:function(c,l){for(var h,f=this.cfg,p=f.hasher.create(),m=i.create(),y=m.words,w=f.keySize,E=f.iterations;y.length<w;){h&&p.update(h),h=p.update(c).finalize(l),p.reset();for(var x=1;x<E;x++)h=p.finalize(h),p.reset();m.concat(h)}return m.sigBytes=w*4,m}});e.EvpKDF=function(c,l,h){return a.create(h).compute(c,l)}}(),n.EvpKDF})});var ot=ge((Zd,IA)=>{"use strict";(function(n,e,t){typeof Zd=="object"?IA.exports=Zd=e(ye(),dr()):typeof define=="function"&&define.amd?define(["./core","./evpkdf"],e):e(n.CryptoJS)})(Zd,function(n){n.lib.Cipher||function(e){var t=n,r=t.lib,i=r.Base,s=r.WordArray,o=r.BufferedBlockAlgorithm,a=t.enc,c=a.Utf8,l=a.Base64,h=t.algo,f=h.EvpKDF,p=r.Cipher=o.extend({cfg:i.extend(),createEncryptor:function(A,S){return this.create(this._ENC_XFORM_MODE,A,S)},createDecryptor:function(A,S){return this.create(this._DEC_XFORM_MODE,A,S)},init:function(A,S,b){this.cfg=this.cfg.extend(b),this._xformMode=A,this._key=S,this.reset()},reset:function(){o.reset.call(this),this._doReset()},process:function(A){return this._append(A),this._process()},finalize:function(A){A&&this._append(A);var S=this._doFinalize();return S},keySize:128/32,ivSize:128/32,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(){function A(S){return typeof S=="string"?I:T}return function(S){return{encrypt:function(b,j,te){return A(j).encrypt(S,b,j,te)},decrypt:function(b,j,te){return A(j).decrypt(S,b,j,te)}}}}()}),m=r.StreamCipher=p.extend({_doFinalize:function(){var A=this._process(!0);return A},blockSize:1}),y=t.mode={},w=r.BlockCipherMode=i.extend({createEncryptor:function(A,S){return this.Encryptor.create(A,S)},createDecryptor:function(A,S){return this.Decryptor.create(A,S)},init:function(A,S){this._cipher=A,this._iv=S}}),E=y.CBC=function(){var A=w.extend();A.Encryptor=A.extend({processBlock:function(b,j){var te=this._cipher,ee=te.blockSize;S.call(this,b,j,ee),te.encryptBlock(b,j),this._prevBlock=b.slice(j,j+ee)}}),A.Decryptor=A.extend({processBlock:function(b,j){var te=this._cipher,ee=te.blockSize,oe=b.slice(j,j+ee);te.decryptBlock(b,j),S.call(this,b,j,ee),this._prevBlock=oe}});function S(b,j,te){var ee,oe=this._iv;oe?(ee=oe,this._iv=e):ee=this._prevBlock;for(var le=0;le<te;le++)b[j+le]^=ee[le]}return A}(),x=t.pad={},D=x.Pkcs7={pad:function(A,S){for(var b=S*4,j=b-A.sigBytes%b,te=j<<24|j<<16|j<<8|j,ee=[],oe=0;oe<j;oe+=4)ee.push(te);var le=s.create(ee,j);A.concat(le)},unpad:function(A){var S=A.words[A.sigBytes-1>>>2]&255;A.sigBytes-=S}},R=r.BlockCipher=p.extend({cfg:p.cfg.extend({mode:E,padding:D}),reset:function(){var A;p.reset.call(this);var S=this.cfg,b=S.iv,j=S.mode;this._xformMode==this._ENC_XFORM_MODE?A=j.createEncryptor:(A=j.createDecryptor,this._minBufferSize=1),this._mode&&this._mode.__creator==A?this._mode.init(this,b&&b.words):(this._mode=A.call(j,this,b&&b.words),this._mode.__creator=A)},_doProcessBlock:function(A,S){this._mode.processBlock(A,S)},_doFinalize:function(){var A,S=this.cfg.padding;return this._xformMode==this._ENC_XFORM_MODE?(S.pad(this._data,this.blockSize),A=this._process(!0)):(A=this._process(!0),S.unpad(A)),A},blockSize:128/32}),F=r.CipherParams=i.extend({init:function(A){this.mixIn(A)},toString:function(A){return(A||this.formatter).stringify(this)}}),k=t.format={},P=k.OpenSSL={stringify:function(A){var S,b=A.ciphertext,j=A.salt;return j?S=s.create([1398893684,1701076831]).concat(j).concat(b):S=b,S.toString(l)},parse:function(A){var S,b=l.parse(A),j=b.words;return j[0]==1398893684&&j[1]==1701076831&&(S=s.create(j.slice(2,4)),j.splice(0,4),b.sigBytes-=16),F.create({ciphertext:b,salt:S})}},T=r.SerializableCipher=i.extend({cfg:i.extend({format:P}),encrypt:function(A,S,b,j){j=this.cfg.extend(j);var te=A.createEncryptor(b,j),ee=te.finalize(S),oe=te.cfg;return F.create({ciphertext:ee,key:b,iv:oe.iv,algorithm:A,mode:oe.mode,padding:oe.padding,blockSize:A.blockSize,formatter:j.format})},decrypt:function(A,S,b,j){j=this.cfg.extend(j),S=this._parse(S,j.format);var te=A.createDecryptor(b,j).finalize(S.ciphertext);return te},_parse:function(A,S){return typeof A=="string"?S.parse(A,this):A}}),v=t.kdf={},C=v.OpenSSL={execute:function(A,S,b,j,te){if(j||(j=s.random(64/8)),te)var ee=f.create({keySize:S+b,hasher:te}).compute(A,j);else var ee=f.create({keySize:S+b}).compute(A,j);var oe=s.create(ee.words.slice(S),b*4);return ee.sigBytes=S*4,F.create({key:ee,iv:oe,salt:j})}},I=r.PasswordBasedCipher=T.extend({cfg:T.cfg.extend({kdf:C}),encrypt:function(A,S,b,j){j=this.cfg.extend(j);var te=j.kdf.execute(b,A.keySize,A.ivSize,j.salt,j.hasher);j.iv=te.iv;var ee=T.encrypt.call(this,A,S,te.key,j);return ee.mixIn(te),ee},decrypt:function(A,S,b,j){j=this.cfg.extend(j),S=this._parse(S,j.format);var te=j.kdf.execute(b,A.keySize,A.ivSize,S.salt,j.hasher);j.iv=te.iv;var ee=T.decrypt.call(this,A,S,te.key,j);return ee}})}()})});var RA=ge((Jd,SA)=>{"use strict";(function(n,e,t){typeof Jd=="object"?SA.exports=Jd=e(ye(),ot()):typeof define=="function"&&define.amd?define(["./core","./cipher-core"],e):e(n.CryptoJS)})(Jd,function(n){return n.mode.CFB=function(){var e=n.lib.BlockCipherMode.extend();e.Encryptor=e.extend({processBlock:function(r,i){var s=this._cipher,o=s.blockSize;t.call(this,r,i,o,s),this._prevBlock=r.slice(i,i+o)}}),e.Decryptor=e.extend({processBlock:function(r,i){var s=this._cipher,o=s.blockSize,a=r.slice(i,i+o);t.call(this,r,i,o,s),this._prevBlock=a}});function t(r,i,s,o){var a,c=this._iv;c?(a=c.slice(0),this._iv=void 0):a=this._prevBlock,o.encryptBlock(a,0);for(var l=0;l<s;l++)r[i+l]^=a[l]}return e}(),n.mode.CFB})});var PA=ge((ef,FA)=>{"use strict";(function(n,e,t){typeof ef=="object"?FA.exports=ef=e(ye(),ot()):typeof define=="function"&&define.amd?define(["./core","./cipher-core"],e):e(n.CryptoJS)})(ef,function(n){return n.mode.CTR=function(){var e=n.lib.BlockCipherMode.extend(),t=e.Encryptor=e.extend({processBlock:function(r,i){var s=this._cipher,o=s.blockSize,a=this._iv,c=this._counter;a&&(c=this._counter=a.slice(0),this._iv=void 0);var l=c.slice(0);s.encryptBlock(l,0),c[o-1]=c[o-1]+1|0;for(var h=0;h<o;h++)r[i+h]^=l[h]}});return e.Decryptor=t,e}(),n.mode.CTR})});var NA=ge((tf,kA)=>{"use strict";(function(n,e,t){typeof tf=="object"?kA.exports=tf=e(ye(),ot()):typeof define=="function"&&define.amd?define(["./core","./cipher-core"],e):e(n.CryptoJS)})(tf,function(n){return n.mode.CTRGladman=function(){var e=n.lib.BlockCipherMode.extend();function t(s){if((s>>24&255)===255){var o=s>>16&255,a=s>>8&255,c=s&255;o===255?(o=0,a===255?(a=0,c===255?c=0:++c):++a):++o,s=0,s+=o<<16,s+=a<<8,s+=c}else s+=1<<24;return s}function r(s){return(s[0]=t(s[0]))===0&&(s[1]=t(s[1])),s}var i=e.Encryptor=e.extend({processBlock:function(s,o){var a=this._cipher,c=a.blockSize,l=this._iv,h=this._counter;l&&(h=this._counter=l.slice(0),this._iv=void 0),r(h);var f=h.slice(0);a.encryptBlock(f,0);for(var p=0;p<c;p++)s[o+p]^=f[p]}});return e.Decryptor=i,e}(),n.mode.CTRGladman})});var OA=ge((nf,MA)=>{"use strict";(function(n,e,t){typeof nf=="object"?MA.exports=nf=e(ye(),ot()):typeof define=="function"&&define.amd?define(["./core","./cipher-core"],e):e(n.CryptoJS)})(nf,function(n){return n.mode.OFB=function(){var e=n.lib.BlockCipherMode.extend(),t=e.Encryptor=e.extend({processBlock:function(r,i){var s=this._cipher,o=s.blockSize,a=this._iv,c=this._keystream;a&&(c=this._keystream=a.slice(0),this._iv=void 0),s.encryptBlock(c,0);for(var l=0;l<o;l++)r[i+l]^=c[l]}});return e.Decryptor=t,e}(),n.mode.OFB})});var VA=ge((rf,BA)=>{"use strict";(function(n,e,t){typeof rf=="object"?BA.exports=rf=e(ye(),ot()):typeof define=="function"&&define.amd?define(["./core","./cipher-core"],e):e(n.CryptoJS)})(rf,function(n){return n.mode.ECB=function(){var e=n.lib.BlockCipherMode.extend();return e.Encryptor=e.extend({processBlock:function(t,r){this._cipher.encryptBlock(t,r)}}),e.Decryptor=e.extend({processBlock:function(t,r){this._cipher.decryptBlock(t,r)}}),e}(),n.mode.ECB})});var UA=ge((sf,LA)=>{"use strict";(function(n,e,t){typeof sf=="object"?LA.exports=sf=e(ye(),ot()):typeof define=="function"&&define.amd?define(["./core","./cipher-core"],e):e(n.CryptoJS)})(sf,function(n){return n.pad.AnsiX923={pad:function(e,t){var r=e.sigBytes,i=t*4,s=i-r%i,o=r+s-1;e.clamp(),e.words[o>>>2]|=s<<24-o%4*8,e.sigBytes+=s},unpad:function(e){var t=e.words[e.sigBytes-1>>>2]&255;e.sigBytes-=t}},n.pad.Ansix923})});var zA=ge((of,jA)=>{"use strict";(function(n,e,t){typeof of=="object"?jA.exports=of=e(ye(),ot()):typeof define=="function"&&define.amd?define(["./core","./cipher-core"],e):e(n.CryptoJS)})(of,function(n){return n.pad.Iso10126={pad:function(e,t){var r=t*4,i=r-e.sigBytes%r;e.concat(n.lib.WordArray.random(i-1)).concat(n.lib.WordArray.create([i<<24],1))},unpad:function(e){var t=e.words[e.sigBytes-1>>>2]&255;e.sigBytes-=t}},n.pad.Iso10126})});var qA=ge((af,$A)=>{"use strict";(function(n,e,t){typeof af=="object"?$A.exports=af=e(ye(),ot()):typeof define=="function"&&define.amd?define(["./core","./cipher-core"],e):e(n.CryptoJS)})(af,function(n){return n.pad.Iso97971={pad:function(e,t){e.concat(n.lib.WordArray.create([2147483648],1)),n.pad.ZeroPadding.pad(e,t)},unpad:function(e){n.pad.ZeroPadding.unpad(e),e.sigBytes--}},n.pad.Iso97971})});var GA=ge((uf,HA)=>{"use strict";(function(n,e,t){typeof uf=="object"?HA.exports=uf=e(ye(),ot()):typeof define=="function"&&define.amd?define(["./core","./cipher-core"],e):e(n.CryptoJS)})(uf,function(n){return n.pad.ZeroPadding={pad:function(e,t){var r=t*4;e.clamp(),e.sigBytes+=r-(e.sigBytes%r||r)},unpad:function(e){for(var t=e.words,r=e.sigBytes-1,r=e.sigBytes-1;r>=0;r--)if(t[r>>>2]>>>24-r%4*8&255){e.sigBytes=r+1;break}}},n.pad.ZeroPadding})});var KA=ge((cf,WA)=>{"use strict";(function(n,e,t){typeof cf=="object"?WA.exports=cf=e(ye(),ot()):typeof define=="function"&&define.amd?define(["./core","./cipher-core"],e):e(n.CryptoJS)})(cf,function(n){return n.pad.NoPadding={pad:function(){},unpad:function(){}},n.pad.NoPadding})});var XA=ge((lf,QA)=>{"use strict";(function(n,e,t){typeof lf=="object"?QA.exports=lf=e(ye(),ot()):typeof define=="function"&&define.amd?define(["./core","./cipher-core"],e):e(n.CryptoJS)})(lf,function(n){return function(e){var t=n,r=t.lib,i=r.CipherParams,s=t.enc,o=s.Hex,a=t.format,c=a.Hex={stringify:function(l){return l.ciphertext.toString(o)},parse:function(l){var h=o.parse(l);return i.create({ciphertext:h})}}}(),n.format.Hex})});var ZA=ge((hf,YA)=>{"use strict";(function(n,e,t){typeof hf=="object"?YA.exports=hf=e(ye(),ci(),li(),dr(),ot()):typeof define=="function"&&define.amd?define(["./core","./enc-base64","./md5","./evpkdf","./cipher-core"],e):e(n.CryptoJS)})(hf,function(n){return function(){var e=n,t=e.lib,r=t.BlockCipher,i=e.algo,s=[],o=[],a=[],c=[],l=[],h=[],f=[],p=[],m=[],y=[];(function(){for(var x=[],D=0;D<256;D++)D<128?x[D]=D<<1:x[D]=D<<1^283;for(var R=0,F=0,D=0;D<256;D++){var k=F^F<<1^F<<2^F<<3^F<<4;k=k>>>8^k&255^99,s[R]=k,o[k]=R;var P=x[R],T=x[P],v=x[T],C=x[k]*257^k*16843008;a[R]=C<<24|C>>>8,c[R]=C<<16|C>>>16,l[R]=C<<8|C>>>24,h[R]=C;var C=v*16843009^T*65537^P*257^R*16843008;f[k]=C<<24|C>>>8,p[k]=C<<16|C>>>16,m[k]=C<<8|C>>>24,y[k]=C,R?(R=P^x[x[x[v^P]]],F^=x[x[F]]):R=F=1}})();var w=[0,1,2,4,8,16,32,64,128,27,54],E=i.AES=r.extend({_doReset:function(){var x;if(!(this._nRounds&&this._keyPriorReset===this._key)){for(var D=this._keyPriorReset=this._key,R=D.words,F=D.sigBytes/4,k=this._nRounds=F+6,P=(k+1)*4,T=this._keySchedule=[],v=0;v<P;v++)v<F?T[v]=R[v]:(x=T[v-1],v%F?F>6&&v%F==4&&(x=s[x>>>24]<<24|s[x>>>16&255]<<16|s[x>>>8&255]<<8|s[x&255]):(x=x<<8|x>>>24,x=s[x>>>24]<<24|s[x>>>16&255]<<16|s[x>>>8&255]<<8|s[x&255],x^=w[v/F|0]<<24),T[v]=T[v-F]^x);for(var C=this._invKeySchedule=[],I=0;I<P;I++){var v=P-I;if(I%4)var x=T[v];else var x=T[v-4];I<4||v<=4?C[I]=x:C[I]=f[s[x>>>24]]^p[s[x>>>16&255]]^m[s[x>>>8&255]]^y[s[x&255]]}}},encryptBlock:function(x,D){this._doCryptBlock(x,D,this._keySchedule,a,c,l,h,s)},decryptBlock:function(x,D){var R=x[D+1];x[D+1]=x[D+3],x[D+3]=R,this._doCryptBlock(x,D,this._invKeySchedule,f,p,m,y,o);var R=x[D+1];x[D+1]=x[D+3],x[D+3]=R},_doCryptBlock:function(x,D,R,F,k,P,T,v){for(var C=this._nRounds,I=x[D]^R[0],A=x[D+1]^R[1],S=x[D+2]^R[2],b=x[D+3]^R[3],j=4,te=1;te<C;te++){var ee=F[I>>>24]^k[A>>>16&255]^P[S>>>8&255]^T[b&255]^R[j++],oe=F[A>>>24]^k[S>>>16&255]^P[b>>>8&255]^T[I&255]^R[j++],le=F[S>>>24]^k[b>>>16&255]^P[I>>>8&255]^T[A&255]^R[j++],L=F[b>>>24]^k[I>>>16&255]^P[A>>>8&255]^T[S&255]^R[j++];I=ee,A=oe,S=le,b=L}var ee=(v[I>>>24]<<24|v[A>>>16&255]<<16|v[S>>>8&255]<<8|v[b&255])^R[j++],oe=(v[A>>>24]<<24|v[S>>>16&255]<<16|v[b>>>8&255]<<8|v[I&255])^R[j++],le=(v[S>>>24]<<24|v[b>>>16&255]<<16|v[I>>>8&255]<<8|v[A&255])^R[j++],L=(v[b>>>24]<<24|v[I>>>16&255]<<16|v[A>>>8&255]<<8|v[S&255])^R[j++];x[D]=ee,x[D+1]=oe,x[D+2]=le,x[D+3]=L},keySize:256/32});e.AES=r._createHelper(E)}(),n.AES})});var eb=ge((df,JA)=>{"use strict";(function(n,e,t){typeof df=="object"?JA.exports=df=e(ye(),ci(),li(),dr(),ot()):typeof define=="function"&&define.amd?define(["./core","./enc-base64","./md5","./evpkdf","./cipher-core"],e):e(n.CryptoJS)})(df,function(n){return function(){var e=n,t=e.lib,r=t.WordArray,i=t.BlockCipher,s=e.algo,o=[57,49,41,33,25,17,9,1,58,50,42,34,26,18,10,2,59,51,43,35,27,19,11,3,60,52,44,36,63,55,47,39,31,23,15,7,62,54,46,38,30,22,14,6,61,53,45,37,29,21,13,5,28,20,12,4],a=[14,17,11,24,1,5,3,28,15,6,21,10,23,19,12,4,26,8,16,7,27,20,13,2,41,52,31,37,47,55,30,40,51,45,33,48,44,49,39,56,34,53,46,42,50,36,29,32],c=[1,2,4,6,8,10,12,14,15,17,19,21,23,25,27,28],l=[{0:8421888,268435456:32768,536870912:8421378,805306368:2,1073741824:512,1342177280:8421890,1610612736:8389122,1879048192:8388608,2147483648:514,2415919104:8389120,2684354560:33280,2952790016:8421376,3221225472:32770,3489660928:8388610,3758096384:0,4026531840:33282,134217728:0,402653184:8421890,671088640:33282,939524096:32768,1207959552:8421888,1476395008:512,1744830464:8421378,2013265920:2,2281701376:8389120,2550136832:33280,2818572288:8421376,3087007744:8389122,3355443200:8388610,3623878656:32770,3892314112:514,4160749568:8388608,1:32768,268435457:2,536870913:8421888,805306369:8388608,1073741825:8421378,1342177281:33280,1610612737:512,1879048193:8389122,2147483649:8421890,2415919105:8421376,2684354561:8388610,2952790017:33282,3221225473:514,3489660929:8389120,3758096385:32770,4026531841:0,134217729:8421890,402653185:8421376,671088641:8388608,939524097:512,1207959553:32768,1476395009:8388610,1744830465:2,2013265921:33282,2281701377:32770,2550136833:8389122,2818572289:514,3087007745:8421888,3355443201:8389120,3623878657:0,3892314113:33280,4160749569:8421378},{0:1074282512,16777216:16384,33554432:524288,50331648:1074266128,67108864:1073741840,83886080:1074282496,100663296:1073758208,117440512:16,134217728:540672,150994944:1073758224,167772160:1073741824,184549376:540688,201326592:524304,218103808:0,234881024:16400,251658240:1074266112,8388608:1073758208,25165824:540688,41943040:16,58720256:1073758224,75497472:1074282512,92274688:1073741824,109051904:524288,125829120:1074266128,142606336:524304,159383552:0,176160768:16384,192937984:1074266112,209715200:1073741840,226492416:540672,243269632:1074282496,260046848:16400,268435456:0,285212672:1074266128,301989888:1073758224,318767104:1074282496,335544320:1074266112,352321536:16,369098752:540688,385875968:16384,402653184:16400,419430400:524288,436207616:524304,452984832:1073741840,469762048:540672,486539264:1073758208,503316480:1073741824,520093696:1074282512,276824064:540688,293601280:524288,310378496:1074266112,327155712:16384,343932928:1073758208,360710144:1074282512,377487360:16,394264576:1073741824,411041792:1074282496,427819008:1073741840,444596224:1073758224,461373440:524304,478150656:0,494927872:16400,511705088:1074266128,528482304:540672},{0:260,1048576:0,2097152:67109120,3145728:65796,4194304:65540,5242880:67108868,6291456:67174660,7340032:67174400,8388608:67108864,9437184:67174656,10485760:65792,11534336:67174404,12582912:67109124,13631488:65536,14680064:4,15728640:256,524288:67174656,1572864:67174404,2621440:0,3670016:67109120,4718592:67108868,5767168:65536,6815744:65540,7864320:260,8912896:4,9961472:256,11010048:67174400,12058624:65796,13107200:65792,14155776:67109124,15204352:67174660,16252928:67108864,16777216:67174656,17825792:65540,18874368:65536,19922944:67109120,20971520:256,22020096:67174660,23068672:67108868,24117248:0,25165824:67109124,26214400:67108864,27262976:4,28311552:65792,29360128:67174400,30408704:260,31457280:65796,32505856:67174404,17301504:67108864,18350080:260,19398656:67174656,20447232:0,21495808:65540,22544384:67109120,23592960:256,24641536:67174404,25690112:65536,26738688:67174660,27787264:65796,28835840:67108868,29884416:67109124,30932992:67174400,31981568:4,33030144:65792},{0:2151682048,65536:2147487808,131072:4198464,196608:2151677952,262144:0,327680:4198400,393216:2147483712,458752:4194368,524288:2147483648,589824:4194304,655360:64,720896:2147487744,786432:2151678016,851968:4160,917504:4096,983040:2151682112,32768:2147487808,98304:64,163840:2151678016,229376:2147487744,294912:4198400,360448:2151682112,425984:0,491520:2151677952,557056:4096,622592:2151682048,688128:4194304,753664:4160,819200:2147483648,884736:4194368,950272:4198464,1015808:2147483712,1048576:4194368,1114112:4198400,1179648:2147483712,1245184:0,1310720:4160,1376256:2151678016,1441792:2151682048,1507328:2147487808,1572864:2151682112,1638400:2147483648,1703936:2151677952,1769472:4198464,1835008:2147487744,1900544:4194304,1966080:64,2031616:4096,1081344:2151677952,1146880:2151682112,1212416:0,1277952:4198400,1343488:4194368,1409024:2147483648,1474560:2147487808,1540096:64,1605632:2147483712,1671168:4096,1736704:2147487744,1802240:2151678016,1867776:4160,1933312:2151682048,1998848:4194304,2064384:4198464},{0:128,4096:17039360,8192:262144,12288:536870912,16384:537133184,20480:16777344,24576:553648256,28672:262272,32768:16777216,36864:537133056,40960:536871040,45056:553910400,49152:553910272,53248:0,57344:17039488,61440:553648128,2048:17039488,6144:553648256,10240:128,14336:17039360,18432:262144,22528:537133184,26624:553910272,30720:536870912,34816:537133056,38912:0,43008:553910400,47104:16777344,51200:536871040,55296:553648128,59392:16777216,63488:262272,65536:262144,69632:128,73728:536870912,77824:553648256,81920:16777344,86016:553910272,90112:537133184,94208:16777216,98304:553910400,102400:553648128,106496:17039360,110592:537133056,114688:262272,118784:536871040,122880:0,126976:17039488,67584:553648256,71680:16777216,75776:17039360,79872:537133184,83968:536870912,88064:17039488,92160:128,96256:553910272,100352:262272,104448:553910400,108544:0,112640:553648128,116736:16777344,120832:262144,124928:537133056,129024:536871040},{0:268435464,256:8192,512:270532608,768:270540808,1024:268443648,1280:2097152,1536:2097160,1792:268435456,2048:0,2304:268443656,2560:2105344,2816:8,3072:270532616,3328:2105352,3584:8200,3840:270540800,128:270532608,384:270540808,640:8,896:2097152,1152:2105352,1408:268435464,1664:268443648,1920:8200,2176:2097160,2432:8192,2688:268443656,2944:270532616,3200:0,3456:270540800,3712:2105344,3968:268435456,4096:268443648,4352:270532616,4608:270540808,4864:8200,5120:2097152,5376:268435456,5632:268435464,5888:2105344,6144:2105352,6400:0,6656:8,6912:270532608,7168:8192,7424:268443656,7680:270540800,7936:2097160,4224:8,4480:2105344,4736:2097152,4992:268435464,5248:268443648,5504:8200,5760:270540808,6016:270532608,6272:270540800,6528:270532616,6784:8192,7040:2105352,7296:2097160,7552:0,7808:268435456,8064:268443656},{0:1048576,16:33555457,32:1024,48:1049601,64:34604033,80:0,96:1,112:34603009,128:33555456,144:1048577,160:33554433,176:34604032,192:34603008,208:1025,224:1049600,240:33554432,8:34603009,24:0,40:33555457,56:34604032,72:1048576,88:33554433,104:33554432,120:1025,136:1049601,152:33555456,168:34603008,184:1048577,200:1024,216:34604033,232:1,248:1049600,256:33554432,272:1048576,288:33555457,304:34603009,320:1048577,336:33555456,352:34604032,368:1049601,384:1025,400:34604033,416:1049600,432:1,448:0,464:34603008,480:33554433,496:1024,264:1049600,280:33555457,296:34603009,312:1,328:33554432,344:1048576,360:1025,376:34604032,392:33554433,408:34603008,424:0,440:34604033,456:1049601,472:1024,488:33555456,504:1048577},{0:134219808,1:131072,2:134217728,3:32,4:131104,5:134350880,6:134350848,7:2048,8:134348800,9:134219776,10:133120,11:134348832,12:2080,13:0,14:134217760,15:133152,2147483648:2048,2147483649:134350880,2147483650:134219808,2147483651:134217728,2147483652:134348800,2147483653:133120,2147483654:133152,2147483655:32,2147483656:134217760,2147483657:2080,2147483658:131104,2147483659:134350848,2147483660:0,2147483661:134348832,2147483662:134219776,2147483663:131072,16:133152,17:134350848,18:32,19:2048,20:134219776,21:134217760,22:134348832,23:131072,24:0,25:131104,26:134348800,27:134219808,28:134350880,29:133120,30:2080,31:134217728,2147483664:131072,2147483665:2048,2147483666:134348832,2147483667:133152,2147483668:32,2147483669:134348800,2147483670:134217728,2147483671:134219808,2147483672:134350880,2147483673:134217760,2147483674:134219776,2147483675:0,2147483676:133120,2147483677:2080,2147483678:131104,2147483679:134350848}],h=[4160749569,528482304,33030144,2064384,129024,8064,504,2147483679],f=s.DES=i.extend({_doReset:function(){for(var w=this._key,E=w.words,x=[],D=0;D<56;D++){var R=o[D]-1;x[D]=E[R>>>5]>>>31-R%32&1}for(var F=this._subKeys=[],k=0;k<16;k++){for(var P=F[k]=[],T=c[k],D=0;D<24;D++)P[D/6|0]|=x[(a[D]-1+T)%28]<<31-D%6,P[4+(D/6|0)]|=x[28+(a[D+24]-1+T)%28]<<31-D%6;P[0]=P[0]<<1|P[0]>>>31;for(var D=1;D<7;D++)P[D]=P[D]>>>(D-1)*4+3;P[7]=P[7]<<5|P[7]>>>27}for(var v=this._invSubKeys=[],D=0;D<16;D++)v[D]=F[15-D]},encryptBlock:function(w,E){this._doCryptBlock(w,E,this._subKeys)},decryptBlock:function(w,E){this._doCryptBlock(w,E,this._invSubKeys)},_doCryptBlock:function(w,E,x){this._lBlock=w[E],this._rBlock=w[E+1],p.call(this,4,252645135),p.call(this,16,65535),m.call(this,2,858993459),m.call(this,8,16711935),p.call(this,1,1431655765);for(var D=0;D<16;D++){for(var R=x[D],F=this._lBlock,k=this._rBlock,P=0,T=0;T<8;T++)P|=l[T][((k^R[T])&h[T])>>>0];this._lBlock=k,this._rBlock=F^P}var v=this._lBlock;this._lBlock=this._rBlock,this._rBlock=v,p.call(this,1,1431655765),m.call(this,8,16711935),m.call(this,2,858993459),p.call(this,16,65535),p.call(this,4,252645135),w[E]=this._lBlock,w[E+1]=this._rBlock},keySize:64/32,ivSize:64/32,blockSize:64/32});function p(w,E){var x=(this._lBlock>>>w^this._rBlock)&E;this._rBlock^=x,this._lBlock^=x<<w}function m(w,E){var x=(this._rBlock>>>w^this._lBlock)&E;this._lBlock^=x,this._rBlock^=x<<w}e.DES=i._createHelper(f);var y=s.TripleDES=i.extend({_doReset:function(){var w=this._key,E=w.words;if(E.length!==2&&E.length!==4&&E.length<6)throw new Error("Invalid key length - 3DES requires the key length to be 64, 128, 192 or >192.");var x=E.slice(0,2),D=E.length<4?E.slice(0,2):E.slice(2,4),R=E.length<6?E.slice(0,2):E.slice(4,6);this._des1=f.createEncryptor(r.create(x)),this._des2=f.createEncryptor(r.create(D)),this._des3=f.createEncryptor(r.create(R))},encryptBlock:function(w,E){this._des1.encryptBlock(w,E),this._des2.decryptBlock(w,E),this._des3.encryptBlock(w,E)},decryptBlock:function(w,E){this._des3.decryptBlock(w,E),this._des2.encryptBlock(w,E),this._des1.decryptBlock(w,E)},keySize:192/32,ivSize:64/32,blockSize:64/32});e.TripleDES=i._createHelper(y)}(),n.TripleDES})});var nb=ge((ff,tb)=>{"use strict";(function(n,e,t){typeof ff=="object"?tb.exports=ff=e(ye(),ci(),li(),dr(),ot()):typeof define=="function"&&define.amd?define(["./core","./enc-base64","./md5","./evpkdf","./cipher-core"],e):e(n.CryptoJS)})(ff,function(n){return function(){var e=n,t=e.lib,r=t.StreamCipher,i=e.algo,s=i.RC4=r.extend({_doReset:function(){for(var c=this._key,l=c.words,h=c.sigBytes,f=this._S=[],p=0;p<256;p++)f[p]=p;for(var p=0,m=0;p<256;p++){var y=p%h,w=l[y>>>2]>>>24-y%4*8&255;m=(m+f[p]+w)%256;var E=f[p];f[p]=f[m],f[m]=E}this._i=this._j=0},_doProcessBlock:function(c,l){c[l]^=o.call(this)},keySize:256/32,ivSize:0});function o(){for(var c=this._S,l=this._i,h=this._j,f=0,p=0;p<4;p++){l=(l+1)%256,h=(h+c[l])%256;var m=c[l];c[l]=c[h],c[h]=m,f|=c[(c[l]+c[h])%256]<<24-p*8}return this._i=l,this._j=h,f}e.RC4=r._createHelper(s);var a=i.RC4Drop=s.extend({cfg:s.cfg.extend({drop:192}),_doReset:function(){s._doReset.call(this);for(var c=this.cfg.drop;c>0;c--)o.call(this)}});e.RC4Drop=r._createHelper(a)}(),n.RC4})});var ib=ge((pf,rb)=>{"use strict";(function(n,e,t){typeof pf=="object"?rb.exports=pf=e(ye(),ci(),li(),dr(),ot()):typeof define=="function"&&define.amd?define(["./core","./enc-base64","./md5","./evpkdf","./cipher-core"],e):e(n.CryptoJS)})(pf,function(n){return function(){var e=n,t=e.lib,r=t.StreamCipher,i=e.algo,s=[],o=[],a=[],c=i.Rabbit=r.extend({_doReset:function(){for(var h=this._key.words,f=this.cfg.iv,p=0;p<4;p++)h[p]=(h[p]<<8|h[p]>>>24)&16711935|(h[p]<<24|h[p]>>>8)&4278255360;var m=this._X=[h[0],h[3]<<16|h[2]>>>16,h[1],h[0]<<16|h[3]>>>16,h[2],h[1]<<16|h[0]>>>16,h[3],h[2]<<16|h[1]>>>16],y=this._C=[h[2]<<16|h[2]>>>16,h[0]&4294901760|h[1]&65535,h[3]<<16|h[3]>>>16,h[1]&4294901760|h[2]&65535,h[0]<<16|h[0]>>>16,h[2]&4294901760|h[3]&65535,h[1]<<16|h[1]>>>16,h[3]&4294901760|h[0]&65535];this._b=0;for(var p=0;p<4;p++)l.call(this);for(var p=0;p<8;p++)y[p]^=m[p+4&7];if(f){var w=f.words,E=w[0],x=w[1],D=(E<<8|E>>>24)&16711935|(E<<24|E>>>8)&4278255360,R=(x<<8|x>>>24)&16711935|(x<<24|x>>>8)&4278255360,F=D>>>16|R&4294901760,k=R<<16|D&65535;y[0]^=D,y[1]^=F,y[2]^=R,y[3]^=k,y[4]^=D,y[5]^=F,y[6]^=R,y[7]^=k;for(var p=0;p<4;p++)l.call(this)}},_doProcessBlock:function(h,f){var p=this._X;l.call(this),s[0]=p[0]^p[5]>>>16^p[3]<<16,s[1]=p[2]^p[7]>>>16^p[5]<<16,s[2]=p[4]^p[1]>>>16^p[7]<<16,s[3]=p[6]^p[3]>>>16^p[1]<<16;for(var m=0;m<4;m++)s[m]=(s[m]<<8|s[m]>>>24)&16711935|(s[m]<<24|s[m]>>>8)&4278255360,h[f+m]^=s[m]},blockSize:128/32,ivSize:64/32});function l(){for(var h=this._X,f=this._C,p=0;p<8;p++)o[p]=f[p];f[0]=f[0]+1295307597+this._b|0,f[1]=f[1]+3545052371+(f[0]>>>0<o[0]>>>0?1:0)|0,f[2]=f[2]+886263092+(f[1]>>>0<o[1]>>>0?1:0)|0,f[3]=f[3]+1295307597+(f[2]>>>0<o[2]>>>0?1:0)|0,f[4]=f[4]+3545052371+(f[3]>>>0<o[3]>>>0?1:0)|0,f[5]=f[5]+886263092+(f[4]>>>0<o[4]>>>0?1:0)|0,f[6]=f[6]+1295307597+(f[5]>>>0<o[5]>>>0?1:0)|0,f[7]=f[7]+3545052371+(f[6]>>>0<o[6]>>>0?1:0)|0,this._b=f[7]>>>0<o[7]>>>0?1:0;for(var p=0;p<8;p++){var m=h[p]+f[p],y=m&65535,w=m>>>16,E=((y*y>>>17)+y*w>>>15)+w*w,x=((m&4294901760)*m|0)+((m&65535)*m|0);a[p]=E^x}h[0]=a[0]+(a[7]<<16|a[7]>>>16)+(a[6]<<16|a[6]>>>16)|0,h[1]=a[1]+(a[0]<<8|a[0]>>>24)+a[7]|0,h[2]=a[2]+(a[1]<<16|a[1]>>>16)+(a[0]<<16|a[0]>>>16)|0,h[3]=a[3]+(a[2]<<8|a[2]>>>24)+a[1]|0,h[4]=a[4]+(a[3]<<16|a[3]>>>16)+(a[2]<<16|a[2]>>>16)|0,h[5]=a[5]+(a[4]<<8|a[4]>>>24)+a[3]|0,h[6]=a[6]+(a[5]<<16|a[5]>>>16)+(a[4]<<16|a[4]>>>16)|0,h[7]=a[7]+(a[6]<<8|a[6]>>>24)+a[5]|0}e.Rabbit=r._createHelper(c)}(),n.Rabbit})});var ob=ge((gf,sb)=>{"use strict";(function(n,e,t){typeof gf=="object"?sb.exports=gf=e(ye(),ci(),li(),dr(),ot()):typeof define=="function"&&define.amd?define(["./core","./enc-base64","./md5","./evpkdf","./cipher-core"],e):e(n.CryptoJS)})(gf,function(n){return function(){var e=n,t=e.lib,r=t.StreamCipher,i=e.algo,s=[],o=[],a=[],c=i.RabbitLegacy=r.extend({_doReset:function(){var h=this._key.words,f=this.cfg.iv,p=this._X=[h[0],h[3]<<16|h[2]>>>16,h[1],h[0]<<16|h[3]>>>16,h[2],h[1]<<16|h[0]>>>16,h[3],h[2]<<16|h[1]>>>16],m=this._C=[h[2]<<16|h[2]>>>16,h[0]&4294901760|h[1]&65535,h[3]<<16|h[3]>>>16,h[1]&4294901760|h[2]&65535,h[0]<<16|h[0]>>>16,h[2]&4294901760|h[3]&65535,h[1]<<16|h[1]>>>16,h[3]&4294901760|h[0]&65535];this._b=0;for(var y=0;y<4;y++)l.call(this);for(var y=0;y<8;y++)m[y]^=p[y+4&7];if(f){var w=f.words,E=w[0],x=w[1],D=(E<<8|E>>>24)&16711935|(E<<24|E>>>8)&4278255360,R=(x<<8|x>>>24)&16711935|(x<<24|x>>>8)&4278255360,F=D>>>16|R&4294901760,k=R<<16|D&65535;m[0]^=D,m[1]^=F,m[2]^=R,m[3]^=k,m[4]^=D,m[5]^=F,m[6]^=R,m[7]^=k;for(var y=0;y<4;y++)l.call(this)}},_doProcessBlock:function(h,f){var p=this._X;l.call(this),s[0]=p[0]^p[5]>>>16^p[3]<<16,s[1]=p[2]^p[7]>>>16^p[5]<<16,s[2]=p[4]^p[1]>>>16^p[7]<<16,s[3]=p[6]^p[3]>>>16^p[1]<<16;for(var m=0;m<4;m++)s[m]=(s[m]<<8|s[m]>>>24)&16711935|(s[m]<<24|s[m]>>>8)&4278255360,h[f+m]^=s[m]},blockSize:128/32,ivSize:64/32});function l(){for(var h=this._X,f=this._C,p=0;p<8;p++)o[p]=f[p];f[0]=f[0]+1295307597+this._b|0,f[1]=f[1]+3545052371+(f[0]>>>0<o[0]>>>0?1:0)|0,f[2]=f[2]+886263092+(f[1]>>>0<o[1]>>>0?1:0)|0,f[3]=f[3]+1295307597+(f[2]>>>0<o[2]>>>0?1:0)|0,f[4]=f[4]+3545052371+(f[3]>>>0<o[3]>>>0?1:0)|0,f[5]=f[5]+886263092+(f[4]>>>0<o[4]>>>0?1:0)|0,f[6]=f[6]+1295307597+(f[5]>>>0<o[5]>>>0?1:0)|0,f[7]=f[7]+3545052371+(f[6]>>>0<o[6]>>>0?1:0)|0,this._b=f[7]>>>0<o[7]>>>0?1:0;for(var p=0;p<8;p++){var m=h[p]+f[p],y=m&65535,w=m>>>16,E=((y*y>>>17)+y*w>>>15)+w*w,x=((m&4294901760)*m|0)+((m&65535)*m|0);a[p]=E^x}h[0]=a[0]+(a[7]<<16|a[7]>>>16)+(a[6]<<16|a[6]>>>16)|0,h[1]=a[1]+(a[0]<<8|a[0]>>>24)+a[7]|0,h[2]=a[2]+(a[1]<<16|a[1]>>>16)+(a[0]<<16|a[0]>>>16)|0,h[3]=a[3]+(a[2]<<8|a[2]>>>24)+a[1]|0,h[4]=a[4]+(a[3]<<16|a[3]>>>16)+(a[2]<<16|a[2]>>>16)|0,h[5]=a[5]+(a[4]<<8|a[4]>>>24)+a[3]|0,h[6]=a[6]+(a[5]<<16|a[5]>>>16)+(a[4]<<16|a[4]>>>16)|0,h[7]=a[7]+(a[6]<<8|a[6]>>>24)+a[5]|0}e.RabbitLegacy=r._createHelper(c)}(),n.RabbitLegacy})});var ub=ge((mf,ab)=>{"use strict";(function(n,e,t){typeof mf=="object"?ab.exports=mf=e(ye(),ci(),li(),dr(),ot()):typeof define=="function"&&define.amd?define(["./core","./enc-base64","./md5","./evpkdf","./cipher-core"],e):e(n.CryptoJS)})(mf,function(n){return function(){var e=n,t=e.lib,r=t.BlockCipher,i=e.algo;let s=16,o=[608135816,2242054355,320440878,57701188,2752067618,698298832,137296536,3964562569,1160258022,953160567,3193202383,887688300,3232508343,3380367581,1065670069,3041331479,2450970073,2306472731],a=[[3509652390,2564797868,805139163,3491422135,3101798381,1780907670,3128725573,4046225305,614570311,3012652279,134345442,2240740374,1667834072,1901547113,2757295779,4103290238,227898511,1921955416,1904987480,2182433518,2069144605,3260701109,2620446009,720527379,3318853667,677414384,3393288472,3101374703,2390351024,1614419982,1822297739,2954791486,3608508353,3174124327,2024746970,1432378464,3864339955,2857741204,1464375394,1676153920,1439316330,715854006,3033291828,289532110,2706671279,2087905683,3018724369,1668267050,732546397,1947742710,3462151702,2609353502,2950085171,1814351708,2050118529,680887927,999245976,1800124847,3300911131,1713906067,1641548236,4213287313,1216130144,1575780402,4018429277,3917837745,3693486850,3949271944,596196993,3549867205,258830323,2213823033,772490370,2760122372,1774776394,2652871518,566650946,4142492826,1728879713,2882767088,1783734482,3629395816,2517608232,2874225571,1861159788,326777828,3124490320,2130389656,2716951837,967770486,1724537150,2185432712,2364442137,1164943284,2105845187,998989502,3765401048,2244026483,1075463327,1455516326,1322494562,910128902,469688178,1117454909,936433444,3490320968,3675253459,1240580251,122909385,2157517691,634681816,4142456567,3825094682,3061402683,2540495037,79693498,3249098678,1084186820,1583128258,426386531,1761308591,1047286709,322548459,995290223,1845252383,2603652396,3431023940,2942221577,3202600964,3727903485,1712269319,422464435,3234572375,1170764815,3523960633,3117677531,1434042557,442511882,3600875718,1076654713,1738483198,4213154764,2393238008,3677496056,1014306527,4251020053,793779912,2902807211,842905082,4246964064,1395751752,1040244610,2656851899,3396308128,445077038,3742853595,3577915638,679411651,2892444358,2354009459,1767581616,3150600392,3791627101,3102740896,284835224,4246832056,1258075500,768725851,2589189241,3069724005,3532540348,1274779536,3789419226,2764799539,1660621633,3471099624,4011903706,913787905,3497959166,737222580,2514213453,2928710040,3937242737,1804850592,3499020752,2949064160,2386320175,2390070455,2415321851,4061277028,2290661394,2416832540,1336762016,1754252060,3520065937,3014181293,791618072,3188594551,3933548030,2332172193,3852520463,3043980520,413987798,3465142937,3030929376,4245938359,2093235073,3534596313,375366246,2157278981,2479649556,555357303,3870105701,2008414854,3344188149,4221384143,3956125452,2067696032,3594591187,2921233993,2428461,544322398,577241275,1471733935,610547355,4027169054,1432588573,1507829418,2025931657,3646575487,545086370,48609733,2200306550,1653985193,298326376,1316178497,3007786442,2064951626,458293330,2589141269,3591329599,3164325604,727753846,2179363840,146436021,1461446943,4069977195,705550613,3059967265,3887724982,4281599278,3313849956,1404054877,2845806497,146425753,1854211946],[1266315497,3048417604,3681880366,3289982499,290971e4,1235738493,2632868024,2414719590,3970600049,1771706367,1449415276,3266420449,422970021,1963543593,2690192192,3826793022,1062508698,1531092325,1804592342,2583117782,2714934279,4024971509,1294809318,4028980673,1289560198,2221992742,1669523910,35572830,157838143,1052438473,1016535060,1802137761,1753167236,1386275462,3080475397,2857371447,1040679964,2145300060,2390574316,1461121720,2956646967,4031777805,4028374788,33600511,2920084762,1018524850,629373528,3691585981,3515945977,2091462646,2486323059,586499841,988145025,935516892,3367335476,2599673255,2839830854,265290510,3972581182,2759138881,3795373465,1005194799,847297441,406762289,1314163512,1332590856,1866599683,4127851711,750260880,613907577,1450815602,3165620655,3734664991,3650291728,3012275730,3704569646,1427272223,778793252,1343938022,2676280711,2052605720,1946737175,3164576444,3914038668,3967478842,3682934266,1661551462,3294938066,4011595847,840292616,3712170807,616741398,312560963,711312465,1351876610,322626781,1910503582,271666773,2175563734,1594956187,70604529,3617834859,1007753275,1495573769,4069517037,2549218298,2663038764,504708206,2263041392,3941167025,2249088522,1514023603,1998579484,1312622330,694541497,2582060303,2151582166,1382467621,776784248,2618340202,3323268794,2497899128,2784771155,503983604,4076293799,907881277,423175695,432175456,1378068232,4145222326,3954048622,3938656102,3820766613,2793130115,2977904593,26017576,3274890735,3194772133,1700274565,1756076034,4006520079,3677328699,720338349,1533947780,354530856,688349552,3973924725,1637815568,332179504,3949051286,53804574,2852348879,3044236432,1282449977,3583942155,3416972820,4006381244,1617046695,2628476075,3002303598,1686838959,431878346,2686675385,1700445008,1080580658,1009431731,832498133,3223435511,2605976345,2271191193,2516031870,1648197032,4164389018,2548247927,300782431,375919233,238389289,3353747414,2531188641,2019080857,1475708069,455242339,2609103871,448939670,3451063019,1395535956,2413381860,1841049896,1491858159,885456874,4264095073,4001119347,1565136089,3898914787,1108368660,540939232,1173283510,2745871338,3681308437,4207628240,3343053890,4016749493,1699691293,1103962373,3625875870,2256883143,3830138730,1031889488,3479347698,1535977030,4236805024,3251091107,2132092099,1774941330,1199868427,1452454533,157007616,2904115357,342012276,595725824,1480756522,206960106,497939518,591360097,863170706,2375253569,3596610801,1814182875,2094937945,3421402208,1082520231,3463918190,2785509508,435703966,3908032597,1641649973,2842273706,3305899714,1510255612,2148256476,2655287854,3276092548,4258621189,236887753,3681803219,274041037,1734335097,3815195456,3317970021,1899903192,1026095262,4050517792,356393447,2410691914,3873677099,3682840055],[3913112168,2491498743,4132185628,2489919796,1091903735,1979897079,3170134830,3567386728,3557303409,857797738,1136121015,1342202287,507115054,2535736646,337727348,3213592640,1301675037,2528481711,1895095763,1721773893,3216771564,62756741,2142006736,835421444,2531993523,1442658625,3659876326,2882144922,676362277,1392781812,170690266,3921047035,1759253602,3611846912,1745797284,664899054,1329594018,3901205900,3045908486,2062866102,2865634940,3543621612,3464012697,1080764994,553557557,3656615353,3996768171,991055499,499776247,1265440854,648242737,3940784050,980351604,3713745714,1749149687,3396870395,4211799374,3640570775,1161844396,3125318951,1431517754,545492359,4268468663,3499529547,1437099964,2702547544,3433638243,2581715763,2787789398,1060185593,1593081372,2418618748,4260947970,69676912,2159744348,86519011,2512459080,3838209314,1220612927,3339683548,133810670,1090789135,1078426020,1569222167,845107691,3583754449,4072456591,1091646820,628848692,1613405280,3757631651,526609435,236106946,48312990,2942717905,3402727701,1797494240,859738849,992217954,4005476642,2243076622,3870952857,3732016268,765654824,3490871365,2511836413,1685915746,3888969200,1414112111,2273134842,3281911079,4080962846,172450625,2569994100,980381355,4109958455,2819808352,2716589560,2568741196,3681446669,3329971472,1835478071,660984891,3704678404,4045999559,3422617507,3040415634,1762651403,1719377915,3470491036,2693910283,3642056355,3138596744,1364962596,2073328063,1983633131,926494387,3423689081,2150032023,4096667949,1749200295,3328846651,309677260,2016342300,1779581495,3079819751,111262694,1274766160,443224088,298511866,1025883608,3806446537,1145181785,168956806,3641502830,3584813610,1689216846,3666258015,3200248200,1692713982,2646376535,4042768518,1618508792,1610833997,3523052358,4130873264,2001055236,3610705100,2202168115,4028541809,2961195399,1006657119,2006996926,3186142756,1430667929,3210227297,1314452623,4074634658,4101304120,2273951170,1399257539,3367210612,3027628629,1190975929,2062231137,2333990788,2221543033,2438960610,1181637006,548689776,2362791313,3372408396,3104550113,3145860560,296247880,1970579870,3078560182,3769228297,1714227617,3291629107,3898220290,166772364,1251581989,493813264,448347421,195405023,2709975567,677966185,3703036547,1463355134,2715995803,1338867538,1343315457,2802222074,2684532164,233230375,2599980071,2000651841,3277868038,1638401717,4028070440,3237316320,6314154,819756386,300326615,590932579,1405279636,3267499572,3150704214,2428286686,3959192993,3461946742,1862657033,1266418056,963775037,2089974820,2263052895,1917689273,448879540,3550394620,3981727096,150775221,3627908307,1303187396,508620638,2975983352,2726630617,1817252668,1876281319,1457606340,908771278,3720792119,3617206836,2455994898,1729034894,1080033504],[976866871,3556439503,2881648439,1522871579,1555064734,1336096578,3548522304,2579274686,3574697629,3205460757,3593280638,3338716283,3079412587,564236357,2993598910,1781952180,1464380207,3163844217,3332601554,1699332808,1393555694,1183702653,3581086237,1288719814,691649499,2847557200,2895455976,3193889540,2717570544,1781354906,1676643554,2592534050,3230253752,1126444790,2770207658,2633158820,2210423226,2615765581,2414155088,3127139286,673620729,2805611233,1269405062,4015350505,3341807571,4149409754,1057255273,2012875353,2162469141,2276492801,2601117357,993977747,3918593370,2654263191,753973209,36408145,2530585658,25011837,3520020182,2088578344,530523599,2918365339,1524020338,1518925132,3760827505,3759777254,1202760957,3985898139,3906192525,674977740,4174734889,2031300136,2019492241,3983892565,4153806404,3822280332,352677332,2297720250,60907813,90501309,3286998549,1016092578,2535922412,2839152426,457141659,509813237,4120667899,652014361,1966332200,2975202805,55981186,2327461051,676427537,3255491064,2882294119,3433927263,1307055953,942726286,933058658,2468411793,3933900994,4215176142,1361170020,2001714738,2830558078,3274259782,1222529897,1679025792,2729314320,3714953764,1770335741,151462246,3013232138,1682292957,1483529935,471910574,1539241949,458788160,3436315007,1807016891,3718408830,978976581,1043663428,3165965781,1927990952,4200891579,2372276910,3208408903,3533431907,1412390302,2931980059,4132332400,1947078029,3881505623,4168226417,2941484381,1077988104,1320477388,886195818,18198404,3786409e3,2509781533,112762804,3463356488,1866414978,891333506,18488651,661792760,1628790961,3885187036,3141171499,876946877,2693282273,1372485963,791857591,2686433993,3759982718,3167212022,3472953795,2716379847,445679433,3561995674,3504004811,3574258232,54117162,3331405415,2381918588,3769707343,4154350007,1140177722,4074052095,668550556,3214352940,367459370,261225585,2610173221,4209349473,3468074219,3265815641,314222801,3066103646,3808782860,282218597,3406013506,3773591054,379116347,1285071038,846784868,2669647154,3771962079,3550491691,2305946142,453669953,1268987020,3317592352,3279303384,3744833421,2610507566,3859509063,266596637,3847019092,517658769,3462560207,3443424879,370717030,4247526661,2224018117,4143653529,4112773975,2788324899,2477274417,1456262402,2901442914,1517677493,1846949527,2295493580,3734397586,2176403920,1280348187,1908823572,3871786941,846861322,1172426758,3287448474,3383383037,1655181056,3139813346,901632758,1897031941,2986607138,3066810236,3447102507,1393639104,373351379,950779232,625454576,3124240540,4148612726,2007998917,544563296,2244738638,2330496472,2058025392,1291430526,424198748,50039436,29584100,3605783033,2429876329,2791104160,1057563949,3255363231,3075367218,3463963227,1469046755,985887462]];var c={pbox:[],sbox:[]};function l(y,w){let E=w>>24&255,x=w>>16&255,D=w>>8&255,R=w&255,F=y.sbox[0][E]+y.sbox[1][x];return F=F^y.sbox[2][D],F=F+y.sbox[3][R],F}function h(y,w,E){let x=w,D=E,R;for(let F=0;F<s;++F)x=x^y.pbox[F],D=l(y,x)^D,R=x,x=D,D=R;return R=x,x=D,D=R,D=D^y.pbox[s],x=x^y.pbox[s+1],{left:x,right:D}}function f(y,w,E){let x=w,D=E,R;for(let F=s+1;F>1;--F)x=x^y.pbox[F],D=l(y,x)^D,R=x,x=D,D=R;return R=x,x=D,D=R,D=D^y.pbox[1],x=x^y.pbox[0],{left:x,right:D}}function p(y,w,E){for(let k=0;k<4;k++){y.sbox[k]=[];for(let P=0;P<256;P++)y.sbox[k][P]=a[k][P]}let x=0;for(let k=0;k<s+2;k++)y.pbox[k]=o[k]^w[x],x++,x>=E&&(x=0);let D=0,R=0,F=0;for(let k=0;k<s+2;k+=2)F=h(y,D,R),D=F.left,R=F.right,y.pbox[k]=D,y.pbox[k+1]=R;for(let k=0;k<4;k++)for(let P=0;P<256;P+=2)F=h(y,D,R),D=F.left,R=F.right,y.sbox[k][P]=D,y.sbox[k][P+1]=R;return!0}var m=i.Blowfish=r.extend({_doReset:function(){if(this._keyPriorReset!==this._key){var y=this._keyPriorReset=this._key,w=y.words,E=y.sigBytes/4;p(c,w,E)}},encryptBlock:function(y,w){var E=h(c,y[w],y[w+1]);y[w]=E.left,y[w+1]=E.right},decryptBlock:function(y,w){var E=f(c,y[w],y[w+1]);y[w]=E.left,y[w+1]=E.right},blockSize:64/32,keySize:128/32,ivSize:64/32});e.Blowfish=r._createHelper(m)}(),n.Blowfish})});var lb=ge((yf,cb)=>{"use strict";(function(n,e,t){typeof yf=="object"?cb.exports=yf=e(ye(),Wu(),oA(),uA(),ci(),hA(),li(),Uy(),zd(),mA(),jy(),_A(),EA(),DA(),Qd(),bA(),dr(),ot(),RA(),PA(),NA(),OA(),VA(),UA(),zA(),qA(),GA(),KA(),XA(),ZA(),eb(),nb(),ib(),ob(),ub()):typeof define=="function"&&define.amd?define(["./core","./x64-core","./lib-typedarrays","./enc-utf16","./enc-base64","./enc-base64url","./md5","./sha1","./sha256","./sha224","./sha512","./sha384","./sha3","./ripemd160","./hmac","./pbkdf2","./evpkdf","./cipher-core","./mode-cfb","./mode-ctr","./mode-ctr-gladman","./mode-ofb","./mode-ecb","./pad-ansix923","./pad-iso10126","./pad-iso97971","./pad-zeropadding","./pad-nopadding","./format-hex","./aes","./tripledes","./rc4","./rabbit","./rabbit-legacy","./blowfish"],e):n.CryptoJS=e(n.CryptoJS)})(yf,function(n){return n})});var Ke=new ae("");var C_=null;function jt(){return C_}function r0(n){C_??=n}var ca=class{},la=(()=>{class n{historyGo(t){throw new Error("")}static \u0275fac=function(r){return new(r||n)};static \u0275prov=ne({token:n,factory:()=>Q(A_),providedIn:"platform"})}return n})(),i0=new ae(""),A_=(()=>{class n extends la{_location;_history;_doc=Q(Ke);constructor(){super(),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return jt().getBaseHref(this._doc)}onPopState(t){let r=jt().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){let r=jt().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(t){this._location.pathname=t}pushState(t,r,i){this._history.pushState(t,r,i)}replaceState(t,r,i){this._history.replaceState(t,r,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}static \u0275fac=function(r){return new(r||n)};static \u0275prov=ne({token:n,factory:()=>new n,providedIn:"platform"})}return n})();function Bc(n,e){return n?e?n.endsWith("/")?e.startsWith("/")?n+e.slice(1):n+e:e.startsWith("/")?n+e:`${n}/${e}`:n:e}function w_(n){let e=n.search(/#|\?|$/);return n[e-1]==="/"?n.slice(0,e-1)+n.slice(e):n}function an(n){return n&&n[0]!=="?"?`?${n}`:n}var un=(()=>{class n{historyGo(t){throw new Error("")}static \u0275fac=function(r){return new(r||n)};static \u0275prov=ne({token:n,factory:()=>Q(Lc),providedIn:"root"})}return n})(),Vc=new ae(""),Lc=(()=>{class n extends un{_platformLocation;_baseHref;_removeListenerFns=[];constructor(t,r){super(),this._platformLocation=t,this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??Q(Ke).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return Bc(this._baseHref,t)}path(t=!1){let r=this._platformLocation.pathname+an(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,s){let o=this.prepareExternalUrl(i+an(s));this._platformLocation.pushState(t,r,o)}replaceState(t,r,i,s){let o=this.prepareExternalUrl(i+an(s));this._platformLocation.replaceState(t,r,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static \u0275fac=function(r){return new(r||n)(re(la),re(Vc,8))};static \u0275prov=ne({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Sr=(()=>{class n{_subject=new Ot;_basePath;_locationStrategy;_urlChangeListeners=[];_urlChangeSubscription=null;constructor(t){this._locationStrategy=t;let r=this._locationStrategy.getBaseHref();this._basePath=Lb(w_(D_(r))),this._locationStrategy.onPopState(i=>{this._subject.next({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+an(r))}normalize(t){return n.stripTrailingSlash(Vb(this._basePath,D_(t)))}prepareExternalUrl(t){return t&&t[0]!=="/"&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._locationStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+an(r)),i)}replaceState(t,r="",i=null){this._locationStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+an(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription??=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}),()=>{let r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r??void 0,complete:i??void 0})}static normalizeQueryParams=an;static joinWithSlash=Bc;static stripTrailingSlash=w_;static \u0275fac=function(r){return new(r||n)(re(un))};static \u0275prov=ne({token:n,factory:()=>Bb(),providedIn:"root"})}return n})();function Bb(){return new Sr(re(un))}function Vb(n,e){if(!n||!e.startsWith(n))return e;let t=e.substring(n.length);return t===""||["/",";","?","#"].includes(t[0])?t:e}function D_(n){return n.replace(/\/index.html$/,"")}function Lb(n){if(new RegExp("^(https?:)?//").test(n)){let[,t]=n.split(/\/\/[^\/]+/);return t}return n}var u0=(()=>{class n extends un{_platformLocation;_baseHref="";_removeListenerFns=[];constructor(t,r){super(),this._platformLocation=t,r!=null&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash??"#";return r.length>0?r.substring(1):r}prepareExternalUrl(t){let r=Bc(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,i,s){let o=this.prepareExternalUrl(i+an(s))||this._platformLocation.pathname;this._platformLocation.pushState(t,r,o)}replaceState(t,r,i,s){let o=this.prepareExternalUrl(i+an(s))||this._platformLocation.pathname;this._platformLocation.replaceState(t,r,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static \u0275fac=function(r){return new(r||n)(re(la),re(Vc,8))};static \u0275prov=ne({token:n,factory:n.\u0275fac})}return n})();var _t=function(n){return n[n.Format=0]="Format",n[n.Standalone=1]="Standalone",n}(_t||{}),Te=function(n){return n[n.Narrow=0]="Narrow",n[n.Abbreviated=1]="Abbreviated",n[n.Wide=2]="Wide",n[n.Short=3]="Short",n}(Te||{}),Rt=function(n){return n[n.Short=0]="Short",n[n.Medium=1]="Medium",n[n.Long=2]="Long",n[n.Full=3]="Full",n}(Rt||{}),Yn={Decimal:0,Group:1,List:2,PercentSign:3,PlusSign:4,MinusSign:5,Exponential:6,SuperscriptingExponent:7,PerMille:8,Infinity:9,NaN:10,TimeSeparator:11,CurrencyDecimal:12,CurrencyGroup:13};function S_(n){return Zt(n)[We.LocaleId]}function R_(n,e,t){let r=Zt(n),i=[r[We.DayPeriodsFormat],r[We.DayPeriodsStandalone]],s=en(i,e);return en(s,t)}function F_(n,e,t){let r=Zt(n),i=[r[We.DaysFormat],r[We.DaysStandalone]],s=en(i,e);return en(s,t)}function P_(n,e,t){let r=Zt(n),i=[r[We.MonthsFormat],r[We.MonthsStandalone]],s=en(i,e);return en(s,t)}function k_(n,e){let r=Zt(n)[We.Eras];return en(r,e)}function ha(n,e){let t=Zt(n);return en(t[We.DateFormat],e)}function da(n,e){let t=Zt(n);return en(t[We.TimeFormat],e)}function fa(n,e){let r=Zt(n)[We.DateTimeFormat];return en(r,e)}function pa(n,e){let t=Zt(n),r=t[We.NumberSymbols][e];if(typeof r>"u"){if(e===Yn.CurrencyDecimal)return t[We.NumberSymbols][Yn.Decimal];if(e===Yn.CurrencyGroup)return t[We.NumberSymbols][Yn.Group]}return r}function N_(n){if(!n[We.ExtraData])throw new Error(`Missing extra locale data for the locale "${n[We.LocaleId]}". Use "registerLocaleData" to load new data. See the "I18n guide" on angular.io to know more.`)}function M_(n){let e=Zt(n);return N_(e),(e[We.ExtraData][2]||[]).map(r=>typeof r=="string"?s0(r):[s0(r[0]),s0(r[1])])}function O_(n,e,t){let r=Zt(n);N_(r);let i=[r[We.ExtraData][0],r[We.ExtraData][1]],s=en(i,e)||[];return en(s,t)||[]}function en(n,e){for(let t=e;t>-1;t--)if(typeof n[t]<"u")return n[t];throw new Error("Locale data API: locale data undefined")}function s0(n){let[e,t]=n.split(":");return{hours:+e,minutes:+t}}var Ub=/^(\d{4,})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,Uc={},jb=/((?:[^BEGHLMOSWYZabcdhmswyz']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|Y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|c{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/;function B_(n,e,t,r){let i=Xb(n);e=Xn(t,e)||e;let o=[],a;for(;e;)if(a=jb.exec(e),a){o=o.concat(a.slice(1));let h=o.pop();if(!h)break;e=h}else{o.push(e);break}let c=i.getTimezoneOffset();r&&(c=L_(r,c),i=Qb(i,r));let l="";return o.forEach(h=>{let f=Wb(h);l+=f?f(i,t,c):h==="''"?"'":h.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),l}function Hc(n,e,t){let r=new Date(0);return r.setFullYear(n,e,t),r.setHours(0,0,0),r}function Xn(n,e){let t=S_(n);if(Uc[t]??={},Uc[t][e])return Uc[t][e];let r="";switch(e){case"shortDate":r=ha(n,Rt.Short);break;case"mediumDate":r=ha(n,Rt.Medium);break;case"longDate":r=ha(n,Rt.Long);break;case"fullDate":r=ha(n,Rt.Full);break;case"shortTime":r=da(n,Rt.Short);break;case"mediumTime":r=da(n,Rt.Medium);break;case"longTime":r=da(n,Rt.Long);break;case"fullTime":r=da(n,Rt.Full);break;case"short":let i=Xn(n,"shortTime"),s=Xn(n,"shortDate");r=jc(fa(n,Rt.Short),[i,s]);break;case"medium":let o=Xn(n,"mediumTime"),a=Xn(n,"mediumDate");r=jc(fa(n,Rt.Medium),[o,a]);break;case"long":let c=Xn(n,"longTime"),l=Xn(n,"longDate");r=jc(fa(n,Rt.Long),[c,l]);break;case"full":let h=Xn(n,"fullTime"),f=Xn(n,"fullDate");r=jc(fa(n,Rt.Full),[h,f]);break}return r&&(Uc[t][e]=r),r}function jc(n,e){return e&&(n=n.replace(/\{([^}]+)}/g,function(t,r){return e!=null&&r in e?e[r]:t})),n}function cn(n,e,t="-",r,i){let s="";(n<0||i&&n<=0)&&(i?n=-n+1:(n=-n,s=t));let o=String(n);for(;o.length<e;)o="0"+o;return r&&(o=o.slice(o.length-e)),s+o}function zb(n,e){return cn(n,3).substring(0,e)}function Qe(n,e,t=0,r=!1,i=!1){return function(s,o){let a=$b(n,s);if((t>0||a>-t)&&(a+=t),n===3)a===0&&t===-12&&(a=12);else if(n===6)return zb(a,e);let c=pa(o,Yn.MinusSign);return cn(a,e,c,r,i)}}function $b(n,e){switch(n){case 0:return e.getFullYear();case 1:return e.getMonth();case 2:return e.getDate();case 3:return e.getHours();case 4:return e.getMinutes();case 5:return e.getSeconds();case 6:return e.getMilliseconds();case 7:return e.getDay();default:throw new Error(`Unknown DateType value "${n}".`)}}function Fe(n,e,t=_t.Format,r=!1){return function(i,s){return qb(i,s,n,e,t,r)}}function qb(n,e,t,r,i,s){switch(t){case 2:return P_(e,i,r)[n.getMonth()];case 1:return F_(e,i,r)[n.getDay()];case 0:let o=n.getHours(),a=n.getMinutes();if(s){let l=M_(e),h=O_(e,i,r),f=l.findIndex(p=>{if(Array.isArray(p)){let[m,y]=p,w=o>=m.hours&&a>=m.minutes,E=o<y.hours||o===y.hours&&a<y.minutes;if(m.hours<y.hours){if(w&&E)return!0}else if(w||E)return!0}else if(p.hours===o&&p.minutes===a)return!0;return!1});if(f!==-1)return h[f]}return R_(e,i,r)[o<12?0:1];case 3:return k_(e,r)[n.getFullYear()<=0?0:1];default:let c=t;throw new Error(`unexpected translation type ${c}`)}}function zc(n){return function(e,t,r){let i=-1*r,s=pa(t,Yn.MinusSign),o=i>0?Math.floor(i/60):Math.ceil(i/60);switch(n){case 0:return(i>=0?"+":"")+cn(o,2,s)+cn(Math.abs(i%60),2,s);case 1:return"GMT"+(i>=0?"+":"")+cn(o,1,s);case 2:return"GMT"+(i>=0?"+":"")+cn(o,2,s)+":"+cn(Math.abs(i%60),2,s);case 3:return r===0?"Z":(i>=0?"+":"")+cn(o,2,s)+":"+cn(Math.abs(i%60),2,s);default:throw new Error(`Unknown zone width "${n}"`)}}}var Hb=0,qc=4;function Gb(n){let e=Hc(n,Hb,1).getDay();return Hc(n,0,1+(e<=qc?qc:qc+7)-e)}function V_(n){let e=n.getDay(),t=e===0?-3:qc-e;return Hc(n.getFullYear(),n.getMonth(),n.getDate()+t)}function o0(n,e=!1){return function(t,r){let i;if(e){let s=new Date(t.getFullYear(),t.getMonth(),1).getDay()-1,o=t.getDate();i=1+Math.floor((o+s)/7)}else{let s=V_(t),o=Gb(s.getFullYear()),a=s.getTime()-o.getTime();i=1+Math.round(a/6048e5)}return cn(i,n,pa(r,Yn.MinusSign))}}function $c(n,e=!1){return function(t,r){let s=V_(t).getFullYear();return cn(s,n,pa(r,Yn.MinusSign),e)}}var a0={};function Wb(n){if(a0[n])return a0[n];let e;switch(n){case"G":case"GG":case"GGG":e=Fe(3,Te.Abbreviated);break;case"GGGG":e=Fe(3,Te.Wide);break;case"GGGGG":e=Fe(3,Te.Narrow);break;case"y":e=Qe(0,1,0,!1,!0);break;case"yy":e=Qe(0,2,0,!0,!0);break;case"yyy":e=Qe(0,3,0,!1,!0);break;case"yyyy":e=Qe(0,4,0,!1,!0);break;case"Y":e=$c(1);break;case"YY":e=$c(2,!0);break;case"YYY":e=$c(3);break;case"YYYY":e=$c(4);break;case"M":case"L":e=Qe(1,1,1);break;case"MM":case"LL":e=Qe(1,2,1);break;case"MMM":e=Fe(2,Te.Abbreviated);break;case"MMMM":e=Fe(2,Te.Wide);break;case"MMMMM":e=Fe(2,Te.Narrow);break;case"LLL":e=Fe(2,Te.Abbreviated,_t.Standalone);break;case"LLLL":e=Fe(2,Te.Wide,_t.Standalone);break;case"LLLLL":e=Fe(2,Te.Narrow,_t.Standalone);break;case"w":e=o0(1);break;case"ww":e=o0(2);break;case"W":e=o0(1,!0);break;case"d":e=Qe(2,1);break;case"dd":e=Qe(2,2);break;case"c":case"cc":e=Qe(7,1);break;case"ccc":e=Fe(1,Te.Abbreviated,_t.Standalone);break;case"cccc":e=Fe(1,Te.Wide,_t.Standalone);break;case"ccccc":e=Fe(1,Te.Narrow,_t.Standalone);break;case"cccccc":e=Fe(1,Te.Short,_t.Standalone);break;case"E":case"EE":case"EEE":e=Fe(1,Te.Abbreviated);break;case"EEEE":e=Fe(1,Te.Wide);break;case"EEEEE":e=Fe(1,Te.Narrow);break;case"EEEEEE":e=Fe(1,Te.Short);break;case"a":case"aa":case"aaa":e=Fe(0,Te.Abbreviated);break;case"aaaa":e=Fe(0,Te.Wide);break;case"aaaaa":e=Fe(0,Te.Narrow);break;case"b":case"bb":case"bbb":e=Fe(0,Te.Abbreviated,_t.Standalone,!0);break;case"bbbb":e=Fe(0,Te.Wide,_t.Standalone,!0);break;case"bbbbb":e=Fe(0,Te.Narrow,_t.Standalone,!0);break;case"B":case"BB":case"BBB":e=Fe(0,Te.Abbreviated,_t.Format,!0);break;case"BBBB":e=Fe(0,Te.Wide,_t.Format,!0);break;case"BBBBB":e=Fe(0,Te.Narrow,_t.Format,!0);break;case"h":e=Qe(3,1,-12);break;case"hh":e=Qe(3,2,-12);break;case"H":e=Qe(3,1);break;case"HH":e=Qe(3,2);break;case"m":e=Qe(4,1);break;case"mm":e=Qe(4,2);break;case"s":e=Qe(5,1);break;case"ss":e=Qe(5,2);break;case"S":e=Qe(6,1);break;case"SS":e=Qe(6,2);break;case"SSS":e=Qe(6,3);break;case"Z":case"ZZ":case"ZZZ":e=zc(0);break;case"ZZZZZ":e=zc(3);break;case"O":case"OO":case"OOO":case"z":case"zz":case"zzz":e=zc(1);break;case"OOOO":case"ZZZZ":case"zzzz":e=zc(2);break;default:return null}return a0[n]=e,e}function L_(n,e){n=n.replace(/:/g,"");let t=Date.parse("Jan 01, 1970 00:00:00 "+n)/6e4;return isNaN(t)?e:t}function Kb(n,e){return n=new Date(n.getTime()),n.setMinutes(n.getMinutes()+e),n}function Qb(n,e,t){let i=n.getTimezoneOffset(),s=L_(e,i);return Kb(n,-1*(s-i))}function Xb(n){if(b_(n))return n;if(typeof n=="number"&&!isNaN(n))return new Date(n);if(typeof n=="string"){if(n=n.trim(),/^(\d{4}(-\d{1,2}(-\d{1,2})?)?)$/.test(n)){let[i,s=1,o=1]=n.split("-").map(a=>+a);return Hc(i,s-1,o)}let t=parseFloat(n);if(!isNaN(n-t))return new Date(t);let r;if(r=n.match(Ub))return Yb(r)}let e=new Date(n);if(!b_(e))throw new Error(`Unable to convert "${n}" into a date`);return e}function Yb(n){let e=new Date(0),t=0,r=0,i=n[8]?e.setUTCFullYear:e.setFullYear,s=n[8]?e.setUTCHours:e.setHours;n[9]&&(t=Number(n[9]+n[10]),r=Number(n[9]+n[11])),i.call(e,Number(n[1]),Number(n[2])-1,Number(n[3]));let o=Number(n[4]||0)-t,a=Number(n[5]||0)-r,c=Number(n[6]||0),l=Math.floor(parseFloat("0."+(n[7]||0))*1e3);return s.call(e,o,a,c,l),e}function b_(n){return n instanceof Date&&!isNaN(n.valueOf())}var Gc=class{$implicit;ngForOf;index;count;constructor(e,t,r,i){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=i}get first(){return this.index===0}get last(){return this.index===this.count-1}get even(){return this.index%2===0}get odd(){return!this.even}},Kc=(()=>{class n{_viewContainer;_template;_differs;set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}_ngForOf=null;_ngForOfDirty=!0;_differ=null;_trackByFn;constructor(t,r,i){this._viewContainer=t,this._template=r,this._differs=i}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;let t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){let t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){let r=this._viewContainer;t.forEachOperation((i,s,o)=>{if(i.previousIndex==null)r.createEmbeddedView(this._template,new Gc(i.item,this._ngForOf,-1,-1),o===null?void 0:o);else if(o==null)r.remove(s===null?void 0:s);else if(s!==null){let a=r.get(s);r.move(a,o),T_(a,i)}});for(let i=0,s=r.length;i<s;i++){let a=r.get(i).context;a.index=i,a.count=s,a.ngForOf=this._ngForOf}t.forEachIdentityChange(i=>{let s=r.get(i.currentIndex);T_(s,i)})}static ngTemplateContextGuard(t,r){return!0}static \u0275fac=function(r){return new(r||n)(pe(sa),pe(Wf),pe(g_))};static \u0275dir=lt({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}})}return n})();function T_(n,e){n.context.$implicit=e.item}var Zb=(()=>{class n{_viewContainer;_context=new Wc;_thenTemplateRef=null;_elseTemplateRef=null;_thenViewRef=null;_elseViewRef=null;constructor(t,r){this._viewContainer=t,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){I_(t,!1),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){I_(t,!1),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngIfUseIfTypeGuard;static ngTemplateGuard_ngIf;static ngTemplateContextGuard(t,r){return!0}static \u0275fac=function(r){return new(r||n)(pe(sa),pe(Wf))};static \u0275dir=lt({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}})}return n})(),Wc=class{$implicit=null;ngIf=null};function I_(n,e){if(n&&!n.createEmbeddedView)throw new fe(2020,!1)}function Jb(n,e){return new fe(2100,!1)}var eT="mediumDate",U_=new ae(""),j_=new ae(""),tT=(()=>{class n{locale;defaultTimezone;defaultOptions;constructor(t,r,i){this.locale=t,this.defaultTimezone=r,this.defaultOptions=i}transform(t,r,i,s){if(t==null||t===""||t!==t)return null;try{let o=r??this.defaultOptions?.dateFormat??eT,a=i??this.defaultOptions?.timezone??this.defaultTimezone??void 0;return B_(t,o,s||this.locale,a)}catch(o){throw Jb(n,o.message)}}static \u0275fac=function(r){return new(r||n)(pe(f_,16),pe(U_,24),pe(j_,24))};static \u0275pipe=t_({name:"date",type:n,pure:!0})}return n})();var ga=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=Ut({type:n});static \u0275inj=Lt({})}return n})();function ma(n,e){e=encodeURIComponent(e);for(let t of n.split(";")){let r=t.indexOf("="),[i,s]=r==-1?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(s)}return null}var c0="browser",z_="server";function Qc(n){return n===z_}var Ti=class{};var $_=(()=>{class n{static \u0275prov=ne({token:n,providedIn:"root",factory:()=>new l0(Q(Ke),window)})}return n})(),l0=class{document;window;offset=()=>[0,0];constructor(e,t){this.document=e,this.window=t}setOffset(e){Array.isArray(e)?this.offset=()=>e:this.offset=e}getScrollPosition(){return[this.window.scrollX,this.window.scrollY]}scrollToPosition(e){this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){let t=nT(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){this.window.history.scrollRestoration=e}scrollToElement(e){let t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,i=t.top+this.window.pageYOffset,s=this.offset();this.window.scrollTo(r-s[0],i-s[1])}};function nT(n,e){let t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if(typeof n.createTreeWalker=="function"&&n.body&&typeof n.body.attachShadow=="function"){let r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT),i=r.currentNode;for(;i;){let s=i.shadowRoot;if(s){let o=s.getElementById(e)||s.querySelector(`[name="${e}"]`);if(o)return o}i=r.nextNode()}}return null}var Zc=new ae(""),p0=(()=>{class n{_zone;_plugins;_eventNameToPlugin=new Map;constructor(t,r){this._zone=r,t.forEach(i=>{i.manager=this}),this._plugins=t.slice().reverse()}addEventListener(t,r,i,s){return this._findPluginFor(r).addEventListener(t,r,i,s)}getZone(){return this._zone}_findPluginFor(t){let r=this._eventNameToPlugin.get(t);if(r)return r;if(r=this._plugins.find(s=>s.supports(t)),!r)throw new fe(5101,!1);return this._eventNameToPlugin.set(t,r),r}static \u0275fac=function(r){return new(r||n)(re(Zc),re(Ct))};static \u0275prov=ne({token:n,factory:n.\u0275fac})}return n})(),ya=class{_doc;constructor(e){this._doc=e}manager},Xc="ng-app-id";function H_(n){for(let e of n)e.remove()}function G_(n,e){let t=e.createElement("style");return t.textContent=n,t}function rT(n,e,t,r){let i=n.head?.querySelectorAll(`style[${Xc}="${e}"],link[${Xc}="${e}"]`);if(i)for(let s of i)s.removeAttribute(Xc),s instanceof HTMLLinkElement?r.set(s.href.slice(s.href.lastIndexOf("/")+1),{usage:0,elements:[s]}):s.textContent&&t.set(s.textContent,{usage:0,elements:[s]})}function d0(n,e){let t=e.createElement("link");return t.setAttribute("rel","stylesheet"),t.setAttribute("href",n),t}var g0=(()=>{class n{doc;appId;nonce;inline=new Map;external=new Map;hosts=new Set;isServer;constructor(t,r,i,s={}){this.doc=t,this.appId=r,this.nonce=i,this.isServer=Qc(s),rT(t,r,this.inline,this.external),this.hosts.add(t.head)}addStyles(t,r){for(let i of t)this.addUsage(i,this.inline,G_);r?.forEach(i=>this.addUsage(i,this.external,d0))}removeStyles(t,r){for(let i of t)this.removeUsage(i,this.inline);r?.forEach(i=>this.removeUsage(i,this.external))}addUsage(t,r,i){let s=r.get(t);s?s.usage++:r.set(t,{usage:1,elements:[...this.hosts].map(o=>this.addElement(o,i(t,this.doc)))})}removeUsage(t,r){let i=r.get(t);i&&(i.usage--,i.usage<=0&&(H_(i.elements),r.delete(t)))}ngOnDestroy(){for(let[,{elements:t}]of[...this.inline,...this.external])H_(t);this.hosts.clear()}addHost(t){this.hosts.add(t);for(let[r,{elements:i}]of this.inline)i.push(this.addElement(t,G_(r,this.doc)));for(let[r,{elements:i}]of this.external)i.push(this.addElement(t,d0(r,this.doc)))}removeHost(t){this.hosts.delete(t)}addElement(t,r){return this.nonce&&r.setAttribute("nonce",this.nonce),this.isServer&&r.setAttribute(Xc,this.appId),t.appendChild(r)}static \u0275fac=function(r){return new(r||n)(re(Ke),re(qf),re(Hf,8),re(Tr))};static \u0275prov=ne({token:n,factory:n.\u0275fac})}return n})(),h0={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},m0=/%COMP%/g;var K_="%COMP%",iT=`_nghost-${K_}`,sT=`_ngcontent-${K_}`,oT=!0,aT=new ae("",{providedIn:"root",factory:()=>oT});function uT(n){return sT.replace(m0,n)}function cT(n){return iT.replace(m0,n)}function Q_(n,e){return e.map(t=>t.replace(m0,n))}var y0=(()=>{class n{eventManager;sharedStylesHost;appId;removeStylesOnCompDestroy;doc;platformId;ngZone;nonce;tracingService;rendererByCompId=new Map;defaultRenderer;platformIsServer;constructor(t,r,i,s,o,a,c,l=null,h=null){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=s,this.doc=o,this.platformId=a,this.ngZone=c,this.nonce=l,this.tracingService=h,this.platformIsServer=Qc(a),this.defaultRenderer=new va(t,o,c,this.platformIsServer,this.tracingService)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;this.platformIsServer&&r.encapsulation===ia.ShadowDom&&(r=Re(X({},r),{encapsulation:ia.Emulated}));let i=this.getOrCreateRenderer(t,r);return i instanceof Yc?i.applyToHost(t):i instanceof _a&&i.applyStyles(),i}getOrCreateRenderer(t,r){let i=this.rendererByCompId,s=i.get(r.id);if(!s){let o=this.doc,a=this.ngZone,c=this.eventManager,l=this.sharedStylesHost,h=this.removeStylesOnCompDestroy,f=this.platformIsServer,p=this.tracingService;switch(r.encapsulation){case ia.Emulated:s=new Yc(c,l,r,this.appId,h,o,a,f,p);break;case ia.ShadowDom:return new f0(c,l,t,r,o,a,this.nonce,f,p);default:s=new _a(c,l,r,h,o,a,f,p);break}i.set(r.id,s)}return s}ngOnDestroy(){this.rendererByCompId.clear()}componentReplaced(t){this.rendererByCompId.delete(t)}static \u0275fac=function(r){return new(r||n)(re(p0),re(g0),re(qf),re(aT),re(Ke),re(Tr),re(Ct),re(Hf),re(Kv,8))};static \u0275prov=ne({token:n,factory:n.\u0275fac})}return n})(),va=class{eventManager;doc;ngZone;platformIsServer;tracingService;data=Object.create(null);throwOnSyntheticProps=!0;constructor(e,t,r,i,s){this.eventManager=e,this.doc=t,this.ngZone=r,this.platformIsServer=i,this.tracingService=s}destroy(){}destroyNode=null;createElement(e,t){return t?this.doc.createElementNS(h0[t]||t,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,t){(W_(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(W_(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){t.remove()}selectRootElement(e,t){let r=typeof e=="string"?this.doc.querySelector(e):e;if(!r)throw new fe(-5104,!1);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;let s=h0[i];s?e.setAttributeNS(s,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){let i=h0[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(ps.DashCase|ps.Important)?e.style.setProperty(t,r,i&ps.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&ps.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e!=null&&(e[t]=r)}setValue(e,t){e.nodeValue=t}listen(e,t,r,i){if(typeof e=="string"&&(e=jt().getGlobalEventTarget(this.doc,e),!e))throw new fe(5102,!1);let s=this.decoratePreventDefault(r);return this.tracingService?.wrapEventListener&&(s=this.tracingService.wrapEventListener(e,t,s)),this.eventManager.addEventListener(e,t,s,i)}decoratePreventDefault(e){return t=>{if(t==="__ngUnwrap__")return e;(this.platformIsServer?this.ngZone.runGuarded(()=>e(t)):e(t))===!1&&t.preventDefault()}}};function W_(n){return n.tagName==="TEMPLATE"&&n.content!==void 0}var f0=class extends va{sharedStylesHost;hostEl;shadowRoot;constructor(e,t,r,i,s,o,a,c,l){super(e,s,o,c,l),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let h=i.styles;h=Q_(i.id,h);for(let p of h){let m=document.createElement("style");a&&m.setAttribute("nonce",a),m.textContent=p,this.shadowRoot.appendChild(m)}let f=i.getExternalStyles?.();if(f)for(let p of f){let m=d0(p,s);a&&m.setAttribute("nonce",a),this.shadowRoot.appendChild(m)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(null,t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},_a=class extends va{sharedStylesHost;removeStylesOnCompDestroy;styles;styleUrls;constructor(e,t,r,i,s,o,a,c,l){super(e,s,o,a,c),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=i;let h=r.styles;this.styles=l?Q_(l,h):h,this.styleUrls=r.getExternalStyles?.(l)}applyStyles(){this.sharedStylesHost.addStyles(this.styles,this.styleUrls)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles,this.styleUrls)}},Yc=class extends _a{contentAttr;hostAttr;constructor(e,t,r,i,s,o,a,c,l){let h=i+"-"+r.id;super(e,t,r,s,o,a,c,l,h),this.contentAttr=uT(h),this.hostAttr=cT(h)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){let r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}};var Jc=class n extends ca{supportsDOMEvents=!0;static makeCurrent(){r0(new n)}onAndCancel(e,t,r,i){return e.addEventListener(t,r,i),()=>{e.removeEventListener(t,r,i)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.remove()}createElement(e,t){return t=t||this.getDefaultDocument(),t.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return t==="window"?window:t==="document"?e:t==="body"?e.body:null}getBaseHref(e){let t=lT();return t==null?null:hT(t)}resetBaseElement(){xa=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return ma(document.cookie,e)}},xa=null;function lT(){return xa=xa||document.querySelector("base"),xa?xa.getAttribute("href"):null}function hT(n){return new URL(n,document.baseURI).pathname}var el=class{addToWindow(e){Cr.getAngularTestability=(r,i=!0)=>{let s=e.findTestabilityInTree(r,i);if(s==null)throw new fe(5103,!1);return s},Cr.getAllAngularTestabilities=()=>e.getAllTestabilities(),Cr.getAllAngularRootElements=()=>e.getAllRootElements();let t=r=>{let i=Cr.getAllAngularTestabilities(),s=i.length,o=function(){s--,s==0&&r()};i.forEach(a=>{a.whenStable(o)})};Cr.frameworkStabilizers||(Cr.frameworkStabilizers=[]),Cr.frameworkStabilizers.push(t)}findTestabilityInTree(e,t,r){if(t==null)return null;let i=e.getTestability(t);return i??(r?jt().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null)}},dT=(()=>{class n{build(){return new XMLHttpRequest}static \u0275fac=function(r){return new(r||n)};static \u0275prov=ne({token:n,factory:n.\u0275fac})}return n})(),Y_=(()=>{class n extends ya{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i,s){return t.addEventListener(r,i,s),()=>this.removeEventListener(t,r,i,s)}removeEventListener(t,r,i,s){return t.removeEventListener(r,i,s)}static \u0275fac=function(r){return new(r||n)(re(Ke))};static \u0275prov=ne({token:n,factory:n.\u0275fac})}return n})(),X_=["alt","control","meta","shift"],fT={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},pT={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey},Z_=(()=>{class n extends ya{constructor(t){super(t)}supports(t){return n.parseEventName(t)!=null}addEventListener(t,r,i,s){let o=n.parseEventName(r),a=n.eventCallback(o.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>jt().onAndCancel(t,o.domEventName,a,s))}static parseEventName(t){let r=t.toLowerCase().split("."),i=r.shift();if(r.length===0||!(i==="keydown"||i==="keyup"))return null;let s=n._normalizeKey(r.pop()),o="",a=r.indexOf("code");if(a>-1&&(r.splice(a,1),o="code."),X_.forEach(l=>{let h=r.indexOf(l);h>-1&&(r.splice(h,1),o+=l+".")}),o+=s,r.length!=0||s.length===0)return null;let c={};return c.domEventName=i,c.fullKey=o,c}static matchEventFullKeyCode(t,r){let i=fT[t.key]||t.key,s="";return r.indexOf("code.")>-1&&(i=t.code,s="code."),i==null||!i?!1:(i=i.toLowerCase(),i===" "?i="space":i==="."&&(i="dot"),X_.forEach(o=>{if(o!==i){let a=pT[o];a(t)&&(s+=o+".")}}),s+=i,s===r)}static eventCallback(t,r,i){return s=>{n.matchEventFullKeyCode(s,t)&&i.runGuarded(()=>r(s))}}static _normalizeKey(t){return t==="esc"?"escape":t}static \u0275fac=function(r){return new(r||n)(re(Ke))};static \u0275prov=ne({token:n,factory:n.\u0275fac})}return n})();function gT(){Jc.makeCurrent()}function mT(){return new $f}function yT(){return Gv(document),document}var vT=[{provide:Tr,useValue:c0},{provide:Wv,useValue:gT,multi:!0},{provide:Ke,useFactory:yT}],_T=p_(m_,"browser",vT);var xT=[{provide:Dc,useClass:el},{provide:i_,useClass:Cc,deps:[Ct,Kf,Dc]},{provide:Cc,useClass:Cc,deps:[Ct,Kf,Dc]}],ET=[{provide:jv,useValue:"root"},{provide:$f,useFactory:mT},{provide:Zc,useClass:Y_,multi:!0,deps:[Ke]},{provide:Zc,useClass:Z_,multi:!0,deps:[Ke]},y0,g0,p0,{provide:Zv,useExisting:y0},{provide:Ti,useClass:dT},[]],wT=(()=>{class n{constructor(){}static \u0275fac=function(r){return new(r||n)};static \u0275mod=Ut({type:n});static \u0275inj=Lt({providers:[...ET,...xT],imports:[ga,y_]})}return n})();var _s=class{},Ea=class{},Dn=class n{headers;normalizedNames=new Map;lazyInit;lazyUpdate=null;constructor(e){e?typeof e=="string"?this.lazyInit=()=>{this.headers=new Map,e.split(`
`).forEach(t=>{let r=t.indexOf(":");if(r>0){let i=t.slice(0,r),s=t.slice(r+1).trim();this.addHeaderEntry(i,s)}})}:typeof Headers<"u"&&e instanceof Headers?(this.headers=new Map,e.forEach((t,r)=>{this.addHeaderEntry(r,t)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(e).forEach(([t,r])=>{this.setHeaderEntries(t,r)})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();let t=this.headers.get(e.toLowerCase());return t&&t.length>0?t[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,t){return this.clone({name:e,value:t,op:"a"})}set(e,t){return this.clone({name:e,value:t,op:"s"})}delete(e,t){return this.clone({name:e,value:t,op:"d"})}maybeSetNormalizedName(e,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,e)}init(){this.lazyInit&&(this.lazyInit instanceof n?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(t=>{this.headers.set(t,e.headers.get(t)),this.normalizedNames.set(t,e.normalizedNames.get(t))})}clone(e){let t=new n;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof n?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([e]),t}applyUpdate(e){let t=e.name.toLowerCase();switch(e.op){case"a":case"s":let r=e.value;if(typeof r=="string"&&(r=[r]),r.length===0)return;this.maybeSetNormalizedName(e.name,t);let i=(e.op==="a"?this.headers.get(t):void 0)||[];i.push(...r),this.headers.set(t,i);break;case"d":let s=e.value;if(!s)this.headers.delete(t),this.normalizedNames.delete(t);else{let o=this.headers.get(t);if(!o)return;o=o.filter(a=>s.indexOf(a)===-1),o.length===0?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,o)}break}}addHeaderEntry(e,t){let r=e.toLowerCase();this.maybeSetNormalizedName(e,r),this.headers.has(r)?this.headers.get(r).push(t):this.headers.set(r,[t])}setHeaderEntries(e,t){let r=(Array.isArray(t)?t:[t]).map(s=>s.toString()),i=e.toLowerCase();this.headers.set(i,r),this.maybeSetNormalizedName(e,i)}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(t=>e(this.normalizedNames.get(t),this.headers.get(t)))}};var nl=class{encodeKey(e){return J_(e)}encodeValue(e){return J_(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}};function DT(n,e){let t=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(i=>{let s=i.indexOf("="),[o,a]=s==-1?[e.decodeKey(i),""]:[e.decodeKey(i.slice(0,s)),e.decodeValue(i.slice(s+1))],c=t.get(o)||[];c.push(a),t.set(o,c)}),t}var CT=/%(\d[a-f0-9])/gi,AT={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function J_(n){return encodeURIComponent(n).replace(CT,(e,t)=>AT[t]??e)}function tl(n){return`${n}`}var Zn=class n{map;encoder;updates=null;cloneFrom=null;constructor(e={}){if(this.encoder=e.encoder||new nl,e.fromString){if(e.fromObject)throw new fe(2805,!1);this.map=DT(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(t=>{let r=e.fromObject[t],i=Array.isArray(r)?r.map(tl):[tl(r)];this.map.set(t,i)})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();let t=this.map.get(e);return t?t[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,t){return this.clone({param:e,value:t,op:"a"})}appendAll(e){let t=[];return Object.keys(e).forEach(r=>{let i=e[r];Array.isArray(i)?i.forEach(s=>{t.push({param:r,value:s,op:"a"})}):t.push({param:r,value:i,op:"a"})}),this.clone(t)}set(e,t){return this.clone({param:e,value:t,op:"s"})}delete(e,t){return this.clone({param:e,value:t,op:"d"})}toString(){return this.init(),this.keys().map(e=>{let t=this.encoder.encodeKey(e);return this.map.get(e).map(r=>t+"="+this.encoder.encodeValue(r)).join("&")}).filter(e=>e!=="").join("&")}clone(e){let t=new n({encoder:this.encoder});return t.cloneFrom=this.cloneFrom||this,t.updates=(this.updates||[]).concat(e),t}init(){this.map===null&&(this.map=new Map),this.cloneFrom!==null&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":let t=(e.op==="a"?this.map.get(e.param):void 0)||[];t.push(tl(e.value)),this.map.set(e.param,t);break;case"d":if(e.value!==void 0){let r=this.map.get(e.param)||[],i=r.indexOf(tl(e.value));i!==-1&&r.splice(i,1),r.length>0?this.map.set(e.param,r):this.map.delete(e.param)}else{this.map.delete(e.param);break}}}),this.cloneFrom=this.updates=null)}};var rl=class{map=new Map;set(e,t){return this.map.set(e,t),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}};function bT(n){switch(n){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}function ex(n){return typeof ArrayBuffer<"u"&&n instanceof ArrayBuffer}function tx(n){return typeof Blob<"u"&&n instanceof Blob}function nx(n){return typeof FormData<"u"&&n instanceof FormData}function TT(n){return typeof URLSearchParams<"u"&&n instanceof URLSearchParams}var rx="Content-Type",ix="Accept",ox="X-Request-URL",ax="text/plain",ux="application/json",IT=`${ux}, ${ax}, */*`,vs=class n{url;body=null;headers;context;reportProgress=!1;withCredentials=!1;responseType="json";method;params;urlWithParams;transferCache;constructor(e,t,r,i){this.url=t,this.method=e.toUpperCase();let s;if(bT(this.method)||i?(this.body=r!==void 0?r:null,s=i):s=r,s&&(this.reportProgress=!!s.reportProgress,this.withCredentials=!!s.withCredentials,s.responseType&&(this.responseType=s.responseType),s.headers&&(this.headers=s.headers),s.context&&(this.context=s.context),s.params&&(this.params=s.params),this.transferCache=s.transferCache),this.headers??=new Dn,this.context??=new rl,!this.params)this.params=new Zn,this.urlWithParams=t;else{let o=this.params.toString();if(o.length===0)this.urlWithParams=t;else{let a=t.indexOf("?"),c=a===-1?"?":a<t.length-1?"&":"";this.urlWithParams=t+c+o}}}serializeBody(){return this.body===null?null:typeof this.body=="string"||ex(this.body)||tx(this.body)||nx(this.body)||TT(this.body)?this.body:this.body instanceof Zn?this.body.toString():typeof this.body=="object"||typeof this.body=="boolean"||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return this.body===null||nx(this.body)?null:tx(this.body)?this.body.type||null:ex(this.body)?null:typeof this.body=="string"?ax:this.body instanceof Zn?"application/x-www-form-urlencoded;charset=UTF-8":typeof this.body=="object"||typeof this.body=="number"||typeof this.body=="boolean"?ux:null}clone(e={}){let t=e.method||this.method,r=e.url||this.url,i=e.responseType||this.responseType,s=e.transferCache??this.transferCache,o=e.body!==void 0?e.body:this.body,a=e.withCredentials??this.withCredentials,c=e.reportProgress??this.reportProgress,l=e.headers||this.headers,h=e.params||this.params,f=e.context??this.context;return e.setHeaders!==void 0&&(l=Object.keys(e.setHeaders).reduce((p,m)=>p.set(m,e.setHeaders[m]),l)),e.setParams&&(h=Object.keys(e.setParams).reduce((p,m)=>p.set(m,e.setParams[m]),h)),new n(t,r,o,{params:h,headers:l,context:f,reportProgress:c,responseType:i,withCredentials:a,transferCache:s})}},Ii=function(n){return n[n.Sent=0]="Sent",n[n.UploadProgress=1]="UploadProgress",n[n.ResponseHeader=2]="ResponseHeader",n[n.DownloadProgress=3]="DownloadProgress",n[n.Response=4]="Response",n[n.User=5]="User",n}(Ii||{}),xs=class{headers;status;statusText;url;ok;type;constructor(e,t=200,r="OK"){this.headers=e.headers||new Dn,this.status=e.status!==void 0?e.status:t,this.statusText=e.statusText||r,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}},il=class n extends xs{constructor(e={}){super(e)}type=Ii.ResponseHeader;clone(e={}){return new n({headers:e.headers||this.headers,status:e.status!==void 0?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}},wa=class n extends xs{body;constructor(e={}){super(e),this.body=e.body!==void 0?e.body:null}type=Ii.Response;clone(e={}){return new n({body:e.body!==void 0?e.body:this.body,headers:e.headers||this.headers,status:e.status!==void 0?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}},Da=class extends xs{name="HttpErrorResponse";message;error;ok=!1;constructor(e){super(e,0,"Unknown Error"),this.status>=200&&this.status<300?this.message=`Http failure during parsing for ${e.url||"(unknown url)"}`:this.message=`Http failure response for ${e.url||"(unknown url)"}: ${e.status} ${e.statusText}`,this.error=e.error||null}},ST=200,RT=204;function v0(n,e){return{body:e,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials,transferCache:n.transferCache}}var Es=(()=>{class n{handler;constructor(t){this.handler=t}request(t,r,i={}){let s;if(t instanceof vs)s=t;else{let c;i.headers instanceof Dn?c=i.headers:c=new Dn(i.headers);let l;i.params&&(i.params instanceof Zn?l=i.params:l=new Zn({fromObject:i.params})),s=new vs(t,r,i.body!==void 0?i.body:null,{headers:c,context:i.context,params:l,reportProgress:i.reportProgress,responseType:i.responseType||"json",withCredentials:i.withCredentials,transferCache:i.transferCache})}let o=ie(s).pipe(Gn(c=>this.handler.handle(c)));if(t instanceof vs||i.observe==="events")return o;let a=o.pipe(_n(c=>c instanceof wa));switch(i.observe||"body"){case"body":switch(s.responseType){case"arraybuffer":return a.pipe(xe(c=>{if(c.body!==null&&!(c.body instanceof ArrayBuffer))throw new fe(2806,!1);return c.body}));case"blob":return a.pipe(xe(c=>{if(c.body!==null&&!(c.body instanceof Blob))throw new fe(2807,!1);return c.body}));case"text":return a.pipe(xe(c=>{if(c.body!==null&&typeof c.body!="string")throw new fe(2808,!1);return c.body}));case"json":default:return a.pipe(xe(c=>c.body))}case"response":return a;default:throw new fe(2809,!1)}}delete(t,r={}){return this.request("DELETE",t,r)}get(t,r={}){return this.request("GET",t,r)}head(t,r={}){return this.request("HEAD",t,r)}jsonp(t,r){return this.request("JSONP",t,{params:new Zn().append(r,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(t,r={}){return this.request("OPTIONS",t,r)}patch(t,r,i={}){return this.request("PATCH",t,v0(i,r))}post(t,r,i={}){return this.request("POST",t,v0(i,r))}put(t,r,i={}){return this.request("PUT",t,v0(i,r))}static \u0275fac=function(r){return new(r||n)(re(_s))};static \u0275prov=ne({token:n,factory:n.\u0275fac})}return n})();var FT=new ae("");function cx(n,e){return e(n)}function PT(n,e){return(t,r)=>e.intercept(t,{handle:i=>n(i,r)})}function kT(n,e,t){return(r,i)=>vt(t,()=>e(r,s=>n(s,i)))}var lx=new ae(""),x0=new ae(""),hx=new ae(""),E0=new ae("",{providedIn:"root",factory:()=>!0});function NT(){let n=null;return(e,t)=>{n===null&&(n=(Q(lx,{optional:!0})??[]).reduceRight(PT,cx));let r=Q(ra);if(Q(E0)){let s=r.add();return n(e,t).pipe(Ei(()=>r.remove(s)))}else return n(e,t)}}var sl=(()=>{class n extends _s{backend;injector;chain=null;pendingTasks=Q(ra);contributeToStability=Q(E0);constructor(t,r){super(),this.backend=t,this.injector=r}handle(t){if(this.chain===null){let r=Array.from(new Set([...this.injector.get(x0),...this.injector.get(hx,[])]));this.chain=r.reduceRight((i,s)=>kT(i,s,this.injector),cx)}if(this.contributeToStability){let r=this.pendingTasks.add();return this.chain(t,i=>this.backend.handle(i)).pipe(Ei(()=>this.pendingTasks.remove(r)))}else return this.chain(t,r=>this.backend.handle(r))}static \u0275fac=function(r){return new(r||n)(re(Ea),re(xn))};static \u0275prov=ne({token:n,factory:n.\u0275fac})}return n})();var MT=/^\)\]\}',?\n/,OT=RegExp(`^${ox}:`,"m");function BT(n){return"responseURL"in n&&n.responseURL?n.responseURL:OT.test(n.getAllResponseHeaders())?n.getResponseHeader(ox):null}var _0=(()=>{class n{xhrFactory;constructor(t){this.xhrFactory=t}handle(t){if(t.method==="JSONP")throw new fe(-2800,!1);let r=this.xhrFactory;return(r.\u0275loadImpl?tt(r.\u0275loadImpl()):ie(null)).pipe(Vt(()=>new _i(s=>{let o=r.build();if(o.open(t.method,t.urlWithParams),t.withCredentials&&(o.withCredentials=!0),t.headers.forEach((w,E)=>o.setRequestHeader(w,E.join(","))),t.headers.has(ix)||o.setRequestHeader(ix,IT),!t.headers.has(rx)){let w=t.detectContentTypeHeader();w!==null&&o.setRequestHeader(rx,w)}if(t.responseType){let w=t.responseType.toLowerCase();o.responseType=w!=="json"?w:"text"}let a=t.serializeBody(),c=null,l=()=>{if(c!==null)return c;let w=o.statusText||"OK",E=new Dn(o.getAllResponseHeaders()),x=BT(o)||t.url;return c=new il({headers:E,status:o.status,statusText:w,url:x}),c},h=()=>{let{headers:w,status:E,statusText:x,url:D}=l(),R=null;E!==RT&&(R=typeof o.response>"u"?o.responseText:o.response),E===0&&(E=R?ST:0);let F=E>=200&&E<300;if(t.responseType==="json"&&typeof R=="string"){let k=R;R=R.replace(MT,"");try{R=R!==""?JSON.parse(R):null}catch(P){R=k,F&&(F=!1,R={error:P,text:R})}}F?(s.next(new wa({body:R,headers:w,status:E,statusText:x,url:D||void 0})),s.complete()):s.error(new Da({error:R,headers:w,status:E,statusText:x,url:D||void 0}))},f=w=>{let{url:E}=l(),x=new Da({error:w,status:o.status||0,statusText:o.statusText||"Unknown Error",url:E||void 0});s.error(x)},p=!1,m=w=>{p||(s.next(l()),p=!0);let E={type:Ii.DownloadProgress,loaded:w.loaded};w.lengthComputable&&(E.total=w.total),t.responseType==="text"&&o.responseText&&(E.partialText=o.responseText),s.next(E)},y=w=>{let E={type:Ii.UploadProgress,loaded:w.loaded};w.lengthComputable&&(E.total=w.total),s.next(E)};return o.addEventListener("load",h),o.addEventListener("error",f),o.addEventListener("timeout",f),o.addEventListener("abort",f),t.reportProgress&&(o.addEventListener("progress",m),a!==null&&o.upload&&o.upload.addEventListener("progress",y)),o.send(a),s.next({type:Ii.Sent}),()=>{o.removeEventListener("error",f),o.removeEventListener("abort",f),o.removeEventListener("load",h),o.removeEventListener("timeout",f),t.reportProgress&&(o.removeEventListener("progress",m),a!==null&&o.upload&&o.upload.removeEventListener("progress",y)),o.readyState!==o.DONE&&o.abort()}})))}static \u0275fac=function(r){return new(r||n)(re(Ti))};static \u0275prov=ne({token:n,factory:n.\u0275fac})}return n})(),dx=new ae(""),VT="XSRF-TOKEN",LT=new ae("",{providedIn:"root",factory:()=>VT}),UT="X-XSRF-TOKEN",jT=new ae("",{providedIn:"root",factory:()=>UT}),Ca=class{},zT=(()=>{class n{doc;platform;cookieName;lastCookieString="";lastToken=null;parseCount=0;constructor(t,r,i){this.doc=t,this.platform=r,this.cookieName=i}getToken(){if(this.platform==="server")return null;let t=this.doc.cookie||"";return t!==this.lastCookieString&&(this.parseCount++,this.lastToken=ma(t,this.cookieName),this.lastCookieString=t),this.lastToken}static \u0275fac=function(r){return new(r||n)(re(Ke),re(Tr),re(LT))};static \u0275prov=ne({token:n,factory:n.\u0275fac})}return n})();function $T(n,e){let t=n.url.toLowerCase();if(!Q(dx)||n.method==="GET"||n.method==="HEAD"||t.startsWith("http://")||t.startsWith("https://"))return e(n);let r=Q(Ca).getToken(),i=Q(jT);return r!=null&&!n.headers.has(i)&&(n=n.clone({headers:n.headers.set(i,r)})),e(n)}var w0=function(n){return n[n.Interceptors=0]="Interceptors",n[n.LegacyInterceptors=1]="LegacyInterceptors",n[n.CustomXsrfConfiguration=2]="CustomXsrfConfiguration",n[n.NoXsrfProtection=3]="NoXsrfProtection",n[n.JsonpSupport=4]="JsonpSupport",n[n.RequestsMadeViaParent=5]="RequestsMadeViaParent",n[n.Fetch=6]="Fetch",n}(w0||{});function qT(n,e){return{\u0275kind:n,\u0275providers:e}}function HT(...n){let e=[Es,_0,sl,{provide:_s,useExisting:sl},{provide:Ea,useFactory:()=>Q(FT,{optional:!0})??Q(_0)},{provide:x0,useValue:$T,multi:!0},{provide:dx,useValue:!0},{provide:Ca,useClass:zT}];for(let t of n)e.push(...t.\u0275providers);return Uf(e)}var sx=new ae("");function GT(){return qT(w0.LegacyInterceptors,[{provide:sx,useFactory:NT},{provide:x0,useExisting:sx,multi:!0}])}var px=(()=>{class n{_doc;constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}static \u0275fac=function(r){return new(r||n)(re(Ke))};static \u0275prov=ne({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var Cx=(()=>{class n{_renderer;_elementRef;onChange=t=>{};onTouched=()=>{};constructor(t,r){this._renderer=t,this._elementRef=r}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}static \u0275fac=function(r){return new(r||n)(pe(Ir),pe(br))};static \u0275dir=lt({type:n})}return n})(),KT=(()=>{class n extends Cx{static \u0275fac=(()=>{let t;return function(i){return(t||(t=na(n)))(i||n)}})();static \u0275dir=lt({type:n,features:[wi]})}return n})(),Ax=new ae("");var QT={provide:Ax,useExisting:yc(()=>bx),multi:!0};function XT(){let n=jt()?jt().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}var YT=new ae(""),bx=(()=>{class n extends Cx{_compositionMode;_composing=!1;constructor(t,r,i){super(t,r),this._compositionMode=i,this._compositionMode==null&&(this._compositionMode=!XT())}writeValue(t){let r=t??"";this.setProperty("value",r)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}static \u0275fac=function(r){return new(r||n)(pe(Ir),pe(br),pe(YT,8))};static \u0275dir=lt({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(r,i){r&1&&Qn("input",function(o){return i._handleInput(o.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(o){return i._compositionEnd(o.target.value)})},standalone:!1,features:[Ac([QT]),wi]})}return n})();function I0(n){return n==null||S0(n)===0}function S0(n){return n==null?null:Array.isArray(n)||typeof n=="string"?n.length:n instanceof Set?n.size:null}var Tx=new ae(""),Ix=new ae(""),ZT=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,gx=class{static min(e){return JT(e)}static max(e){return eI(e)}static required(e){return tI(e)}static requiredTrue(e){return nI(e)}static email(e){return rI(e)}static minLength(e){return iI(e)}static maxLength(e){return sI(e)}static pattern(e){return oI(e)}static nullValidator(e){return Sx()}static compose(e){return Mx(e)}static composeAsync(e){return Bx(e)}};function JT(n){return e=>{if(e.value==null||n==null)return null;let t=parseFloat(e.value);return!isNaN(t)&&t<n?{min:{min:n,actual:e.value}}:null}}function eI(n){return e=>{if(e.value==null||n==null)return null;let t=parseFloat(e.value);return!isNaN(t)&&t>n?{max:{max:n,actual:e.value}}:null}}function tI(n){return I0(n.value)?{required:!0}:null}function nI(n){return n.value===!0?null:{required:!0}}function rI(n){return I0(n.value)||ZT.test(n.value)?null:{email:!0}}function iI(n){return e=>{let t=e.value?.length??S0(e.value);return t===null||t===0?null:t<n?{minlength:{requiredLength:n,actualLength:t}}:null}}function sI(n){return e=>{let t=e.value?.length??S0(e.value);return t!==null&&t>n?{maxlength:{requiredLength:n,actualLength:t}}:null}}function oI(n){if(!n)return Sx;let e,t;return typeof n=="string"?(t="",n.charAt(0)!=="^"&&(t+="^"),t+=n,n.charAt(n.length-1)!=="$"&&(t+="$"),e=new RegExp(t)):(t=n.toString(),e=n),r=>{if(I0(r.value))return null;let i=r.value;return e.test(i)?null:{pattern:{requiredPattern:t,actualValue:i}}}}function Sx(n){return null}function Rx(n){return n!=null}function Fx(n){return oa(n)?tt(n):n}function Px(n){let e={};return n.forEach(t=>{e=t!=null?X(X({},e),t):e}),Object.keys(e).length===0?null:e}function kx(n,e){return e.map(t=>t(n))}function aI(n){return!n.validate}function Nx(n){return n.map(e=>aI(e)?e:t=>e.validate(t))}function Mx(n){if(!n)return null;let e=n.filter(Rx);return e.length==0?null:function(t){return Px(kx(t,e))}}function Ox(n){return n!=null?Mx(Nx(n)):null}function Bx(n){if(!n)return null;let e=n.filter(Rx);return e.length==0?null:function(t){let r=kx(t,e).map(Fx);return Mv(r).pipe(xe(Px))}}function Vx(n){return n!=null?Bx(Nx(n)):null}function mx(n,e){return n===null?[e]:Array.isArray(n)?[...n,e]:[n,e]}function Lx(n){return n._rawValidators}function Ux(n){return n._rawAsyncValidators}function D0(n){return n?Array.isArray(n)?n:[n]:[]}function ul(n,e){return Array.isArray(n)?n.includes(e):n===e}function yx(n,e){let t=D0(e);return D0(n).forEach(i=>{ul(t,i)||t.push(i)}),t}function vx(n,e){return D0(e).filter(t=>!ul(n,t))}var cl=class{get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators=[];_rawAsyncValidators=[];_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=Ox(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=Vx(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_onDestroyCallbacks=[];_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,t){return this.control?this.control.hasError(e,t):!1}getError(e,t){return this.control?this.control.getError(e,t):null}},Cs=class extends cl{name;get formDirective(){return null}get path(){return null}},Sa=class extends cl{_parent=null;name=null;valueAccessor=null},ll=class{_cd;constructor(e){this._cd=e}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}},uI={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},fM=Re(X({},uI),{"[class.ng-submitted]":"isSubmitted"}),pM=(()=>{class n extends ll{constructor(t){super(t)}static \u0275fac=function(r){return new(r||n)(pe(Sa,2))};static \u0275dir=lt({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(r,i){r&2&&Zf("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)},standalone:!1,features:[wi]})}return n})(),gM=(()=>{class n extends ll{constructor(t){super(t)}static \u0275fac=function(r){return new(r||n)(pe(Cs,10))};static \u0275dir=lt({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(r,i){r&2&&Zf("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)("ng-submitted",i.isSubmitted)},standalone:!1,features:[wi]})}return n})();var Aa="VALID",ol="INVALID",ws="PENDING",ba="DISABLED",Rr=class{},hl=class extends Rr{value;source;constructor(e,t){super(),this.value=e,this.source=t}},Ta=class extends Rr{pristine;source;constructor(e,t){super(),this.pristine=e,this.source=t}},Ia=class extends Rr{touched;source;constructor(e,t){super(),this.touched=e,this.source=t}},Ds=class extends Rr{status;source;constructor(e,t){super(),this.status=e,this.source=t}},C0=class extends Rr{source;constructor(e){super(),this.source=e}},A0=class extends Rr{source;constructor(e){super(),this.source=e}};function R0(n){return(gl(n)?n.validators:n)||null}function cI(n){return Array.isArray(n)?Ox(n):n||null}function F0(n,e){return(gl(e)?e.asyncValidators:n)||null}function lI(n){return Array.isArray(n)?Vx(n):n||null}function gl(n){return n!=null&&!Array.isArray(n)&&typeof n=="object"}function jx(n,e,t){let r=n.controls;if(!(e?Object.keys(r):r).length)throw new fe(1e3,"");if(!r[t])throw new fe(1001,"")}function zx(n,e,t){n._forEachChild((r,i)=>{if(t[i]===void 0)throw new fe(1002,"")})}var As=class{_pendingDirty=!1;_hasOwnPendingAsyncValidator=null;_pendingTouched=!1;_onCollectionChange=()=>{};_updateOn;_parent=null;_asyncValidationSubscription;_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators;_rawAsyncValidators;value;constructor(e,t){this._assignValidators(e),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get status(){return En(this.statusReactive)}set status(e){En(()=>this.statusReactive.set(e))}_status=ys(()=>this.statusReactive());statusReactive=fs(void 0);get valid(){return this.status===Aa}get invalid(){return this.status===ol}get pending(){return this.status==ws}get disabled(){return this.status===ba}get enabled(){return this.status!==ba}errors;get pristine(){return En(this.pristineReactive)}set pristine(e){En(()=>this.pristineReactive.set(e))}_pristine=ys(()=>this.pristineReactive());pristineReactive=fs(!0);get dirty(){return!this.pristine}get touched(){return En(this.touchedReactive)}set touched(e){En(()=>this.touchedReactive.set(e))}_touched=ys(()=>this.touchedReactive());touchedReactive=fs(!1);get untouched(){return!this.touched}_events=new Ot;events=this._events.asObservable();valueChanges;statusChanges;get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(yx(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(yx(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(vx(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(vx(e,this._rawAsyncValidators))}hasValidator(e){return ul(this._rawValidators,e)}hasAsyncValidator(e){return ul(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){let t=this.touched===!1;this.touched=!0;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsTouched(Re(X({},e),{sourceControl:r})),t&&e.emitEvent!==!1&&this._events.next(new Ia(!0,r))}markAllAsTouched(e={}){this.markAsTouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(t=>t.markAllAsTouched(e))}markAsUntouched(e={}){let t=this.touched===!0;this.touched=!1,this._pendingTouched=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsUntouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:r})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,r),t&&e.emitEvent!==!1&&this._events.next(new Ia(!1,r))}markAsDirty(e={}){let t=this.pristine===!0;this.pristine=!1;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsDirty(Re(X({},e),{sourceControl:r})),t&&e.emitEvent!==!1&&this._events.next(new Ta(!1,r))}markAsPristine(e={}){let t=this.pristine===!1;this.pristine=!0,this._pendingDirty=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsPristine({onlySelf:!0,emitEvent:e.emitEvent})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e,r),t&&e.emitEvent!==!1&&this._events.next(new Ta(!0,r))}markAsPending(e={}){this.status=ws;let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new Ds(this.status,t)),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.markAsPending(Re(X({},e),{sourceControl:t}))}disable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=ba,this.errors=null,this._forEachChild(i=>{i.disable(Re(X({},e),{onlySelf:!0}))}),this._updateValue();let r=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new hl(this.value,r)),this._events.next(new Ds(this.status,r)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Re(X({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(i=>i(!0))}enable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=Aa,this._forEachChild(r=>{r.enable(Re(X({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(Re(X({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e,t){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine({},t),this._parent._updateTouched({},t))}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){let r=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Aa||this.status===ws)&&this._runAsyncValidator(r,e.emitEvent)}let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new hl(this.value,t)),this._events.next(new Ds(this.status,t)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(Re(X({},e),{sourceControl:t}))}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?ba:Aa}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e,t){if(this.asyncValidator){this.status=ws,this._hasOwnPendingAsyncValidator={emitEvent:t!==!1};let r=Fx(this.asyncValidator(this));this._asyncValidationSubscription=r.subscribe(i=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(i,{emitEvent:t,shouldHaveEmitted:e})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();let e=this._hasOwnPendingAsyncValidator?.emitEvent??!1;return this._hasOwnPendingAsyncValidator=null,e}return!1}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(t.emitEvent!==!1,this,t.shouldHaveEmitted)}get(e){let t=e;return t==null||(Array.isArray(t)||(t=t.split(".")),t.length===0)?null:t.reduce((r,i)=>r&&r._find(i),this)}getError(e,t){let r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e,t,r){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),(e||r)&&this._events.next(new Ds(this.status,t)),this._parent&&this._parent._updateControlsErrors(e,t,r)}_initObservables(){this.valueChanges=new Yt,this.statusChanges=new Yt}_calculateStatus(){return this._allControlsDisabled()?ba:this.errors?ol:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(ws)?ws:this._anyControlsHaveStatus(ol)?ol:Aa}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e,t){let r=!this._anyControlsDirty(),i=this.pristine!==r;this.pristine=r,this._parent&&!e.onlySelf&&this._parent._updatePristine(e,t),i&&this._events.next(new Ta(this.pristine,t))}_updateTouched(e={},t){this.touched=this._anyControlsTouched(),this._events.next(new Ia(this.touched,t)),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,t)}_onDisabledChange=[];_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){gl(e)&&e.updateOn!=null&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){let t=this._parent&&this._parent.dirty;return!e&&!!t&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=cI(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=lI(this._rawAsyncValidators)}},dl=class extends As{constructor(e,t,r){super(R0(t),F0(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}controls;registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){zx(this,!0,e),Object.keys(e).forEach(r=>{jx(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){e!=null&&(Object.keys(e).forEach(r=>{let i=this.controls[r];i&&i.patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,i)=>{r.reset(e?e[i]:null,{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t,this),this._updateTouched(t,this),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>r._syncPendingControls()?!0:t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{let r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(let[t,r]of Object.entries(this.controls))if(this.contains(t)&&e(r))return!0;return!1}_reduceValue(){let e={};return this._reduceChildren(e,(t,r,i)=>((r.enabled||this.disabled)&&(t[i]=r.value),t))}_reduceChildren(e,t){let r=e;return this._forEachChild((i,s)=>{r=t(r,i,s)}),r}_allControlsDisabled(){for(let e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}};var b0=class extends dl{};var $x=new ae("",{providedIn:"root",factory:()=>P0}),P0="always";function hI(n,e){return[...e.path,n]}function _x(n,e,t=P0){k0(n,e),e.valueAccessor.writeValue(n.value),(n.disabled||t==="always")&&e.valueAccessor.setDisabledState?.(n.disabled),fI(n,e),gI(n,e),pI(n,e),dI(n,e)}function xx(n,e,t=!0){let r=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(r),e.valueAccessor.registerOnTouched(r)),pl(n,e),n&&(e._invokeOnDestroyCallbacks(),n._registerOnCollectionChange(()=>{}))}function fl(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function dI(n,e){if(e.valueAccessor.setDisabledState){let t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}function k0(n,e){let t=Lx(n);e.validator!==null?n.setValidators(mx(t,e.validator)):typeof t=="function"&&n.setValidators([t]);let r=Ux(n);e.asyncValidator!==null?n.setAsyncValidators(mx(r,e.asyncValidator)):typeof r=="function"&&n.setAsyncValidators([r]);let i=()=>n.updateValueAndValidity();fl(e._rawValidators,i),fl(e._rawAsyncValidators,i)}function pl(n,e){let t=!1;if(n!==null){if(e.validator!==null){let i=Lx(n);if(Array.isArray(i)&&i.length>0){let s=i.filter(o=>o!==e.validator);s.length!==i.length&&(t=!0,n.setValidators(s))}}if(e.asyncValidator!==null){let i=Ux(n);if(Array.isArray(i)&&i.length>0){let s=i.filter(o=>o!==e.asyncValidator);s.length!==i.length&&(t=!0,n.setAsyncValidators(s))}}}let r=()=>{};return fl(e._rawValidators,r),fl(e._rawAsyncValidators,r),t}function fI(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,n.updateOn==="change"&&qx(n,e)})}function pI(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,n.updateOn==="blur"&&n._pendingChange&&qx(n,e),n.updateOn!=="submit"&&n.markAsTouched()})}function qx(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function gI(n,e){let t=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}function mI(n,e){n==null,k0(n,e)}function yI(n,e){return pl(n,e)}function vI(n,e){if(!n.hasOwnProperty("model"))return!1;let t=n.model;return t.isFirstChange()?!0:!Object.is(e,t.currentValue)}function _I(n){return Object.getPrototypeOf(n.constructor)===KT}function xI(n,e){n._syncPendingControls(),e.forEach(t=>{let r=t.control;r.updateOn==="submit"&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}function EI(n,e){if(!e)return null;Array.isArray(e);let t,r,i;return e.forEach(s=>{s.constructor===bx?t=s:_I(s)?r=s:i=s}),i||r||t||null}function wI(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function Ex(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function wx(n){return typeof n=="object"&&n!==null&&Object.keys(n).length===2&&"value"in n&&"disabled"in n}var al=class extends As{defaultValue=null;_onChange=[];_pendingValue;_pendingChange=!1;constructor(e=null,t,r){super(R0(t),F0(r,t)),this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),gl(t)&&(t.nonNullable||t.initialValueIsDefault)&&(wx(e)?this.defaultValue=e.value:this.defaultValue=e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&t.emitModelToViewChange!==!1&&this._onChange.forEach(r=>r(this.value,t.emitViewToModelChange!==!1)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){Ex(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){Ex(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(e){wx(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};var DI=n=>n instanceof al;var yM=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275dir=lt({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""],standalone:!1})}return n})();var Hx=new ae("");var CI={provide:Cs,useExisting:yc(()=>AI)},AI=(()=>{class n extends Cs{callSetDisabledState;get submitted(){return En(this._submittedReactive)}set submitted(t){this._submittedReactive.set(t)}_submitted=ys(()=>this._submittedReactive());_submittedReactive=fs(!1);_oldForm;_onCollectionChange=()=>this._updateDomValue();directives=[];form=null;ngSubmit=new Yt;constructor(t,r,i){super(),this.callSetDisabledState=i,this._setValidators(t),this._setAsyncValidators(r)}ngOnChanges(t){t.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(pl(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(t){let r=this.form.get(t.path);return _x(r,t,this.callSetDisabledState),r.updateValueAndValidity({emitEvent:!1}),this.directives.push(t),r}getControl(t){return this.form.get(t.path)}removeControl(t){xx(t.control||null,t,!1),wI(this.directives,t)}addFormGroup(t){this._setUpFormContainer(t)}removeFormGroup(t){this._cleanUpFormContainer(t)}getFormGroup(t){return this.form.get(t.path)}addFormArray(t){this._setUpFormContainer(t)}removeFormArray(t){this._cleanUpFormContainer(t)}getFormArray(t){return this.form.get(t.path)}updateModel(t,r){this.form.get(t.path).setValue(r)}onSubmit(t){return this._submittedReactive.set(!0),xI(this.form,this.directives),this.ngSubmit.emit(t),this.form._events.next(new C0(this.control)),t?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(t=void 0){this.form.reset(t),this._submittedReactive.set(!1),this.form._events.next(new A0(this.form))}_updateDomValue(){this.directives.forEach(t=>{let r=t.control,i=this.form.get(t.path);r!==i&&(xx(r||null,t),DI(i)&&(_x(i,t,this.callSetDisabledState),t.control=i))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(t){let r=this.form.get(t.path);mI(r,t),r.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(t){if(this.form){let r=this.form.get(t.path);r&&yI(r,t)&&r.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){k0(this.form,this),this._oldForm&&pl(this._oldForm,this)}static \u0275fac=function(r){return new(r||n)(pe(Tx,10),pe(Ix,10),pe($x,8))};static \u0275dir=lt({type:n,selectors:[["","formGroup",""]],hostBindings:function(r,i){r&1&&Qn("submit",function(o){return i.onSubmit(o)})("reset",function(){return i.onReset()})},inputs:{form:[0,"formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],standalone:!1,features:[Ac([CI]),wi,Wn]})}return n})();var bI={provide:Sa,useExisting:yc(()=>TI)},TI=(()=>{class n extends Sa{_ngModelWarningConfig;_added=!1;viewModel;control;name=null;set isDisabled(t){}model;update=new Yt;static _ngModelWarningSentOnce=!1;_ngModelWarningSent=!1;constructor(t,r,i,s,o){super(),this._ngModelWarningConfig=o,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=EI(this,s)}ngOnChanges(t){this._added||this._setUpControl(),vI(t,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}get path(){return hI(this.name==null?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_setUpControl(){this.control=this.formDirective.addControl(this),this._added=!0}static \u0275fac=function(r){return new(r||n)(pe(Cs,13),pe(Tx,10),pe(Ix,10),pe(Ax,10),pe(Hx,8))};static \u0275dir=lt({type:n,selectors:[["","formControlName",""]],inputs:{name:[0,"formControlName","name"],isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"]},outputs:{update:"ngModelChange"},standalone:!1,features:[Ac([bI]),wi,Wn]})}return n})();var II=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=Ut({type:n});static \u0275inj=Lt({})}return n})(),T0=class extends As{constructor(e,t,r){super(R0(t),F0(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}controls;at(e){return this.controls[this._adjustIndex(e)]}push(e,t={}){this.controls.push(e),this._registerControl(e),this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}insert(e,t,r={}){this.controls.splice(e,0,t),this._registerControl(t),this.updateValueAndValidity({emitEvent:r.emitEvent})}removeAt(e,t={}){let r=this._adjustIndex(e);r<0&&(r=0),this.controls[r]&&this.controls[r]._registerOnCollectionChange(()=>{}),this.controls.splice(r,1),this.updateValueAndValidity({emitEvent:t.emitEvent})}setControl(e,t,r={}){let i=this._adjustIndex(e);i<0&&(i=0),this.controls[i]&&this.controls[i]._registerOnCollectionChange(()=>{}),this.controls.splice(i,1),t&&(this.controls.splice(i,0,t),this._registerControl(t)),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(e,t={}){zx(this,!1,e),e.forEach((r,i)=>{jx(this,!1,i),this.at(i).setValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){e!=null&&(e.forEach((r,i)=>{this.at(i)&&this.at(i).patchValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e=[],t={}){this._forEachChild((r,i)=>{r.reset(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t,this),this._updateTouched(t,this),this.updateValueAndValidity(t)}getRawValue(){return this.controls.map(e=>e.getRawValue())}clear(e={}){this.controls.length<1||(this._forEachChild(t=>t._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:e.emitEvent}))}_adjustIndex(e){return e<0?e+this.length:e}_syncPendingControls(){let e=this.controls.reduce((t,r)=>r._syncPendingControls()?!0:t,!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){this.controls.forEach((t,r)=>{e(t,r)})}_updateValue(){this.value=this.controls.filter(e=>e.enabled||this.disabled).map(e=>e.value)}_anyControls(e){return this.controls.some(t=>t.enabled&&e(t))}_setUpControls(){this._forEachChild(e=>this._registerControl(e))}_allControlsDisabled(){for(let e of this.controls)if(e.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)}_find(e){return this.at(e)??null}};function Dx(n){return!!n&&(n.asyncValidators!==void 0||n.validators!==void 0||n.updateOn!==void 0)}var vM=(()=>{class n{useNonNullable=!1;get nonNullable(){let t=new n;return t.useNonNullable=!0,t}group(t,r=null){let i=this._reduceControls(t),s={};return Dx(r)?s=r:r!==null&&(s.validators=r.validator,s.asyncValidators=r.asyncValidator),new dl(i,s)}record(t,r=null){let i=this._reduceControls(t);return new b0(i,r)}control(t,r,i){let s={};return this.useNonNullable?(Dx(r)?s=r:(s.validators=r,s.asyncValidators=i),new al(t,Re(X({},s),{nonNullable:!0}))):new al(t,r,i)}array(t,r,i){let s=t.map(o=>this._createControl(o));return new T0(s,r,i)}_reduceControls(t){let r={};return Object.keys(t).forEach(i=>{r[i]=this._createControl(t[i])}),r}_createControl(t){if(t instanceof al)return t;if(t instanceof As)return t;if(Array.isArray(t)){let r=t[0],i=t.length>1?t[1]:null,s=t.length>2?t[2]:null;return this.control(r,i,s)}else return this.control(t)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=ne({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var Gx=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:Hx,useValue:t.warnOnNgModelWithFormControl??"always"},{provide:$x,useValue:t.callSetDisabledState??P0}]}}static \u0275fac=function(r){return new(r||n)};static \u0275mod=Ut({type:n});static \u0275inj=Lt({imports:[II]})}return n})();var ue="primary",za=Symbol("RouteTitle"),V0=class{params;constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}};function Fi(n){return new V0(n)}function eE(n,e,t){let r=t.path.split("/");if(r.length>n.length||t.pathMatch==="full"&&(e.hasChildren()||r.length<n.length))return null;let i={};for(let s=0;s<r.length;s++){let o=r[s],a=n[s];if(o[0]===":")i[o.substring(1)]=a;else if(o!==a.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function SI(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!Cn(n[t],e[t]))return!1;return!0}function Cn(n,e){let t=n?L0(n):void 0,r=e?L0(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let s=0;s<t.length;s++)if(i=t[s],!tE(n[i],e[i]))return!1;return!0}function L0(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function tE(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;let t=[...n].sort(),r=[...e].sort();return t.every((i,s)=>r[s]===i)}else return n===e}function nE(n){return n.length>0?n[n.length-1]:null}function Mr(n){return Pv(n)?n:oa(n)?tt(Promise.resolve(n)):ie(n)}var RI={exact:iE,subset:sE},rE={exact:FI,subset:PI,ignored:()=>!0};function Wx(n,e,t){return RI[t.paths](n.root,e.root,t.matrixParams)&&rE[t.queryParams](n.queryParams,e.queryParams)&&!(t.fragment==="exact"&&n.fragment!==e.fragment)}function FI(n,e){return Cn(n,e)}function iE(n,e,t){if(!Si(n.segments,e.segments)||!vl(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(let r in e.children)if(!n.children[r]||!iE(n.children[r],e.children[r],t))return!1;return!0}function PI(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>tE(n[t],e[t]))}function sE(n,e,t){return oE(n,e,e.segments,t)}function oE(n,e,t,r){if(n.segments.length>t.length){let i=n.segments.slice(0,t.length);return!(!Si(i,t)||e.hasChildren()||!vl(i,t,r))}else if(n.segments.length===t.length){if(!Si(n.segments,t)||!vl(n.segments,t,r))return!1;for(let i in e.children)if(!n.children[i]||!sE(n.children[i],e.children[i],r))return!1;return!0}else{let i=t.slice(0,n.segments.length),s=t.slice(n.segments.length);return!Si(n.segments,i)||!vl(n.segments,i,r)||!n.children[ue]?!1:oE(n.children[ue],e,s,r)}}function vl(n,e,t){return e.every((r,i)=>rE[t](n[i].parameters,r.parameters))}var bn=class{root;queryParams;fragment;_queryParamMap;constructor(e=new we([],{}),t={},r=null){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap??=Fi(this.queryParams),this._queryParamMap}toString(){return MI.serialize(this)}},we=class{segments;children;parent=null;constructor(e,t){this.segments=e,this.children=t,Object.values(t).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return _l(this)}},Fr=class{path;parameters;_parameterMap;constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap??=Fi(this.parameters),this._parameterMap}toString(){return uE(this)}};function kI(n,e){return Si(n,e)&&n.every((t,r)=>Cn(t.parameters,e[r].parameters))}function Si(n,e){return n.length!==e.length?!1:n.every((t,r)=>t.path===e[r].path)}function NI(n,e){let t=[];return Object.entries(n.children).forEach(([r,i])=>{r===ue&&(t=t.concat(e(i,r)))}),Object.entries(n.children).forEach(([r,i])=>{r!==ue&&(t=t.concat(e(i,r)))}),t}var Pi=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=ne({token:n,factory:()=>new Pr,providedIn:"root"})}return n})(),Pr=class{parse(e){let t=new j0(e);return new bn(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){let t=`/${Ra(e.root,!0)}`,r=VI(e.queryParams),i=typeof e.fragment=="string"?`#${OI(e.fragment)}`:"";return`${t}${r}${i}`}},MI=new Pr;function _l(n){return n.segments.map(e=>uE(e)).join("/")}function Ra(n,e){if(!n.hasChildren())return _l(n);if(e){let t=n.children[ue]?Ra(n.children[ue],!1):"",r=[];return Object.entries(n.children).forEach(([i,s])=>{i!==ue&&r.push(`${i}:${Ra(s,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}else{let t=NI(n,(r,i)=>i===ue?[Ra(n.children[ue],!1)]:[`${i}:${Ra(r,!1)}`]);return Object.keys(n.children).length===1&&n.children[ue]!=null?`${_l(n)}/${t[0]}`:`${_l(n)}/(${t.join("//")})`}}function aE(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function ml(n){return aE(n).replace(/%3B/gi,";")}function OI(n){return encodeURI(n)}function U0(n){return aE(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function xl(n){return decodeURIComponent(n)}function Kx(n){return xl(n.replace(/\+/g,"%20"))}function uE(n){return`${U0(n.path)}${BI(n.parameters)}`}function BI(n){return Object.entries(n).map(([e,t])=>`;${U0(e)}=${U0(t)}`).join("")}function VI(n){let e=Object.entries(n).map(([t,r])=>Array.isArray(r)?r.map(i=>`${ml(t)}=${ml(i)}`).join("&"):`${ml(t)}=${ml(r)}`).filter(t=>t);return e.length?`?${e.join("&")}`:""}var LI=/^[^\/()?;#]+/;function N0(n){let e=n.match(LI);return e?e[0]:""}var UI=/^[^\/()?;=#]+/;function jI(n){let e=n.match(UI);return e?e[0]:""}var zI=/^[^=?&#]+/;function $I(n){let e=n.match(zI);return e?e[0]:""}var qI=/^[^&#]+/;function HI(n){let e=n.match(qI);return e?e[0]:""}var j0=class{url;remaining;constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new we([],{}):new we([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[ue]=new we(e,t)),r}parseSegment(){let e=N0(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new fe(4009,!1);return this.capture(e),new Fr(xl(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let t=jI(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let i=N0(this.remaining);i&&(r=i,this.capture(r))}e[xl(t)]=xl(r)}parseQueryParam(e){let t=$I(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let o=HI(this.remaining);o&&(r=o,this.capture(r))}let i=Kx(t),s=Kx(r);if(e.hasOwnProperty(i)){let o=e[i];Array.isArray(o)||(o=[o],e[i]=o),o.push(s)}else e[i]=s}parseParens(e){let t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=N0(this.remaining),i=this.remaining[r.length];if(i!=="/"&&i!==")"&&i!==";")throw new fe(4010,!1);let s;r.indexOf(":")>-1?(s=r.slice(0,r.indexOf(":")),this.capture(s),this.capture(":")):e&&(s=ue);let o=this.parseChildren();t[s]=Object.keys(o).length===1?o[ue]:new we([],o),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new fe(4011,!1)}};function cE(n){return n.segments.length>0?new we([],{[ue]:n}):n}function lE(n){let e={};for(let[r,i]of Object.entries(n.children)){let s=lE(i);if(r===ue&&s.segments.length===0&&s.hasChildren())for(let[o,a]of Object.entries(s.children))e[o]=a;else(s.segments.length>0||s.hasChildren())&&(e[r]=s)}let t=new we(n.segments,e);return GI(t)}function GI(n){if(n.numberOfChildren===1&&n.children[ue]){let e=n.children[ue];return new we(n.segments.concat(e.segments),e.children)}return n}function kr(n){return n instanceof bn}function hE(n,e,t=null,r=null){let i=dE(n);return fE(i,e,t,r)}function dE(n){let e;function t(s){let o={};for(let c of s.children){let l=t(c);o[c.outlet]=l}let a=new we(s.url,o);return s===n&&(e=a),a}let r=t(n.root),i=cE(r);return e??i}function fE(n,e,t,r){let i=n;for(;i.parent;)i=i.parent;if(e.length===0)return M0(i,i,i,t,r);let s=WI(e);if(s.toRoot())return M0(i,i,new we([],{}),t,r);let o=KI(s,i,n),a=o.processChildren?Pa(o.segmentGroup,o.index,s.commands):gE(o.segmentGroup,o.index,s.commands);return M0(i,o.segmentGroup,a,t,r)}function wl(n){return typeof n=="object"&&n!=null&&!n.outlets&&!n.segmentPath}function Na(n){return typeof n=="object"&&n!=null&&n.outlets}function M0(n,e,t,r,i){let s={};r&&Object.entries(r).forEach(([c,l])=>{s[c]=Array.isArray(l)?l.map(h=>`${h}`):`${l}`});let o;n===e?o=t:o=pE(n,e,t);let a=cE(lE(o));return new bn(a,s,i)}function pE(n,e,t){let r={};return Object.entries(n.children).forEach(([i,s])=>{s===e?r[i]=t:r[i]=pE(s,e,t)}),new we(n.segments,r)}var Dl=class{isAbsolute;numberOfDoubleDots;commands;constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&wl(r[0]))throw new fe(4003,!1);let i=r.find(Na);if(i&&i!==nE(r))throw new fe(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function WI(n){if(typeof n[0]=="string"&&n.length===1&&n[0]==="/")return new Dl(!0,0,n);let e=0,t=!1,r=n.reduce((i,s,o)=>{if(typeof s=="object"&&s!=null){if(s.outlets){let a={};return Object.entries(s.outlets).forEach(([c,l])=>{a[c]=typeof l=="string"?l.split("/"):l}),[...i,{outlets:a}]}if(s.segmentPath)return[...i,s.segmentPath]}return typeof s!="string"?[...i,s]:o===0?(s.split("/").forEach((a,c)=>{c==0&&a==="."||(c==0&&a===""?t=!0:a===".."?e++:a!=""&&i.push(a))}),i):[...i,s]},[]);return new Dl(t,e,r)}var Is=class{segmentGroup;processChildren;index;constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}};function KI(n,e,t){if(n.isAbsolute)return new Is(e,!0,0);if(!t)return new Is(e,!1,NaN);if(t.parent===null)return new Is(t,!0,0);let r=wl(n.commands[0])?0:1,i=t.segments.length-1+r;return QI(t,i,n.numberOfDoubleDots)}function QI(n,e,t){let r=n,i=e,s=t;for(;s>i;){if(s-=i,r=r.parent,!r)throw new fe(4005,!1);i=r.segments.length}return new Is(r,!1,i-s)}function XI(n){return Na(n[0])?n[0].outlets:{[ue]:n}}function gE(n,e,t){if(n??=new we([],{}),n.segments.length===0&&n.hasChildren())return Pa(n,e,t);let r=YI(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){let s=new we(n.segments.slice(0,r.pathIndex),{});return s.children[ue]=new we(n.segments.slice(r.pathIndex),n.children),Pa(s,0,i)}else return r.match&&i.length===0?new we(n.segments,{}):r.match&&!n.hasChildren()?z0(n,e,t):r.match?Pa(n,0,i):z0(n,e,t)}function Pa(n,e,t){if(t.length===0)return new we(n.segments,{});{let r=XI(t),i={};if(Object.keys(r).some(s=>s!==ue)&&n.children[ue]&&n.numberOfChildren===1&&n.children[ue].segments.length===0){let s=Pa(n.children[ue],e,t);return new we(n.segments,s.children)}return Object.entries(r).forEach(([s,o])=>{typeof o=="string"&&(o=[o]),o!==null&&(i[s]=gE(n.children[s],e,o))}),Object.entries(n.children).forEach(([s,o])=>{r[s]===void 0&&(i[s]=o)}),new we(n.segments,i)}}function YI(n,e,t){let r=0,i=e,s={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return s;let o=n.segments[i],a=t[r];if(Na(a))break;let c=`${a}`,l=r<t.length-1?t[r+1]:null;if(i>0&&c===void 0)break;if(c&&l&&typeof l=="object"&&l.outlets===void 0){if(!Xx(c,l,o))return s;r+=2}else{if(!Xx(c,{},o))return s;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}function z0(n,e,t){let r=n.segments.slice(0,e),i=0;for(;i<t.length;){let s=t[i];if(Na(s)){let c=ZI(s.outlets);return new we(r,c)}if(i===0&&wl(t[0])){let c=n.segments[e];r.push(new Fr(c.path,Qx(t[0]))),i++;continue}let o=Na(s)?s.outlets[ue]:`${s}`,a=i<t.length-1?t[i+1]:null;o&&a&&wl(a)?(r.push(new Fr(o,Qx(a))),i+=2):(r.push(new Fr(o,{})),i++)}return new we(r,{})}function ZI(n){let e={};return Object.entries(n).forEach(([t,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(e[t]=z0(new we([],{}),0,r))}),e}function Qx(n){let e={};return Object.entries(n).forEach(([t,r])=>e[t]=`${r}`),e}function Xx(n,e,t){return n==t.path&&Cn(e,t.parameters)}var El="imperative",nt=function(n){return n[n.NavigationStart=0]="NavigationStart",n[n.NavigationEnd=1]="NavigationEnd",n[n.NavigationCancel=2]="NavigationCancel",n[n.NavigationError=3]="NavigationError",n[n.RoutesRecognized=4]="RoutesRecognized",n[n.ResolveStart=5]="ResolveStart",n[n.ResolveEnd=6]="ResolveEnd",n[n.GuardsCheckStart=7]="GuardsCheckStart",n[n.GuardsCheckEnd=8]="GuardsCheckEnd",n[n.RouteConfigLoadStart=9]="RouteConfigLoadStart",n[n.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",n[n.ChildActivationStart=11]="ChildActivationStart",n[n.ChildActivationEnd=12]="ChildActivationEnd",n[n.ActivationStart=13]="ActivationStart",n[n.ActivationEnd=14]="ActivationEnd",n[n.Scroll=15]="Scroll",n[n.NavigationSkipped=16]="NavigationSkipped",n}(nt||{}),$t=class{id;url;constructor(e,t){this.id=e,this.url=t}},Nr=class extends $t{type=nt.NavigationStart;navigationTrigger;restoredState;constructor(e,t,r="imperative",i=null){super(e,t),this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},qt=class extends $t{urlAfterRedirects;type=nt.NavigationEnd;constructor(e,t,r){super(e,t),this.urlAfterRedirects=r}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},Ft=function(n){return n[n.Redirect=0]="Redirect",n[n.SupersededByNewNavigation=1]="SupersededByNewNavigation",n[n.NoDataFromResolver=2]="NoDataFromResolver",n[n.GuardRejected=3]="GuardRejected",n}(Ft||{}),Rs=function(n){return n[n.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",n[n.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",n}(Rs||{}),An=class extends $t{reason;code;type=nt.NavigationCancel;constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},Tn=class extends $t{reason;code;type=nt.NavigationSkipped;constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i}},Fs=class extends $t{error;target;type=nt.NavigationError;constructor(e,t,r,i){super(e,t),this.error=r,this.target=i}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},Ma=class extends $t{urlAfterRedirects;state;type=nt.RoutesRecognized;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Cl=class extends $t{urlAfterRedirects;state;type=nt.GuardsCheckStart;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Al=class extends $t{urlAfterRedirects;state;shouldActivate;type=nt.GuardsCheckEnd;constructor(e,t,r,i,s){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=s}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},bl=class extends $t{urlAfterRedirects;state;type=nt.ResolveStart;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Tl=class extends $t{urlAfterRedirects;state;type=nt.ResolveEnd;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Il=class{route;type=nt.RouteConfigLoadStart;constructor(e){this.route=e}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},Sl=class{route;type=nt.RouteConfigLoadEnd;constructor(e){this.route=e}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},Rl=class{snapshot;type=nt.ChildActivationStart;constructor(e){this.snapshot=e}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Fl=class{snapshot;type=nt.ChildActivationEnd;constructor(e){this.snapshot=e}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Pl=class{snapshot;type=nt.ActivationStart;constructor(e){this.snapshot=e}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},kl=class{snapshot;type=nt.ActivationEnd;constructor(e){this.snapshot=e}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Ps=class{routerEvent;position;anchor;type=nt.Scroll;constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r}toString(){let e=this.position?`${this.position[0]}, ${this.position[1]}`:null;return`Scroll(anchor: '${this.anchor}', position: '${e}')`}},Oa=class{},ks=class{url;navigationBehaviorOptions;constructor(e,t){this.url=e,this.navigationBehaviorOptions=t}};function JI(n,e){return n.providers&&!n._injector&&(n._injector=wc(n.providers,e,`Route: ${n.path}`)),n._injector??e}function ln(n){return n.outlet||ue}function eS(n,e){let t=n.filter(r=>ln(r)===e);return t.push(...n.filter(r=>ln(r)!==e)),t}function $a(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){let t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}var Nl=class{rootInjector;outlet=null;route=null;children;attachRef=null;get injector(){return $a(this.route?.snapshot)??this.rootInjector}constructor(e){this.rootInjector=e,this.children=new ki(this.rootInjector)}},ki=(()=>{class n{rootInjector;contexts=new Map;constructor(t){this.rootInjector=t}onChildOutletCreated(t,r){let i=this.getOrCreateContext(t);i.outlet=r,this.contexts.set(t,i)}onChildOutletDestroyed(t){let r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){let t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new Nl(this.rootInjector),this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}static \u0275fac=function(r){return new(r||n)(re(xn))};static \u0275prov=ne({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Ml=class{_root;constructor(e){this._root=e}get root(){return this._root.value}parent(e){let t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){let t=$0(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){let t=$0(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){let t=q0(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return q0(e,this._root).map(t=>t.value)}};function $0(n,e){if(n===e.value)return e;for(let t of e.children){let r=$0(n,t);if(r)return r}return null}function q0(n,e){if(n===e.value)return[e];for(let t of e.children){let r=q0(n,t);if(r.length)return r.unshift(e),r}return[]}var zt=class{value;children;constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}};function Ts(n){let e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}var Ba=class extends Ml{snapshot;constructor(e,t){super(e),this.snapshot=t,Z0(this,e)}toString(){return this.snapshot.toString()}};function mE(n){let e=tS(n),t=new Xt([new Fr("",{})]),r=new Xt({}),i=new Xt({}),s=new Xt({}),o=new Xt(""),a=new Jn(t,r,s,o,i,ue,n,e.root);return a.snapshot=e.root,new Ba(new zt(a,[]),e)}function tS(n){let e={},t={},r={},i="",s=new Ri([],e,r,i,t,ue,n,null,{});return new Va("",new zt(s,[]))}var Jn=class{urlSubject;paramsSubject;queryParamsSubject;fragmentSubject;dataSubject;outlet;component;snapshot;_futureSnapshot;_routerState;_paramMap;_queryParamMap;title;url;params;queryParams;fragment;data;constructor(e,t,r,i,s,o,a,c){this.urlSubject=e,this.paramsSubject=t,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=s,this.outlet=o,this.component=a,this._futureSnapshot=c,this.title=this.dataSubject?.pipe(xe(l=>l[za]))??ie(void 0),this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=s}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(xe(e=>Fi(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(xe(e=>Fi(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function Ol(n,e,t="emptyOnly"){let r,{routeConfig:i}=n;return e!==null&&(t==="always"||i?.path===""||!e.component&&!e.routeConfig?.loadComponent)?r={params:X(X({},e.params),n.params),data:X(X({},e.data),n.data),resolve:X(X(X(X({},n.data),e.data),i?.data),n._resolvedData)}:r={params:X({},n.params),data:X({},n.data),resolve:X(X({},n.data),n._resolvedData??{})},i&&vE(i)&&(r.resolve[za]=i.title),r}var Ri=class{url;params;queryParams;fragment;data;outlet;component;routeConfig;_resolve;_resolvedData;_routerState;_paramMap;_queryParamMap;get title(){return this.data?.[za]}constructor(e,t,r,i,s,o,a,c,l){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=s,this.outlet=o,this.component=a,this.routeConfig=c,this._resolve=l}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=Fi(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=Fi(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(r=>r.toString()).join("/"),t=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${t}')`}},Va=class extends Ml{url;constructor(e,t){super(t),this.url=e,Z0(this,t)}toString(){return yE(this._root)}};function Z0(n,e){e.value._routerState=n,e.children.forEach(t=>Z0(n,t))}function yE(n){let e=n.children.length>0?` { ${n.children.map(yE).join(", ")} } `:"";return`${n.value}${e}`}function O0(n){if(n.snapshot){let e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,Cn(e.queryParams,t.queryParams)||n.queryParamsSubject.next(t.queryParams),e.fragment!==t.fragment&&n.fragmentSubject.next(t.fragment),Cn(e.params,t.params)||n.paramsSubject.next(t.params),SI(e.url,t.url)||n.urlSubject.next(t.url),Cn(e.data,t.data)||n.dataSubject.next(t.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function H0(n,e){let t=Cn(n.params,e.params)&&kI(n.url,e.url),r=!n.parent!=!e.parent;return t&&!r&&(!n.parent||H0(n.parent,e.parent))}function vE(n){return typeof n.title=="string"||n.title===null}var _E=new ae(""),J0=(()=>{class n{activated=null;get activatedComponentRef(){return this.activated}_activatedRoute=null;name=ue;activateEvents=new Yt;deactivateEvents=new Yt;attachEvents=new Yt;detachEvents=new Yt;routerOutletData=Hv(void 0);parentContexts=Q(ki);location=Q(sa);changeDetector=Q(Ci);inputBinder=Q(qa,{optional:!0});supportsBindingToComponentInputs=!0;ngOnChanges(t){if(t.name){let{firstChange:r,previousValue:i}=t.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new fe(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new fe(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new fe(4012,!1);this.location.detach();let t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){let t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new fe(4013,!1);this._activatedRoute=t;let i=this.location,o=t.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,c=new G0(t,a,i.injector,this.routerOutletData);this.activated=i.createComponent(o,{index:i.length,injector:c,environmentInjector:r}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static \u0275fac=function(r){return new(r||n)};static \u0275dir=lt({type:n,selectors:[["router-outlet"]],inputs:{name:"name",routerOutletData:[1,"routerOutletData"]},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],features:[Wn]})}return n})(),G0=class{route;childContexts;parent;outletData;constructor(e,t,r,i){this.route=e,this.childContexts=t,this.parent=r,this.outletData=i}get(e,t){return e===Jn?this.route:e===ki?this.childContexts:e===_E?this.outletData:this.parent.get(e,t)}},qa=new ae(""),ep=(()=>{class n{outletDataSubscriptions=new Map;bindActivatedRouteToOutletComponent(t){this.unsubscribeFromRouteData(t),this.subscribeToRouteData(t)}unsubscribeFromRouteData(t){this.outletDataSubscriptions.get(t)?.unsubscribe(),this.outletDataSubscriptions.delete(t)}subscribeToRouteData(t){let{activatedRoute:r}=t,i=mc([r.queryParams,r.params,r.data]).pipe(Vt(([s,o,a],c)=>(a=X(X(X({},s),o),a),c===0?ie(a):Promise.resolve(a)))).subscribe(s=>{if(!t.isActivated||!t.activatedComponentRef||t.activatedRoute!==r||r.component===null){this.unsubscribeFromRouteData(t);return}let o=v_(r.component);if(!o){this.unsubscribeFromRouteData(t);return}for(let{templateName:a}of o.inputs)t.activatedComponentRef.setInput(a,s[a])});this.outletDataSubscriptions.set(t,i)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=ne({token:n,factory:n.\u0275fac})}return n})();function nS(n,e,t){let r=La(n,e._root,t?t._root:void 0);return new Ba(r,e)}function La(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){let r=t.value;r._futureSnapshot=e.value;let i=rS(n,e,t);return new zt(r,i)}else{if(n.shouldAttach(e.value)){let s=n.retrieve(e.value);if(s!==null){let o=s.route;return o.value._futureSnapshot=e.value,o.children=e.children.map(a=>La(n,a)),o}}let r=iS(e.value),i=e.children.map(s=>La(n,s));return new zt(r,i)}}function rS(n,e,t){return e.children.map(r=>{for(let i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return La(n,r,i);return La(n,r)})}function iS(n){return new Jn(new Xt(n.url),new Xt(n.params),new Xt(n.queryParams),new Xt(n.fragment),new Xt(n.data),n.outlet,n.component,n)}var Ns=class{redirectTo;navigationBehaviorOptions;constructor(e,t){this.redirectTo=e,this.navigationBehaviorOptions=t}},xE="ngNavigationCancelingError";function Bl(n,e){let{redirectTo:t,navigationBehaviorOptions:r}=kr(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=EE(!1,Ft.Redirect);return i.url=t,i.navigationBehaviorOptions=r,i}function EE(n,e){let t=new Error(`NavigationCancelingError: ${n||""}`);return t[xE]=!0,t.cancellationCode=e,t}function sS(n){return wE(n)&&kr(n.url)}function wE(n){return!!n&&n[xE]}var oS=(n,e,t,r)=>xe(i=>(new W0(e,i.targetRouterState,i.currentRouterState,t,r).activate(n),i)),W0=class{routeReuseStrategy;futureState;currState;forwardEvent;inputBindingEnabled;constructor(e,t,r,i,s){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=s}activate(e){let t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),O0(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){let i=Ts(t);e.children.forEach(s=>{let o=s.value.outlet;this.deactivateRoutes(s,i[o],r),delete i[o]}),Object.values(i).forEach(s=>{this.deactivateRouteAndItsChildren(s,r)})}deactivateRoutes(e,t,r){let i=e.value,s=t?t.value:null;if(i===s)if(i.component){let o=r.getContext(i.outlet);o&&this.deactivateChildRoutes(e,t,o.children)}else this.deactivateChildRoutes(e,t,r);else s&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){let r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,s=Ts(e);for(let o of Object.values(s))this.deactivateRouteAndItsChildren(o,i);if(r&&r.outlet){let o=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:o,route:e,contexts:a})}}deactivateRouteAndOutlet(e,t){let r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,s=Ts(e);for(let o of Object.values(s))this.deactivateRouteAndItsChildren(o,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,t,r){let i=Ts(t);e.children.forEach(s=>{this.activateRoutes(s,i[s.value.outlet],r),this.forwardEvent(new kl(s.value.snapshot))}),e.children.length&&this.forwardEvent(new Fl(e.value.snapshot))}activateRoutes(e,t,r){let i=e.value,s=t?t.value:null;if(O0(i),i===s)if(i.component){let o=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,o.children)}else this.activateChildRoutes(e,t,r);else if(i.component){let o=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),o.children.onOutletReAttached(a.contexts),o.attachRef=a.componentRef,o.route=a.route.value,o.outlet&&o.outlet.attach(a.componentRef,a.route.value),O0(a.route.value),this.activateChildRoutes(e,null,o.children)}else o.attachRef=null,o.route=i,o.outlet&&o.outlet.activateWith(i,o.injector),this.activateChildRoutes(e,null,o.children)}else this.activateChildRoutes(e,null,r)}},Vl=class{path;route;constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},Ss=class{component;route;constructor(e,t){this.component=e,this.route=t}};function aS(n,e,t){let r=n._root,i=e?e._root:null;return Fa(r,i,t,[r.value])}function uS(n){let e=n.routeConfig?n.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:n,guards:e}}function Os(n,e){let t=Symbol(),r=e.get(n,t);return r===t?typeof n=="function"&&!Uv(n)?n:e.get(n):r}function Fa(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let s=Ts(e);return n.children.forEach(o=>{cS(o,s[o.value.outlet],t,r.concat([o.value]),i),delete s[o.value.outlet]}),Object.entries(s).forEach(([o,a])=>ka(a,t.getContext(o),i)),i}function cS(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let s=n.value,o=e?e.value:null,a=t?t.getContext(n.value.outlet):null;if(o&&s.routeConfig===o.routeConfig){let c=lS(o,s,s.routeConfig.runGuardsAndResolvers);c?i.canActivateChecks.push(new Vl(r)):(s.data=o.data,s._resolvedData=o._resolvedData),s.component?Fa(n,e,a?a.children:null,r,i):Fa(n,e,t,r,i),c&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new Ss(a.outlet.component,o))}else o&&ka(e,a,i),i.canActivateChecks.push(new Vl(r)),s.component?Fa(n,null,a?a.children:null,r,i):Fa(n,null,t,r,i);return i}function lS(n,e,t){if(typeof t=="function")return t(n,e);switch(t){case"pathParamsChange":return!Si(n.url,e.url);case"pathParamsOrQueryParamsChange":return!Si(n.url,e.url)||!Cn(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!H0(n,e)||!Cn(n.queryParams,e.queryParams);case"paramsChange":default:return!H0(n,e)}}function ka(n,e,t){let r=Ts(n),i=n.value;Object.entries(r).forEach(([s,o])=>{i.component?e?ka(o,e.children.getContext(s),t):ka(o,null,t):ka(o,e,t)}),i.component?e&&e.outlet&&e.outlet.isActivated?t.canDeactivateChecks.push(new Ss(e.outlet.component,i)):t.canDeactivateChecks.push(new Ss(null,i)):t.canDeactivateChecks.push(new Ss(null,i))}function Ha(n){return typeof n=="function"}function hS(n){return typeof n=="boolean"}function dS(n){return n&&Ha(n.canLoad)}function fS(n){return n&&Ha(n.canActivate)}function pS(n){return n&&Ha(n.canActivateChild)}function gS(n){return n&&Ha(n.canDeactivate)}function mS(n){return n&&Ha(n.canMatch)}function DE(n){return n instanceof kv||n?.name==="EmptyError"}var yl=Symbol("INITIAL_VALUE");function Ms(){return Vt(n=>mc(n.map(e=>e.pipe(ds(1),Vv(yl)))).pipe(xe(e=>{for(let t of e)if(t!==!0){if(t===yl)return yl;if(t===!1||yS(t))return t}return!0}),_n(e=>e!==yl),ds(1)))}function yS(n){return kr(n)||n instanceof Ns}function vS(n,e){return St(t=>{let{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:s,canDeactivateChecks:o}}=t;return o.length===0&&s.length===0?ie(Re(X({},t),{guardsResult:!0})):_S(o,r,i,n).pipe(St(a=>a&&hS(a)?xS(r,s,n,e):ie(a)),xe(a=>Re(X({},t),{guardsResult:a})))})}function _S(n,e,t,r){return tt(n).pipe(St(i=>AS(i.component,i.route,t,e,r)),Dr(i=>i!==!0,!0))}function xS(n,e,t,r){return tt(e).pipe(Gn(i=>Nv(wS(i.route.parent,r),ES(i.route,r),CS(n,i.path,t),DS(n,i.route,t))),Dr(i=>i!==!0,!0))}function ES(n,e){return n!==null&&e&&e(new Pl(n)),ie(!0)}function wS(n,e){return n!==null&&e&&e(new Rl(n)),ie(!0)}function DS(n,e,t){let r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||r.length===0)return ie(!0);let i=r.map(s=>Of(()=>{let o=$a(e)??t,a=Os(s,o),c=fS(a)?a.canActivate(e,n):vt(o,()=>a(e,n));return Mr(c).pipe(Dr())}));return ie(i).pipe(Ms())}function CS(n,e,t){let r=e[e.length-1],s=e.slice(0,e.length-1).reverse().map(o=>uS(o)).filter(o=>o!==null).map(o=>Of(()=>{let a=o.guards.map(c=>{let l=$a(o.node)??t,h=Os(c,l),f=pS(h)?h.canActivateChild(r,n):vt(l,()=>h(r,n));return Mr(f).pipe(Dr())});return ie(a).pipe(Ms())}));return ie(s).pipe(Ms())}function AS(n,e,t,r,i){let s=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!s||s.length===0)return ie(!0);let o=s.map(a=>{let c=$a(e)??i,l=Os(a,c),h=gS(l)?l.canDeactivate(n,e,t,r):vt(c,()=>l(n,e,t,r));return Mr(h).pipe(Dr())});return ie(o).pipe(Ms())}function bS(n,e,t,r){let i=e.canLoad;if(i===void 0||i.length===0)return ie(!0);let s=i.map(o=>{let a=Os(o,n),c=dS(a)?a.canLoad(e,t):vt(n,()=>a(e,t));return Mr(c)});return ie(s).pipe(Ms(),CE(r))}function CE(n){return Sv(yt(e=>{if(typeof e!="boolean")throw Bl(n,e)}),xe(e=>e===!0))}function TS(n,e,t,r){let i=e.canMatch;if(!i||i.length===0)return ie(!0);let s=i.map(o=>{let a=Os(o,n),c=mS(a)?a.canMatch(e,t):vt(n,()=>a(e,t));return Mr(c)});return ie(s).pipe(Ms(),CE(r))}var Ua=class{segmentGroup;constructor(e){this.segmentGroup=e||null}},ja=class extends Error{urlTree;constructor(e){super(),this.urlTree=e}};function bs(n){return xi(new Ua(n))}function IS(n){return xi(new fe(4e3,!1))}function SS(n){return xi(EE(!1,Ft.GuardRejected))}var K0=class{urlSerializer;urlTree;constructor(e,t){this.urlSerializer=e,this.urlTree=t}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),i.numberOfChildren===0)return ie(r);if(i.numberOfChildren>1||!i.children[ue])return IS(`${e.redirectTo}`);i=i.children[ue]}}applyRedirectCommands(e,t,r,i,s){if(typeof t!="string"){let a=t,{queryParams:c,fragment:l,routeConfig:h,url:f,outlet:p,params:m,data:y,title:w}=i,E=vt(s,()=>a({params:m,data:y,queryParams:c,fragment:l,routeConfig:h,url:f,outlet:p,title:w}));if(E instanceof bn)throw new ja(E);t=E}let o=this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,r);if(t[0]==="/")throw new ja(o);return o}applyRedirectCreateUrlTree(e,t,r,i){let s=this.createSegmentGroup(e,t.root,r,i);return new bn(s,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){let r={};return Object.entries(e).forEach(([i,s])=>{if(typeof s=="string"&&s[0]===":"){let a=s.substring(1);r[i]=t[a]}else r[i]=s}),r}createSegmentGroup(e,t,r,i){let s=this.createSegments(e,t.segments,r,i),o={};return Object.entries(t.children).forEach(([a,c])=>{o[a]=this.createSegmentGroup(e,c,r,i)}),new we(s,o)}createSegments(e,t,r,i){return t.map(s=>s.path[0]===":"?this.findPosParam(e,s,i):this.findOrReturn(s,r))}findPosParam(e,t,r){let i=r[t.path.substring(1)];if(!i)throw new fe(4001,!1);return i}findOrReturn(e,t){let r=0;for(let i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}},Q0={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function RS(n,e,t,r,i){let s=AE(n,e,t);return s.matched?(r=JI(e,r),TS(r,e,t,i).pipe(xe(o=>o===!0?s:X({},Q0)))):ie(s)}function AE(n,e,t){if(e.path==="**")return FS(t);if(e.path==="")return e.pathMatch==="full"&&(n.hasChildren()||t.length>0)?X({},Q0):{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};let i=(e.matcher||eE)(t,n,e);if(!i)return X({},Q0);let s={};Object.entries(i.posParams??{}).forEach(([a,c])=>{s[a]=c.path});let o=i.consumed.length>0?X(X({},s),i.consumed[i.consumed.length-1].parameters):s;return{matched:!0,consumedSegments:i.consumed,remainingSegments:t.slice(i.consumed.length),parameters:o,positionalParamSegments:i.posParams??{}}}function FS(n){return{matched:!0,parameters:n.length>0?nE(n).parameters:{},consumedSegments:n,remainingSegments:[],positionalParamSegments:{}}}function Yx(n,e,t,r){return t.length>0&&NS(n,t,r)?{segmentGroup:new we(e,kS(r,new we(t,n.children))),slicedSegments:[]}:t.length===0&&MS(n,t,r)?{segmentGroup:new we(n.segments,PS(n,t,r,n.children)),slicedSegments:t}:{segmentGroup:new we(n.segments,n.children),slicedSegments:t}}function PS(n,e,t,r){let i={};for(let s of t)if(Ul(n,e,s)&&!r[ln(s)]){let o=new we([],{});i[ln(s)]=o}return X(X({},r),i)}function kS(n,e){let t={};t[ue]=e;for(let r of n)if(r.path===""&&ln(r)!==ue){let i=new we([],{});t[ln(r)]=i}return t}function NS(n,e,t){return t.some(r=>Ul(n,e,r)&&ln(r)!==ue)}function MS(n,e,t){return t.some(r=>Ul(n,e,r))}function Ul(n,e,t){return(n.hasChildren()||e.length>0)&&t.pathMatch==="full"?!1:t.path===""}function OS(n,e,t){return e.length===0&&!n.children[t]}var X0=class{};function BS(n,e,t,r,i,s,o="emptyOnly"){return new Y0(n,e,t,r,i,o,s).recognize()}var VS=31,Y0=class{injector;configLoader;rootComponentType;config;urlTree;paramsInheritanceStrategy;urlSerializer;applyRedirects;absoluteRedirectCount=0;allowRedirects=!0;constructor(e,t,r,i,s,o,a){this.injector=e,this.configLoader=t,this.rootComponentType=r,this.config=i,this.urlTree=s,this.paramsInheritanceStrategy=o,this.urlSerializer=a,this.applyRedirects=new K0(this.urlSerializer,this.urlTree)}noMatchError(e){return new fe(4002,`'${e.segmentGroup}'`)}recognize(){let e=Yx(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(xe(({children:t,rootSnapshot:r})=>{let i=new zt(r,t),s=new Va("",i),o=hE(r,[],this.urlTree.queryParams,this.urlTree.fragment);return o.queryParams=this.urlTree.queryParams,s.url=this.urlSerializer.serialize(o),{state:s,tree:o}}))}match(e){let t=new Ri([],Object.freeze({}),Object.freeze(X({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),ue,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,e,ue,t).pipe(xe(r=>({children:r,rootSnapshot:t})),Bt(r=>{if(r instanceof ja)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof Ua?this.noMatchError(r):r}))}processSegmentGroup(e,t,r,i,s){return r.segments.length===0&&r.hasChildren()?this.processChildren(e,t,r,s):this.processSegment(e,t,r,r.segments,i,!0,s).pipe(xe(o=>o instanceof zt?[o]:[]))}processChildren(e,t,r,i){let s=[];for(let o of Object.keys(r.children))o==="primary"?s.unshift(o):s.push(o);return tt(s).pipe(Gn(o=>{let a=r.children[o],c=eS(t,o);return this.processSegmentGroup(e,c,a,o,i)}),Bv((o,a)=>(o.push(...a),o)),Bf(null),Ov(),St(o=>{if(o===null)return bs(r);let a=bE(o);return LS(a),ie(a)}))}processSegment(e,t,r,i,s,o,a){return tt(t).pipe(Gn(c=>this.processSegmentAgainstRoute(c._injector??e,t,c,r,i,s,o,a).pipe(Bt(l=>{if(l instanceof Ua)return ie(null);throw l}))),Dr(c=>!!c),Bt(c=>{if(DE(c))return OS(r,i,s)?ie(new X0):bs(r);throw c}))}processSegmentAgainstRoute(e,t,r,i,s,o,a,c){return ln(r)!==o&&(o===ue||!Ul(i,s,r))?bs(i):r.redirectTo===void 0?this.matchSegmentAgainstRoute(e,i,r,s,o,c):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(e,i,t,r,s,o,c):bs(i)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,s,o,a){let{matched:c,parameters:l,consumedSegments:h,positionalParamSegments:f,remainingSegments:p}=AE(t,i,s);if(!c)return bs(t);typeof i.redirectTo=="string"&&i.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>VS&&(this.allowRedirects=!1));let m=new Ri(s,l,Object.freeze(X({},this.urlTree.queryParams)),this.urlTree.fragment,Zx(i),ln(i),i.component??i._loadedComponent??null,i,Jx(i)),y=Ol(m,a,this.paramsInheritanceStrategy);m.params=Object.freeze(y.params),m.data=Object.freeze(y.data);let w=this.applyRedirects.applyRedirectCommands(h,i.redirectTo,f,m,e);return this.applyRedirects.lineralizeSegments(i,w).pipe(St(E=>this.processSegment(e,r,t,E.concat(p),o,!1,a)))}matchSegmentAgainstRoute(e,t,r,i,s,o){let a=RS(t,r,i,e,this.urlSerializer);return r.path==="**"&&(t.children={}),a.pipe(Vt(c=>c.matched?(e=r._injector??e,this.getChildConfig(e,r,i).pipe(Vt(({routes:l})=>{let h=r._loadedInjector??e,{parameters:f,consumedSegments:p,remainingSegments:m}=c,y=new Ri(p,f,Object.freeze(X({},this.urlTree.queryParams)),this.urlTree.fragment,Zx(r),ln(r),r.component??r._loadedComponent??null,r,Jx(r)),w=Ol(y,o,this.paramsInheritanceStrategy);y.params=Object.freeze(w.params),y.data=Object.freeze(w.data);let{segmentGroup:E,slicedSegments:x}=Yx(t,p,m,l);if(x.length===0&&E.hasChildren())return this.processChildren(h,l,E,y).pipe(xe(R=>new zt(y,R)));if(l.length===0&&x.length===0)return ie(new zt(y,[]));let D=ln(r)===s;return this.processSegment(h,l,E,x,D?ue:s,!0,y).pipe(xe(R=>new zt(y,R instanceof zt?[R]:[])))}))):bs(t)))}getChildConfig(e,t,r){return t.children?ie({routes:t.children,injector:e}):t.loadChildren?t._loadedRoutes!==void 0?ie({routes:t._loadedRoutes,injector:t._loadedInjector}):bS(e,t,r,this.urlSerializer).pipe(St(i=>i?this.configLoader.loadChildren(e,t).pipe(yt(s=>{t._loadedRoutes=s.routes,t._loadedInjector=s.injector})):SS(t))):ie({routes:[],injector:e})}};function LS(n){n.sort((e,t)=>e.value.outlet===ue?-1:t.value.outlet===ue?1:e.value.outlet.localeCompare(t.value.outlet))}function US(n){let e=n.value.routeConfig;return e&&e.path===""}function bE(n){let e=[],t=new Set;for(let r of n){if(!US(r)){e.push(r);continue}let i=e.find(s=>r.value.routeConfig===s.value.routeConfig);i!==void 0?(i.children.push(...r.children),t.add(i)):e.push(r)}for(let r of t){let i=bE(r.children);e.push(new zt(r.value,i))}return e.filter(r=>!t.has(r))}function Zx(n){return n.data||{}}function Jx(n){return n.resolve||{}}function jS(n,e,t,r,i,s){return St(o=>BS(n,e,t,r,o.extractedUrl,i,s).pipe(xe(({state:a,tree:c})=>Re(X({},o),{targetSnapshot:a,urlAfterRedirects:c}))))}function zS(n,e){return St(t=>{let{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return ie(t);let s=new Set(i.map(c=>c.route)),o=new Set;for(let c of s)if(!o.has(c))for(let l of TE(c))o.add(l);let a=0;return tt(o).pipe(Gn(c=>s.has(c)?$S(c,r,n,e):(c.data=Ol(c,c.parent,n).resolve,ie(void 0))),yt(()=>a++),Vf(1),St(c=>a===o.size?ie(t):Hn))})}function TE(n){let e=n.children.map(t=>TE(t)).flat();return[n,...e]}function $S(n,e,t,r){let i=n.routeConfig,s=n._resolve;return i?.title!==void 0&&!vE(i)&&(s[za]=i.title),qS(s,n,e,r).pipe(xe(o=>(n._resolvedData=o,n.data=Ol(n,n.parent,t).resolve,null)))}function qS(n,e,t,r){let i=L0(n);if(i.length===0)return ie({});let s={};return tt(i).pipe(St(o=>HS(n[o],e,t,r).pipe(Dr(),yt(a=>{if(a instanceof Ns)throw Bl(new Pr,a);s[o]=a}))),Vf(1),xe(()=>s),Bt(o=>DE(o)?Hn:xi(o)))}function HS(n,e,t,r){let i=$a(e)??r,s=Os(n,i),o=s.resolve?s.resolve(e,t):vt(i,()=>s(e,t));return Mr(o)}function B0(n){return Vt(e=>{let t=n(e);return t?tt(t).pipe(xe(()=>e)):ie(e)})}var tp=(()=>{class n{buildTitle(t){let r,i=t.root;for(;i!==void 0;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(s=>s.outlet===ue);return r}getResolvedTitleForRoute(t){return t.data[za]}static \u0275fac=function(r){return new(r||n)};static \u0275prov=ne({token:n,factory:()=>Q(IE),providedIn:"root"})}return n})(),IE=(()=>{class n extends tp{title;constructor(t){super(),this.title=t}updateTitle(t){let r=this.buildTitle(t);r!==void 0&&this.title.setTitle(r)}static \u0275fac=function(r){return new(r||n)(re(px))};static \u0275prov=ne({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Ni=new ae("",{providedIn:"root",factory:()=>({})}),np=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275cmp=gs({type:n,selectors:[["ng-component"]],exportAs:["emptyRouterOutlet"],decls:1,vars:0,template:function(r,i){r&1&&Di(0,"router-outlet")},dependencies:[J0],encapsulation:2})}return n})();function rp(n){let e=n.children&&n.children.map(rp),t=e?Re(X({},n),{children:e}):X({},n);return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==ue&&(t.component=np),t}var Bs=new ae(""),jl=(()=>{class n{componentLoaders=new WeakMap;childrenLoaders=new WeakMap;onLoadStartListener;onLoadEndListener;compiler=Q(Tc);loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return ie(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);let r=Mr(t.loadComponent()).pipe(xe(RE),yt(s=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=s}),Ei(()=>{this.componentLoaders.delete(t)})),i=new kf(r,()=>new Ot).pipe(Pf());return this.componentLoaders.set(t,i),i}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return ie({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);let s=SE(r,this.compiler,t,this.onLoadEndListener).pipe(Ei(()=>{this.childrenLoaders.delete(r)})),o=new kf(s,()=>new Ot).pipe(Pf());return this.childrenLoaders.set(r,o),o}static \u0275fac=function(r){return new(r||n)};static \u0275prov=ne({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function SE(n,e,t,r){return Mr(n.loadChildren()).pipe(xe(RE),St(i=>i instanceof e_||Array.isArray(i)?ie(i):tt(e.compileModuleAsync(i))),xe(i=>{r&&r(n);let s,o,a=!1;return Array.isArray(i)?(o=i,a=!0):(s=i.create(t).injector,o=s.get(Bs,[],{optional:!0,self:!0}).flat()),{routes:o.map(rp),injector:s}}))}function GS(n){return n&&typeof n=="object"&&"default"in n}function RE(n){return GS(n)?n.default:n}var zl=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=ne({token:n,factory:()=>Q(WS),providedIn:"root"})}return n})(),WS=(()=>{class n{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,r){return t}static \u0275fac=function(r){return new(r||n)};static \u0275prov=ne({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),ip=new ae(""),sp=new ae("");function FE(n,e,t){let r=n.get(sp),i=n.get(Ke);return n.get(Ct).runOutsideAngular(()=>{if(!i.startViewTransition||r.skipNextTransition)return r.skipNextTransition=!1,new Promise(l=>setTimeout(l));let s,o=new Promise(l=>{s=l}),a=i.startViewTransition(()=>(s(),KS(n))),{onViewTransitionCreated:c}=r;return c&&vt(n,()=>c({transition:a,from:e,to:t})),o})}function KS(n){return new Promise(e=>{Qv({read:()=>setTimeout(e)},{injector:n})})}var op=new ae(""),$l=(()=>{class n{currentNavigation=null;currentTransition=null;lastSuccessfulNavigation=null;events=new Ot;transitionAbortSubject=new Ot;configLoader=Q(jl);environmentInjector=Q(xn);destroyRef=Q(zf);urlSerializer=Q(Pi);rootContexts=Q(ki);location=Q(Sr);inputBindingEnabled=Q(qa,{optional:!0})!==null;titleStrategy=Q(tp);options=Q(Ni,{optional:!0})||{};paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly";urlHandlingStrategy=Q(zl);createViewTransition=Q(ip,{optional:!0});navigationErrorHandler=Q(op,{optional:!0});navigationId=0;get hasRequestedNavigation(){return this.navigationId!==0}transitions;afterPreactivation=()=>ie(void 0);rootComponentType=null;destroyed=!1;constructor(){let t=i=>this.events.next(new Il(i)),r=i=>this.events.next(new Sl(i));this.configLoader.onLoadEndListener=r,this.configLoader.onLoadStartListener=t,this.destroyRef.onDestroy(()=>{this.destroyed=!0})}complete(){this.transitions?.complete()}handleNavigationRequest(t){let r=++this.navigationId;this.transitions?.next(Re(X({},t),{extractedUrl:this.urlHandlingStrategy.extract(t.rawUrl),targetSnapshot:null,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null,id:r}))}setupNavigations(t){return this.transitions=new Xt(null),this.transitions.pipe(_n(r=>r!==null),Vt(r=>{let i=!1,s=!1;return ie(r).pipe(Vt(o=>{if(this.navigationId>r.id)return this.cancelNavigationTransition(r,"",Ft.SupersededByNewNavigation),Hn;this.currentTransition=r,this.currentNavigation={id:o.id,initialUrl:o.rawUrl,extractedUrl:o.extractedUrl,targetBrowserUrl:typeof o.extras.browserUrl=="string"?this.urlSerializer.parse(o.extras.browserUrl):o.extras.browserUrl,trigger:o.source,extras:o.extras,previousNavigation:this.lastSuccessfulNavigation?Re(X({},this.lastSuccessfulNavigation),{previousNavigation:null}):null};let a=!t.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),c=o.extras.onSameUrlNavigation??t.onSameUrlNavigation;if(!a&&c!=="reload"){let l="";return this.events.next(new Tn(o.id,this.urlSerializer.serialize(o.rawUrl),l,Rs.IgnoredSameUrlNavigation)),o.resolve(!1),Hn}if(this.urlHandlingStrategy.shouldProcessUrl(o.rawUrl))return ie(o).pipe(Vt(l=>(this.events.next(new Nr(l.id,this.urlSerializer.serialize(l.extractedUrl),l.source,l.restoredState)),l.id!==this.navigationId?Hn:Promise.resolve(l))),jS(this.environmentInjector,this.configLoader,this.rootComponentType,t.config,this.urlSerializer,this.paramsInheritanceStrategy),yt(l=>{r.targetSnapshot=l.targetSnapshot,r.urlAfterRedirects=l.urlAfterRedirects,this.currentNavigation=Re(X({},this.currentNavigation),{finalUrl:l.urlAfterRedirects});let h=new Ma(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(h)}));if(a&&this.urlHandlingStrategy.shouldProcessUrl(o.currentRawUrl)){let{id:l,extractedUrl:h,source:f,restoredState:p,extras:m}=o,y=new Nr(l,this.urlSerializer.serialize(h),f,p);this.events.next(y);let w=mE(this.rootComponentType).snapshot;return this.currentTransition=r=Re(X({},o),{targetSnapshot:w,urlAfterRedirects:h,extras:Re(X({},m),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=h,ie(r)}else{let l="";return this.events.next(new Tn(o.id,this.urlSerializer.serialize(o.extractedUrl),l,Rs.IgnoredByUrlHandlingStrategy)),o.resolve(!1),Hn}}),yt(o=>{let a=new Cl(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects),o.targetSnapshot);this.events.next(a)}),xe(o=>(this.currentTransition=r=Re(X({},o),{guards:aS(o.targetSnapshot,o.currentSnapshot,this.rootContexts)}),r)),vS(this.environmentInjector,o=>this.events.next(o)),yt(o=>{if(r.guardsResult=o.guardsResult,o.guardsResult&&typeof o.guardsResult!="boolean")throw Bl(this.urlSerializer,o.guardsResult);let a=new Al(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects),o.targetSnapshot,!!o.guardsResult);this.events.next(a)}),_n(o=>o.guardsResult?!0:(this.cancelNavigationTransition(o,"",Ft.GuardRejected),!1)),B0(o=>{if(o.guards.canActivateChecks.length!==0)return ie(o).pipe(yt(a=>{let c=new bl(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(a.urlAfterRedirects),a.targetSnapshot);this.events.next(c)}),Vt(a=>{let c=!1;return ie(a).pipe(zS(this.paramsInheritanceStrategy,this.environmentInjector),yt({next:()=>c=!0,complete:()=>{c||this.cancelNavigationTransition(a,"",Ft.NoDataFromResolver)}}))}),yt(a=>{let c=new Tl(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(a.urlAfterRedirects),a.targetSnapshot);this.events.next(c)}))}),B0(o=>{let a=c=>{let l=[];c.routeConfig?.loadComponent&&!c.routeConfig._loadedComponent&&l.push(this.configLoader.loadComponent(c.routeConfig).pipe(yt(h=>{c.component=h}),xe(()=>{})));for(let h of c.children)l.push(...a(h));return l};return mc(a(o.targetSnapshot.root)).pipe(Bf(null),ds(1))}),B0(()=>this.afterPreactivation()),Vt(()=>{let{currentSnapshot:o,targetSnapshot:a}=r,c=this.createViewTransition?.(this.environmentInjector,o.root,a.root);return c?tt(c).pipe(xe(()=>r)):ie(r)}),xe(o=>{let a=nS(t.routeReuseStrategy,o.targetSnapshot,o.currentRouterState);return this.currentTransition=r=Re(X({},o),{targetRouterState:a}),this.currentNavigation.targetRouterState=a,r}),yt(()=>{this.events.next(new Oa)}),oS(this.rootContexts,t.routeReuseStrategy,o=>this.events.next(o),this.inputBindingEnabled),ds(1),yt({next:o=>{i=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new qt(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects))),this.titleStrategy?.updateTitle(o.targetRouterState.snapshot),o.resolve(!0)},complete:()=>{i=!0}}),Lv(this.transitionAbortSubject.pipe(yt(o=>{throw o}))),Ei(()=>{!i&&!s&&this.cancelNavigationTransition(r,"",Ft.SupersededByNewNavigation),this.currentTransition?.id===r.id&&(this.currentNavigation=null,this.currentTransition=null)}),Bt(o=>{if(this.destroyed)return r.resolve(!1),Hn;if(s=!0,wE(o))this.events.next(new An(r.id,this.urlSerializer.serialize(r.extractedUrl),o.message,o.cancellationCode)),sS(o)?this.events.next(new ks(o.url,o.navigationBehaviorOptions)):r.resolve(!1);else{let a=new Fs(r.id,this.urlSerializer.serialize(r.extractedUrl),o,r.targetSnapshot??void 0);try{let c=vt(this.environmentInjector,()=>this.navigationErrorHandler?.(a));if(c instanceof Ns){let{message:l,cancellationCode:h}=Bl(this.urlSerializer,c);this.events.next(new An(r.id,this.urlSerializer.serialize(r.extractedUrl),l,h)),this.events.next(new ks(c.redirectTo,c.navigationBehaviorOptions))}else throw this.events.next(a),o}catch(c){this.options.resolveNavigationPromiseOnError?r.resolve(!1):r.reject(c)}}return Hn}))}))}cancelNavigationTransition(t,r,i){let s=new An(t.id,this.urlSerializer.serialize(t.extractedUrl),r,i);this.events.next(s),t.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let t=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),r=this.currentNavigation?.targetBrowserUrl??this.currentNavigation?.extractedUrl;return t.toString()!==r?.toString()&&!this.currentNavigation?.extras.skipLocationChange}static \u0275fac=function(r){return new(r||n)};static \u0275prov=ne({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function QS(n){return n!==El}var PE=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=ne({token:n,factory:()=>Q(XS),providedIn:"root"})}return n})(),Ll=class{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}},XS=(()=>{class n extends Ll{static \u0275fac=(()=>{let t;return function(i){return(t||(t=na(n)))(i||n)}})();static \u0275prov=ne({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),kE=(()=>{class n{urlSerializer=Q(Pi);options=Q(Ni,{optional:!0})||{};canceledNavigationResolution=this.options.canceledNavigationResolution||"replace";location=Q(Sr);urlHandlingStrategy=Q(zl);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";currentUrlTree=new bn;getCurrentUrlTree(){return this.currentUrlTree}rawUrlTree=this.currentUrlTree;getRawUrlTree(){return this.rawUrlTree}createBrowserPath({finalUrl:t,initialUrl:r,targetBrowserUrl:i}){let s=t!==void 0?this.urlHandlingStrategy.merge(t,r):r,o=i??s;return o instanceof bn?this.urlSerializer.serialize(o):o}commitTransition({targetRouterState:t,finalUrl:r,initialUrl:i}){r&&t?(this.currentUrlTree=r,this.rawUrlTree=this.urlHandlingStrategy.merge(r,i),this.routerState=t):this.rawUrlTree=i}routerState=mE(null);getRouterState(){return this.routerState}stateMemento=this.createStateMemento();updateStateMemento(){this.stateMemento=this.createStateMemento()}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}resetInternalState({finalUrl:t}){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t??this.rawUrlTree)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=ne({token:n,factory:()=>Q(YS),providedIn:"root"})}return n})(),YS=(()=>{class n extends kE{currentPageId=0;lastSuccessfulId=-1;restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}registerNonRouterCurrentEntryChangeListener(t){return this.location.subscribe(r=>{r.type==="popstate"&&setTimeout(()=>{t(r.url,r.state,"popstate")})})}handleRouterEvent(t,r){t instanceof Nr?this.updateStateMemento():t instanceof Tn?this.commitTransition(r):t instanceof Ma?this.urlUpdateStrategy==="eager"&&(r.extras.skipLocationChange||this.setBrowserUrl(this.createBrowserPath(r),r)):t instanceof Oa?(this.commitTransition(r),this.urlUpdateStrategy==="deferred"&&!r.extras.skipLocationChange&&this.setBrowserUrl(this.createBrowserPath(r),r)):t instanceof An&&(t.code===Ft.GuardRejected||t.code===Ft.NoDataFromResolver)?this.restoreHistory(r):t instanceof Fs?this.restoreHistory(r,!0):t instanceof qt&&(this.lastSuccessfulId=t.id,this.currentPageId=this.browserPageId)}setBrowserUrl(t,{extras:r,id:i}){let{replaceUrl:s,state:o}=r;if(this.location.isCurrentPathEqualTo(t)||s){let a=this.browserPageId,c=X(X({},o),this.generateNgRouterState(i,a));this.location.replaceState(t,"",c)}else{let a=X(X({},o),this.generateNgRouterState(i,this.browserPageId+1));this.location.go(t,"",a)}}restoreHistory(t,r=!1){if(this.canceledNavigationResolution==="computed"){let i=this.browserPageId,s=this.currentPageId-i;s!==0?this.location.historyGo(s):this.getCurrentUrlTree()===t.finalUrl&&s===0&&(this.resetInternalState(t),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(r&&this.resetInternalState(t),this.resetUrlToCurrentUrlTree())}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.getRawUrlTree()),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,r){return this.canceledNavigationResolution==="computed"?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}static \u0275fac=(()=>{let t;return function(i){return(t||(t=na(n)))(i||n)}})();static \u0275prov=ne({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function ql(n,e){n.events.pipe(_n(t=>t instanceof qt||t instanceof An||t instanceof Fs||t instanceof Tn),xe(t=>t instanceof qt||t instanceof Tn?0:(t instanceof An?t.code===Ft.Redirect||t.code===Ft.SupersededByNewNavigation:!1)?2:1),_n(t=>t!==2),ds(1)).subscribe(()=>{e()})}var ZS={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},JS={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},In=(()=>{class n{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}disposed=!1;nonRouterCurrentEntryChangeSubscription;console=Q(r_);stateManager=Q(kE);options=Q(Ni,{optional:!0})||{};pendingTasks=Q(ra);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";navigationTransitions=Q($l);urlSerializer=Q(Pi);location=Q(Sr);urlHandlingStrategy=Q(zl);_events=new Ot;get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}navigated=!1;routeReuseStrategy=Q(PE);onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore";config=Q(Bs,{optional:!0})?.flat()??[];componentInputBindingEnabled=!!Q(qa,{optional:!0});constructor(){this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this).subscribe({error:t=>{this.console.warn(t)}}),this.subscribeToNavigationEvents()}eventsSubscription=new Iv;subscribeToNavigationEvents(){let t=this.navigationTransitions.events.subscribe(r=>{try{let i=this.navigationTransitions.currentTransition,s=this.navigationTransitions.currentNavigation;if(i!==null&&s!==null){if(this.stateManager.handleRouterEvent(r,s),r instanceof An&&r.code!==Ft.Redirect&&r.code!==Ft.SupersededByNewNavigation)this.navigated=!0;else if(r instanceof qt)this.navigated=!0;else if(r instanceof ks){let o=r.navigationBehaviorOptions,a=this.urlHandlingStrategy.merge(r.url,i.currentRawUrl),c=X({browserUrl:i.extras.browserUrl,info:i.extras.info,skipLocationChange:i.extras.skipLocationChange,replaceUrl:i.extras.replaceUrl||this.urlUpdateStrategy==="eager"||QS(i.source)},o);this.scheduleNavigation(a,El,null,c,{resolve:i.resolve,reject:i.reject,promise:i.promise})}}tR(r)&&this._events.next(r)}catch(i){this.navigationTransitions.transitionAbortSubject.next(i)}});this.eventsSubscription.add(t)}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),El,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((t,r,i)=>{this.navigateToSyncWithBrowser(t,i,r)})}navigateToSyncWithBrowser(t,r,i){let s={replaceUrl:!0},o=i?.navigationId?i:null;if(i){let c=X({},i);delete c.navigationId,delete c.\u0275routerPageId,Object.keys(c).length!==0&&(s.state=c)}let a=this.parseUrl(t);this.scheduleNavigation(a,r,o,s)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(t){this.config=t.map(rp),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this._events.unsubscribe(),this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(t,r={}){let{relativeTo:i,queryParams:s,fragment:o,queryParamsHandling:a,preserveFragment:c}=r,l=c?this.currentUrlTree.fragment:o,h=null;switch(a??this.options.defaultQueryParamsHandling){case"merge":h=X(X({},this.currentUrlTree.queryParams),s);break;case"preserve":h=this.currentUrlTree.queryParams;break;default:h=s||null}h!==null&&(h=this.removeEmptyProps(h));let f;try{let p=i?i.snapshot:this.routerState.snapshot.root;f=dE(p)}catch{(typeof t[0]!="string"||t[0][0]!=="/")&&(t=[]),f=this.currentUrlTree.root}return fE(f,t,h,l??null)}navigateByUrl(t,r={skipLocationChange:!1}){let i=kr(t)?t:this.parseUrl(t),s=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(s,El,null,r)}navigate(t,r={skipLocationChange:!1}){return eR(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){try{return this.urlSerializer.parse(t)}catch{return this.urlSerializer.parse("/")}}isActive(t,r){let i;if(r===!0?i=X({},ZS):r===!1?i=X({},JS):i=r,kr(t))return Wx(this.currentUrlTree,t,i);let s=this.parseUrl(t);return Wx(this.currentUrlTree,s,i)}removeEmptyProps(t){return Object.entries(t).reduce((r,[i,s])=>(s!=null&&(r[i]=s),r),{})}scheduleNavigation(t,r,i,s,o){if(this.disposed)return Promise.resolve(!1);let a,c,l;o?(a=o.resolve,c=o.reject,l=o.promise):l=new Promise((f,p)=>{a=f,c=p});let h=this.pendingTasks.add();return ql(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(h))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:t,extras:s,resolve:a,reject:c,promise:l,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),l.catch(f=>Promise.reject(f))}static \u0275fac=function(r){return new(r||n)};static \u0275prov=ne({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function eR(n){for(let e=0;e<n.length;e++)if(n[e]==null)throw new fe(4008,!1)}function tR(n){return!(n instanceof Oa)&&!(n instanceof ks)}var Hl=(()=>{class n{router;route;tabIndexAttribute;renderer;el;locationStrategy;href=null;target;queryParams;fragment;queryParamsHandling;state;info;relativeTo;isAnchorElement;subscription;onChanges=new Ot;constructor(t,r,i,s,o,a){this.router=t,this.route=r,this.tabIndexAttribute=i,this.renderer=s,this.el=o,this.locationStrategy=a;let c=o.nativeElement.tagName?.toLowerCase();this.isAnchorElement=c==="a"||c==="area",this.isAnchorElement?this.subscription=t.events.subscribe(l=>{l instanceof qt&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}preserveFragment=!1;skipLocationChange=!1;replaceUrl=!1;setTabIndexIfNotOnNativeEl(t){this.tabIndexAttribute!=null||this.isAnchorElement||this.applyAttributeValue("tabindex",t)}ngOnChanges(t){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}routerLinkInput=null;set routerLink(t){t==null?(this.routerLinkInput=null,this.setTabIndexIfNotOnNativeEl(null)):(kr(t)?this.routerLinkInput=t:this.routerLinkInput=Array.isArray(t)?t:[t],this.setTabIndexIfNotOnNativeEl("0"))}onClick(t,r,i,s,o){let a=this.urlTree;if(a===null||this.isAnchorElement&&(t!==0||r||i||s||o||typeof this.target=="string"&&this.target!="_self"))return!0;let c={skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state,info:this.info};return this.router.navigateByUrl(a,c),!this.isAnchorElement}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){let t=this.urlTree;this.href=t!==null&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(t)):null;let r=this.href===null?null:Yv(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",r)}applyAttributeValue(t,r){let i=this.renderer,s=this.el.nativeElement;r!==null?i.setAttribute(s,t,r):i.removeAttribute(s,t)}get urlTree(){return this.routerLinkInput===null?null:kr(this.routerLinkInput)?this.routerLinkInput:this.router.createUrlTree(this.routerLinkInput,{relativeTo:this.relativeTo!==void 0?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}static \u0275fac=function(r){return new(r||n)(pe(In),pe(Jn),jf("tabindex"),pe(Ir),pe(br),pe(un))};static \u0275dir=lt({type:n,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(r,i){r&1&&Qn("click",function(o){return i.onClick(o.button,o.ctrlKey,o.shiftKey,o.altKey,o.metaKey)}),r&2&&Xf("target",i.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",info:"info",relativeTo:"relativeTo",preserveFragment:[2,"preserveFragment","preserveFragment",ms],skipLocationChange:[2,"skipLocationChange","skipLocationChange",ms],replaceUrl:[2,"replaceUrl","replaceUrl",ms],routerLink:"routerLink"},features:[Wn]})}return n})(),nR=(()=>{class n{router;element;renderer;cdr;link;links;classes=[];routerEventsSubscription;linkInputChangesSubscription;_isActive=!1;get isActive(){return this._isActive}routerLinkActiveOptions={exact:!1};ariaCurrentWhenActive;isActiveChange=new Yt;constructor(t,r,i,s,o){this.router=t,this.element=r,this.renderer=i,this.cdr=s,this.link=o,this.routerEventsSubscription=t.events.subscribe(a=>{a instanceof qt&&this.update()})}ngAfterContentInit(){ie(this.links.changes,ie(null)).pipe(ta()).subscribe(t=>{this.update(),this.subscribeToEachLinkOnChanges()})}subscribeToEachLinkOnChanges(){this.linkInputChangesSubscription?.unsubscribe();let t=[...this.links.toArray(),this.link].filter(r=>!!r).map(r=>r.onChanges);this.linkInputChangesSubscription=tt(t).pipe(ta()).subscribe(r=>{this._isActive!==this.isLinkActive(this.router)(r)&&this.update()})}set routerLinkActive(t){let r=Array.isArray(t)?t:t.split(" ");this.classes=r.filter(i=>!!i)}ngOnChanges(t){this.update()}ngOnDestroy(){this.routerEventsSubscription.unsubscribe(),this.linkInputChangesSubscription?.unsubscribe()}update(){!this.links||!this.router.navigated||queueMicrotask(()=>{let t=this.hasActiveLinks();this.classes.forEach(r=>{t?this.renderer.addClass(this.element.nativeElement,r):this.renderer.removeClass(this.element.nativeElement,r)}),t&&this.ariaCurrentWhenActive!==void 0?this.renderer.setAttribute(this.element.nativeElement,"aria-current",this.ariaCurrentWhenActive.toString()):this.renderer.removeAttribute(this.element.nativeElement,"aria-current"),this._isActive!==t&&(this._isActive=t,this.cdr.markForCheck(),this.isActiveChange.emit(t))})}isLinkActive(t){let r=rR(this.routerLinkActiveOptions)?this.routerLinkActiveOptions:this.routerLinkActiveOptions.exact||!1;return i=>{let s=i.urlTree;return s?t.isActive(s,r):!1}}hasActiveLinks(){let t=this.isLinkActive(this.router);return this.link&&t(this.link)||this.links.some(t)}static \u0275fac=function(r){return new(r||n)(pe(In),pe(br),pe(Ir),pe(Ci),pe(Hl,8))};static \u0275dir=lt({type:n,selectors:[["","routerLinkActive",""]],contentQueries:function(r,i,s){if(r&1&&c_(s,Hl,5),r&2){let o;l_(o=h_())&&(i.links=o)}},inputs:{routerLinkActiveOptions:"routerLinkActiveOptions",ariaCurrentWhenActive:"ariaCurrentWhenActive",routerLinkActive:"routerLinkActive"},outputs:{isActiveChange:"isActiveChange"},exportAs:["routerLinkActive"],features:[Wn]})}return n})();function rR(n){return!!n.paths}var Ga=class{};var NE=(()=>{class n{router;injector;preloadingStrategy;loader;subscription;constructor(t,r,i,s,o){this.router=t,this.injector=i,this.preloadingStrategy=s,this.loader=o}setUpPreloading(){this.subscription=this.router.events.pipe(_n(t=>t instanceof qt),Gn(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){let i=[];for(let s of r){s.providers&&!s._injector&&(s._injector=wc(s.providers,t,`Route: ${s.path}`));let o=s._injector??t,a=s._loadedInjector??o;(s.loadChildren&&!s._loadedRoutes&&s.canLoad===void 0||s.loadComponent&&!s._loadedComponent)&&i.push(this.preloadConfig(o,s)),(s.children||s._loadedRoutes)&&i.push(this.processRoutes(a,s.children??s._loadedRoutes))}return tt(i).pipe(ta())}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>{let i;r.loadChildren&&r.canLoad===void 0?i=this.loader.loadChildren(t,r):i=ie(null);let s=i.pipe(St(o=>o===null?ie(void 0):(r._loadedRoutes=o.routes,r._loadedInjector=o.injector,this.processRoutes(o.injector??t,o.routes))));if(r.loadComponent&&!r._loadedComponent){let o=this.loader.loadComponent(r);return tt([s,o]).pipe(ta())}else return s})}static \u0275fac=function(r){return new(r||n)(re(In),re(Tc),re(xn),re(Ga),re(jl))};static \u0275prov=ne({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),ME=new ae(""),iR=(()=>{class n{urlSerializer;transitions;viewportScroller;zone;options;routerEventsSubscription;scrollEventsSubscription;lastId=0;lastSource="imperative";restoredId=0;store={};constructor(t,r,i,s,o={}){this.urlSerializer=t,this.transitions=r,this.viewportScroller=i,this.zone=s,this.options=o,o.scrollPositionRestoration||="disabled",o.anchorScrolling||="disabled"}init(){this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof Nr?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof qt?(this.lastId=t.id,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.urlAfterRedirects).fragment)):t instanceof Tn&&t.code===Rs.IgnoredSameUrlNavigation&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof Ps&&(t.position?this.options.scrollPositionRestoration==="top"?this.viewportScroller.scrollToPosition([0,0]):this.options.scrollPositionRestoration==="enabled"&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&this.options.anchorScrolling==="enabled"?this.viewportScroller.scrollToAnchor(t.anchor):this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new Ps(t,this.lastSource==="popstate"?this.store[this.restoredId]:null,r))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}static \u0275fac=function(r){Jv()};static \u0275prov=ne({token:n,factory:n.\u0275fac})}return n})();function sR(n){return n.routerState.root}function Wa(n,e){return{\u0275kind:n,\u0275providers:e}}function oR(){let n=Q(Ar);return e=>{let t=n.get(o_);if(e!==t.components[0])return;let r=n.get(In),i=n.get(OE);n.get(up)===1&&r.initialNavigation(),n.get(LE,null,Lf.Optional)?.setUpPreloading(),n.get(ME,null,Lf.Optional)?.init(),r.resetRootComponentType(t.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var OE=new ae("",{factory:()=>new Ot}),up=new ae("",{providedIn:"root",factory:()=>1});function BE(){let n=[{provide:up,useValue:0},Qf(()=>{let e=Q(Ar);return e.get(i0,Promise.resolve()).then(()=>new Promise(r=>{let i=e.get(In),s=e.get(OE);ql(i,()=>{r(!0)}),e.get($l).afterPreactivation=()=>(r(!0),s.closed?ie(void 0):s),i.initialNavigation()}))})];return Wa(2,n)}function VE(){let n=[Qf(()=>{Q(In).setUpLocationChangeListener()}),{provide:up,useValue:2}];return Wa(3,n)}var LE=new ae("");function UE(n){return Wa(0,[{provide:LE,useExisting:NE},{provide:Ga,useExisting:n}])}function jE(){return Wa(8,[ep,{provide:qa,useExisting:ep}])}function zE(n){Gf("NgRouterViewTransitions");let e=[{provide:ip,useValue:FE},{provide:sp,useValue:X({skipNextTransition:!!n?.skipInitialTransition},n)}];return Wa(9,e)}var $E=[Sr,{provide:Pi,useClass:Pr},In,ki,{provide:Jn,useFactory:sR,deps:[In]},jl,[]],cp=(()=>{class n{constructor(){}static forRoot(t,r){return{ngModule:n,providers:[$E,[],{provide:Bs,multi:!0,useValue:t},[],r?.errorHandler?{provide:op,useValue:r.errorHandler}:[],{provide:Ni,useValue:r||{}},r?.useHash?uR():cR(),aR(),r?.preloadingStrategy?UE(r.preloadingStrategy).\u0275providers:[],r?.initialNavigation?lR(r):[],r?.bindToComponentInputs?jE().\u0275providers:[],r?.enableViewTransitions?zE().\u0275providers:[],hR()]}}static forChild(t){return{ngModule:n,providers:[{provide:Bs,multi:!0,useValue:t}]}}static \u0275fac=function(r){return new(r||n)};static \u0275mod=Ut({type:n});static \u0275inj=Lt({})}return n})();function aR(){return{provide:ME,useFactory:()=>{let n=Q($_),e=Q(Ct),t=Q(Ni),r=Q($l),i=Q(Pi);return t.scrollOffset&&n.setOffset(t.scrollOffset),new iR(i,r,n,e,t)}}}function uR(){return{provide:un,useClass:u0}}function cR(){return{provide:un,useClass:Lc}}function lR(n){return[n.initialNavigation==="disabled"?VE().\u0275providers:[],n.initialNavigation==="enabledBlocking"?BE().\u0275providers:[]]}var ap=new ae("");function hR(){return[{provide:ap,useFactory:oR},{provide:s_,multi:!0,useExisting:ap}]}function dR(n,e){if(n&1){let t=a_();on(0,"div",8),Qn("click",function(){let i=$v(t).$implicit,s=u_();return qv(s.realizarAccion(i.label,i.value))}),on(1,"div",9),Di(2,"img",10),Kn(),on(3,"span",11),aa(4),Kn()()}if(n&2){let t=e.$implicit;Ec(2),Yf("src",t.icon,Xv),Ec(2),d_(t.value)}}var fR=[{icon:"https://firebasestorage.googleapis.com/v0/b/portfolio-549f8.appspot.com/o/portfolio%2Fwhatsapp.png?alt=media&token=e0e7b1e3-ea87-45aa-af0b-6fc1c4b24327",label:"whatsapp",value:"+569 94212670"},{icon:"https://firebasestorage.googleapis.com/v0/b/portfolio-549f8.appspot.com/o/portfolio%2Fring-phone.png?alt=media&token=fb7e3b9c-fa43-45dc-9380-56a37c1f4cfc",label:"phone",value:"9 26105950"},{icon:"https://firebasestorage.googleapis.com/v0/b/portfolio-549f8.appspot.com/o/portfolio%2Fgmail.png?alt=media&token=8d76c695-5669-449e-b155-77157cc58ad9",label:"email",value:"max.poblete2905@gmail.com"}],fO=(()=>{class n{constructor(){this.personalInformation=fR}ngOnInit(){}realizarAccion(t,r){switch(t){case"phone":window.location.href=`tel:+${r}`;break;case"whatsapp":window.open("https://web.whatsapp.com/","_blank");break;case"email":window.location.href=`mailto:${r}`;break}}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275cmp=gs({type:n,selectors:[["shared-contact-information"]],standalone:!1,decls:9,vars:1,consts:[[1,"bg-gray-700","rounded-lg","overflow-hidden","transition-all","duration-200","group","relative"],[1,"p-4"],[1,"flex","justify-between","items-center","mb-3"],[1,"text-lg","font-semibold","text-blue-400"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"h-4","w-4","text-gray-400","group-hover:text-blue-400","transition-colors"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M9 5l7 7-7 7"],[1,"space-y-3"],["class","flex items-center p-2 rounded hover:bg-gray-600 transition-colors cursor-pointer",3,"click",4,"ngFor","ngForOf"],[1,"flex","items-center","p-2","rounded","hover:bg-gray-600","transition-colors","cursor-pointer",3,"click"],[1,"h-8","w-8","mr-3","bg-gray-600","p-1.5","rounded-lg","flex","items-center","justify-center"],["alt","",1,"h-full","w-full","object-contain",3,"src"],[1,"text-sm","text-gray-300"]],template:function(r,i){r&1&&(on(0,"div",0)(1,"div",1)(2,"div",2)(3,"h2",3),aa(4,"Informaci\xF3n de Contacto"),Kn(),vc(),on(5,"svg",4),Di(6,"path",5),Kn()(),_c(),on(7,"div",6),n_(8,dR,5,2,"div",7),Kn()()()),r&2&&(Ec(8),Yf("ngForOf",i.personalInformation))},dependencies:[Kc],encapsulation:2})}}return n})();var pR="firebase",gR="11.6.0";Jt(pR,gR,"app");function lp(n){n===void 0&&(zv(lp),n=Q(Ar));let e=n.get(xc);return t=>new _i(r=>{let i=e.add(),s=!1;function o(){s||(i(),s=!0)}let a=t.subscribe({next:c=>{r.next(c),o()},complete:()=>{r.complete(),o()},error:c=>{r.error(c),o()}});return a.add(()=>{r.unsubscribe(),o()}),a})}var GE=new bc("ANGULARFIRE2_VERSION");var hp=(n,e)=>{let t=e?[e]:E_(),r=[];return t.forEach(i=>{i.container.getProvider(n).instances.forEach(o=>{r.includes(o)||r.push(o)})}),r},Vs=function(n){return n[n.SILENT=0]="SILENT",n[n.WARN=1]="WARN",n[n.VERBOSE=2]="VERBOSE",n}(Vs||{}),qE=Jf()&&typeof Zone<"u"?Vs.WARN:Vs.SILENT;var Gl=class{zone;delegate;constructor(e,t=Fv){this.zone=e,this.delegate=t}now(){return this.delegate.now()}schedule(e,t,r){let i=this.zone,s=function(o){i?i.runGuarded(()=>{e.apply(this,[o])}):e.apply(this,[o])};return this.delegate.schedule(s,t,r)}},dp=(()=>{class n{outsideAngular;insideAngular;constructor(){let t=Q(Ct);this.outsideAngular=t.runOutsideAngular(()=>new Gl(typeof Zone>"u"?void 0:Zone.current)),this.insideAngular=t.run(()=>new Gl(typeof Zone>"u"?void 0:Zone.current,Rv))}static \u0275fac=function(r){return new(r||n)};static \u0275prov=ne({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),HE=!1;function mR(n,e){!HE&&(qE>Vs.SILENT||Jf())&&(HE=!0,console.warn("Calling Firebase APIs outside of an Injection context may destabilize your application leading to subtle change-detection and hydration bugs. Find more at https://github.com/angular/angularfire/blob/main/docs/zones.md")),qE>=e&&console.warn(`Firebase API called outside injection context: ${n.name}`)}function yR(n){let e=Q(Ct,{optional:!0});return e?e.runOutsideAngular(()=>n()):n()}function Mi(n){let e=Q(Ct,{optional:!0});return e?e.run(()=>n()):n()}var vR=(n,e,t)=>(...r)=>(e&&setTimeout(e,0),vt(t,()=>Mi(()=>n.apply(void 0,r)))),Ka=(n,e,t)=>(t||=e?Vs.WARN:Vs.VERBOSE,function(){let r,i=arguments,s,o,a;try{s=Q(dp),o=Q(xc),a=Q(xn)}catch{return mR(n,t),n.apply(this,i)}for(let l=0;l<arguments.length;l++)typeof i[l]=="function"&&(e&&(r||=Mi(()=>o.add())),i[l]=vR(i[l],r,a));let c=yR(()=>n.apply(this,i));return e?c instanceof _i?c.pipe(Mf(s.outsideAngular),Nf(s.insideAngular),lp(a)):c instanceof Promise?Mi(()=>new Promise((l,h)=>{o.run(()=>c).then(f=>vt(a,()=>Mi(()=>l(f))),f=>vt(a,()=>Mi(()=>h(f))))})):typeof c=="function"&&r?function(){return setTimeout(r,0),c.apply(this,arguments)}:Mi(()=>c):c instanceof _i?c.pipe(Mf(s.outsideAngular),Nf(s.insideAngular)):Mi(()=>c)});var _R=new Map,xR={activated:!1,tokenObservers:[]},ER={initialized:!1,enabled:!1};function hn(n){return _R.get(n)||Object.assign({},xR)}function XE(){return ER}var wR="https://content-firebaseappcheck.googleapis.com/v1";var DR="exchangeDebugToken",WE={OFFSET_DURATION:5*60*1e3,RETRIAL_MIN_WAIT:30*1e3,RETRIAL_MAX_WAIT:16*60*1e3},zO=24*60*60*1e3;var gp=class{constructor(e,t,r,i,s){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=s,this.pending=null,this.nextErrorWaitInterval=i,i>s)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){return O(this,null,function*(){this.stop();try{this.pending=new t0,this.pending.promise.catch(t=>{}),yield CR(this.getNextRun(e)),this.pending.resolve(),yield this.pending.promise,this.pending=new t0,this.pending.promise.catch(t=>{}),yield this.operation(),this.pending.resolve(),yield this.pending.promise,this.process(!0).catch(()=>{})}catch(t){this.retryPolicy(t)?this.process(!1).catch(()=>{}):this.stop()}})}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{let t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}};function CR(n){return new Promise(e=>{setTimeout(e,n)})}var AR={"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.","initial-throttle":"{$httpStatus} error. Attempts allowed again after {$time}",throttled:"Requests throttled due to previous {$httpStatus} error. Attempts allowed again after {$time}"},Or=new x_("appCheck","AppCheck",AR);function YE(n){if(!hn(n).activated)throw Or.create("use-before-activation",{appName:n.name})}function ZE(r,i){return O(this,arguments,function*({url:n,body:e},t){let s={"Content-Type":"application/json"},o=t.getImmediate({optional:!0});if(o){let m=yield o.getHeartbeatsHeader();m&&(s["X-Firebase-Client"]=m)}let a={method:"POST",body:JSON.stringify(e),headers:s},c;try{c=yield fetch(n,a)}catch(m){throw Or.create("fetch-network-error",{originalErrorMessage:m?.message})}if(c.status!==200)throw Or.create("fetch-status-error",{httpStatus:c.status});let l;try{l=yield c.json()}catch(m){throw Or.create("fetch-parse-error",{originalErrorMessage:m?.message})}let h=l.ttl.match(/^([\d.]+)(s)$/);if(!h||!h[2]||isNaN(Number(h[1])))throw Or.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${l.ttl}`});let f=Number(h[1])*1e3,p=Date.now();return{token:l.token,expireTimeMillis:p+f,issuedAtTimeMillis:p}})}function JE(n,e){let{projectId:t,appId:r,apiKey:i}=n.options;return{url:`${wR}/projects/${t}/apps/${r}:${DR}?key=${i}`,body:{debug_token:e}}}var bR="firebase-app-check-database",TR=1,mp="firebase-app-check-store";var Wl=null;function IR(){return Wl||(Wl=new Promise((n,e)=>{try{let t=indexedDB.open(bR,TR);t.onsuccess=r=>{n(r.target.result)},t.onerror=r=>{var i;e(Or.create("storage-open",{originalErrorMessage:(i=r.target.error)===null||i===void 0?void 0:i.message}))},t.onupgradeneeded=r=>{let i=r.target.result;switch(r.oldVersion){case 0:i.createObjectStore(mp,{keyPath:"compositeKey"})}}}catch(t){e(Or.create("storage-open",{originalErrorMessage:t?.message}))}}),Wl)}function SR(n,e){return RR(FR(n),e)}function RR(n,e){return O(this,null,function*(){let r=(yield IR()).transaction(mp,"readwrite"),s=r.objectStore(mp).put({compositeKey:n,value:e});return new Promise((o,a)=>{s.onsuccess=c=>{o()},r.onerror=c=>{var l;a(Or.create("storage-set",{originalErrorMessage:(l=c.target.error)===null||l===void 0?void 0:l.message}))}})})}function FR(n){return`${n.options.appId}-${n.name}`}var Qa=new Pc("@firebase/app-check");function fp(n,e){return Sc()?SR(n,e).catch(t=>{Qa.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function ew(){return XE().enabled}function tw(){return O(this,null,function*(){let n=XE();if(n.enabled&&n.token)return n.token.promise;throw Error(`
            Can't get debug token in production mode.
        `)})}var PR={error:"UNKNOWN_ERROR"};function kR(n){return __.encodeString(JSON.stringify(n),!1)}function yp(n,e=!1,t=!1){return O(this,null,function*(){let r=n.app;YE(r);let i=hn(r),s=i.token,o;if(s&&!Xa(s)&&(i.token=void 0,s=void 0),!s){let l=yield i.cachedTokenPromise;l&&(Xa(l)?s=l:yield fp(r,void 0))}if(!e&&s&&Xa(s))return{token:s.token};let a=!1;if(ew())try{i.exchangeTokenPromise||(i.exchangeTokenPromise=ZE(JE(r,yield tw()),n.heartbeatServiceProvider).finally(()=>{i.exchangeTokenPromise=void 0}),a=!0);let l=yield i.exchangeTokenPromise;return yield fp(r,l),i.token=l,{token:l.token}}catch(l){return l.code==="appCheck/throttled"||l.code==="appCheck/initial-throttle"?Qa.warn(l.message):t&&Qa.error(l),pp(l)}try{i.exchangeTokenPromise||(i.exchangeTokenPromise=i.provider.getToken().finally(()=>{i.exchangeTokenPromise=void 0}),a=!0),s=yield hn(r).exchangeTokenPromise}catch(l){l.code==="appCheck/throttled"||l.code==="appCheck/initial-throttle"?Qa.warn(l.message):t&&Qa.error(l),o=l}let c;return s?o?Xa(s)?c={token:s.token,internalError:o}:c=pp(o):(c={token:s.token},i.token=s,yield fp(r,s)):c=pp(o),a&&BR(r,c),c})}function NR(n){return O(this,null,function*(){let e=n.app;YE(e);let{provider:t}=hn(e);if(ew()){let r=yield tw(),{token:i}=yield ZE(JE(e,r),n.heartbeatServiceProvider);return{token:i}}else{let{token:r}=yield t.getToken();return{token:r}}})}function MR(n,e,t,r){let{app:i}=n,s=hn(i),o={next:t,error:r,type:e};if(s.tokenObservers=[...s.tokenObservers,o],s.token&&Xa(s.token)){let a=s.token;Promise.resolve().then(()=>{t({token:a.token}),KE(n)}).catch(()=>{})}s.cachedTokenPromise.then(()=>KE(n))}function nw(n,e){let t=hn(n),r=t.tokenObservers.filter(i=>i.next!==e);r.length===0&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),t.tokenObservers=r}function KE(n){let{app:e}=n,t=hn(e),r=t.tokenRefresher;r||(r=OR(n),t.tokenRefresher=r),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function OR(n){let{app:e}=n;return new gp(()=>O(this,null,function*(){let t=hn(e),r;if(t.token?r=yield yp(n,!0):r=yield yp(n),r.error)throw r.error;if(r.internalError)throw r.internalError}),()=>!0,()=>{let t=hn(e);if(t.token){let r=t.token.issuedAtTimeMillis+(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)*.5+3e5,i=t.token.expireTimeMillis-5*60*1e3;return r=Math.min(r,i),Math.max(0,r-Date.now())}else return 0},WE.RETRIAL_MIN_WAIT,WE.RETRIAL_MAX_WAIT)}function BR(n,e){let t=hn(n).tokenObservers;for(let r of t)try{r.type==="EXTERNAL"&&e.error!=null?r.error(e.error):r.next(e)}catch{}}function Xa(n){return n.expireTimeMillis-Date.now()>0}function pp(n){return{token:kR(PR),error:n}}var vp=class{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){let{tokenObservers:e}=hn(this.app);for(let t of e)nw(this.app,t.next);return Promise.resolve()}};function VR(n,e){return new vp(n,e)}function LR(n){return{getToken:e=>yp(n,e),getLimitedUseToken:()=>NR(n),addTokenListener:e=>MR(n,"INTERNAL",e),removeTokenListener:e=>nw(n.app,e)}}var UR="@firebase/app-check",jR="0.8.13";var zR="app-check",QE="app-check-internal";function $R(){bi(new Ai(zR,n=>{let e=n.getProvider("app").getImmediate(),t=n.getProvider("heartbeat");return VR(e,t)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(QE).initialize()})),bi(new Ai(QE,n=>{let e=n.getProvider("app-check").getImmediate();return LR(e)},"PUBLIC").setInstantiationMode("EXPLICIT")),Jt(UR,jR)}$R();var HR="app-check";var rw=class{constructor(){return hp(HR)}};var GR=["localhost","0.0.0.0","127.0.0.1"],tB=typeof window<"u"&&GR.includes(window.location.hostname);var dw="firebasestorage.googleapis.com",fw="storageBucket",WR=2*60*1e3,KR=10*60*1e3,QR=1e3;var Be=class n extends Rc{constructor(e,t,r=0){super(_p(e),`Firebase Storage: ${t} (${_p(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,n.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return _p(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}},Me=function(n){return n.UNKNOWN="unknown",n.OBJECT_NOT_FOUND="object-not-found",n.BUCKET_NOT_FOUND="bucket-not-found",n.PROJECT_NOT_FOUND="project-not-found",n.QUOTA_EXCEEDED="quota-exceeded",n.UNAUTHENTICATED="unauthenticated",n.UNAUTHORIZED="unauthorized",n.UNAUTHORIZED_APP="unauthorized-app",n.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",n.INVALID_CHECKSUM="invalid-checksum",n.CANCELED="canceled",n.INVALID_EVENT_NAME="invalid-event-name",n.INVALID_URL="invalid-url",n.INVALID_DEFAULT_BUCKET="invalid-default-bucket",n.NO_DEFAULT_BUCKET="no-default-bucket",n.CANNOT_SLICE_BLOB="cannot-slice-blob",n.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",n.NO_DOWNLOAD_URL="no-download-url",n.INVALID_ARGUMENT="invalid-argument",n.INVALID_ARGUMENT_COUNT="invalid-argument-count",n.APP_DELETED="app-deleted",n.INVALID_ROOT_OPERATION="invalid-root-operation",n.INVALID_FORMAT="invalid-format",n.INTERNAL_ERROR="internal-error",n.UNSUPPORTED_ENVIRONMENT="unsupported-environment",n}(Me||{});function _p(n){return"storage/"+n}function Sp(){let n="An unknown error occurred, please check the error payload for server response.";return new Be(Me.UNKNOWN,n)}function XR(n){return new Be(Me.OBJECT_NOT_FOUND,"Object '"+n+"' does not exist.")}function YR(n){return new Be(Me.QUOTA_EXCEEDED,"Quota for bucket '"+n+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function ZR(){let n="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new Be(Me.UNAUTHENTICATED,n)}function JR(){return new Be(Me.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function e2(n){return new Be(Me.UNAUTHORIZED,"User does not have permission to access '"+n+"'.")}function pw(){return new Be(Me.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function gw(){return new Be(Me.CANCELED,"User canceled the upload/download.")}function t2(n){return new Be(Me.INVALID_URL,"Invalid URL '"+n+"'.")}function n2(n){return new Be(Me.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+n+"'.")}function r2(){return new Be(Me.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+fw+"' property when initializing the app?")}function mw(){return new Be(Me.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function i2(){return new Be(Me.SERVER_FILE_WRONG_SIZE,"Server recorded incorrect upload file size, please retry the upload.")}function s2(){return new Be(Me.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function o2(n){return new Be(Me.UNSUPPORTED_ENVIRONMENT,`${n} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function Ep(n){return new Be(Me.INVALID_ARGUMENT,n)}function yw(){return new Be(Me.APP_DELETED,"The Firebase app was deleted.")}function a2(n){return new Be(Me.INVALID_ROOT_OPERATION,"The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Za(n,e){return new Be(Me.INVALID_FORMAT,"String does not match format '"+n+"': "+e)}function Ya(n){throw new Be(Me.INTERNAL_ERROR,"Internal error: "+n)}var Ht=class n{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){let e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let r;try{r=n.makeFromUrl(e,t)}catch{return new n(e,"")}if(r.path==="")return r;throw n2(e)}static makeFromUrl(e,t){let r=null,i="([A-Za-z0-9.\\-_]+)";function s(F){F.path.charAt(F.path.length-1)==="/"&&(F.path_=F.path_.slice(0,-1))}let o="(/(.*))?$",a=new RegExp("^gs://"+i+o,"i"),c={bucket:1,path:3};function l(F){F.path_=decodeURIComponent(F.path)}let h="v[A-Za-z0-9_]+",f=t.replace(/[.]/g,"\\."),p="(/([^?#]*).*)?$",m=new RegExp(`^https?://${f}/${h}/b/${i}/o${p}`,"i"),y={bucket:1,path:3},w=t===dw?"(?:storage.googleapis.com|storage.cloud.google.com)":t,E="([^?#]*)",x=new RegExp(`^https?://${w}/${i}/${E}`,"i"),R=[{regex:a,indices:c,postModify:s},{regex:m,indices:y,postModify:l},{regex:x,indices:{bucket:1,path:2},postModify:l}];for(let F=0;F<R.length;F++){let k=R[F],P=k.regex.exec(e);if(P){let T=P[k.indices.bucket],v=P[k.indices.path];v||(v=""),r=new n(T,v),k.postModify(r);break}}if(r==null)throw t2(e);return r}},wp=class{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}};function u2(n,e,t){let r=1,i=null,s=null,o=!1,a=0;function c(){return a===2}let l=!1;function h(...E){l||(l=!0,e.apply(null,E))}function f(E){i=setTimeout(()=>{i=null,n(m,c())},E)}function p(){s&&clearTimeout(s)}function m(E,...x){if(l){p();return}if(E){p(),h.call(null,E,...x);return}if(c()||o){p(),h.call(null,E,...x);return}r<64&&(r*=2);let R;a===1?(a=2,R=0):R=(r+Math.random())*1e3,f(R)}let y=!1;function w(E){y||(y=!0,p(),!l&&(i!==null?(E||(a=2),clearTimeout(i),f(0)):E||(a=1)))}return f(0),s=setTimeout(()=>{o=!0,w(!0)},t),w}function c2(n){n(!1)}function l2(n){return n!==void 0}function h2(n){return typeof n=="function"}function d2(n){return typeof n=="object"&&!Array.isArray(n)}function Yl(n){return typeof n=="string"||n instanceof String}function iw(n){return Rp()&&n instanceof Blob}function Rp(){return typeof Blob<"u"}function Dp(n,e,t,r){if(r<e)throw Ep(`Invalid value for '${n}'. Expected ${e} or greater.`);if(r>t)throw Ep(`Invalid value for '${n}'. Expected ${t} or less.`)}function Br(n,e,t){let r=e;return t==null&&(r=`https://${e}`),`${t}://${r}/v0${n}`}function vw(n){let e=encodeURIComponent,t="?";for(let r in n)if(n.hasOwnProperty(r)){let i=e(r)+"="+e(n[r]);t=t+i+"&"}return t=t.slice(0,-1),t}var js=function(n){return n[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT",n}(js||{});function _w(n,e){let t=n>=500&&n<600,i=[408,429].indexOf(n)!==-1,s=e.indexOf(n)!==-1;return t||i||s}var Cp=class{constructor(e,t,r,i,s,o,a,c,l,h,f,p=!0){this.url_=e,this.method_=t,this.headers_=r,this.body_=i,this.successCodes_=s,this.additionalRetryCodes_=o,this.callback_=a,this.errorCallback_=c,this.timeout_=l,this.progressCallback_=h,this.connectionFactory_=f,this.retry=p,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((m,y)=>{this.resolve_=m,this.reject_=y,this.start_()})}start_(){let e=(r,i)=>{if(i){r(!1,new Us(!1,null,!0));return}let s=this.connectionFactory_();this.pendingConnection_=s;let o=a=>{let c=a.loaded,l=a.lengthComputable?a.total:-1;this.progressCallback_!==null&&this.progressCallback_(c,l)};this.progressCallback_!==null&&s.addUploadProgressListener(o),s.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&s.removeUploadProgressListener(o),this.pendingConnection_=null;let a=s.getErrorCode()===js.NO_ERROR,c=s.getStatus();if(!a||_w(c,this.additionalRetryCodes_)&&this.retry){let h=s.getErrorCode()===js.ABORT;r(!1,new Us(!1,null,h));return}let l=this.successCodes_.indexOf(c)!==-1;r(!0,new Us(l,s))})},t=(r,i)=>{let s=this.resolve_,o=this.reject_,a=i.connection;if(i.wasSuccessCode)try{let c=this.callback_(a,a.getResponse());l2(c)?s(c):s()}catch(c){o(c)}else if(a!==null){let c=Sp();c.serverResponse=a.getErrorText(),this.errorCallback_?o(this.errorCallback_(a,c)):o(c)}else if(i.canceled){let c=this.appDelete_?yw():gw();o(c)}else{let c=pw();o(c)}};this.canceled_?t(!1,new Us(!1,null,!0)):this.backoffId_=u2(e,t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&c2(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}},Us=class{constructor(e,t,r){this.wasSuccessCode=e,this.connection=t,this.canceled=!!r}};function f2(n,e){e!==null&&e.length>0&&(n.Authorization="Firebase "+e)}function p2(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function g2(n,e){e&&(n["X-Firebase-GMPID"]=e)}function m2(n,e){e!==null&&(n["X-Firebase-AppCheck"]=e)}function y2(n,e,t,r,i,s,o=!0){let a=vw(n.urlParams),c=n.url+a,l=Object.assign({},n.headers);return g2(l,e),f2(l,t),p2(l,s),m2(l,r),new Cp(c,n.method,l,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,i,o)}function v2(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function _2(...n){let e=v2();if(e!==void 0){let t=new e;for(let r=0;r<n.length;r++)t.append(n[r]);return t.getBlob()}else{if(Rp())return new Blob(n);throw new Be(Me.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function x2(n,e,t){return n.webkitSlice?n.webkitSlice(e,t):n.mozSlice?n.mozSlice(e,t):n.slice?n.slice(e,t):null}function E2(n){if(typeof atob>"u")throw o2("base-64");return atob(n)}var Rn={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"},Ja=class{constructor(e,t){this.data=e,this.contentType=t||null}};function w2(n,e){switch(n){case Rn.RAW:return new Ja(xw(e));case Rn.BASE64:case Rn.BASE64URL:return new Ja(Ew(n,e));case Rn.DATA_URL:return new Ja(C2(e),A2(e))}throw Sp()}function xw(n){let e=[];for(let t=0;t<n.length;t++){let r=n.charCodeAt(t);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(t<n.length-1&&(n.charCodeAt(t+1)&64512)===56320))e.push(239,191,189);else{let s=r,o=n.charCodeAt(++t);r=65536|(s&1023)<<10|o&1023,e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(e)}function D2(n){let e;try{e=decodeURIComponent(n)}catch{throw Za(Rn.DATA_URL,"Malformed data URL.")}return xw(e)}function Ew(n,e){switch(n){case Rn.BASE64:{let i=e.indexOf("-")!==-1,s=e.indexOf("_")!==-1;if(i||s)throw Za(n,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case Rn.BASE64URL:{let i=e.indexOf("+")!==-1,s=e.indexOf("/")!==-1;if(i||s)throw Za(n,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let t;try{t=E2(e)}catch(i){throw i.message.includes("polyfill")?i:Za(n,"Invalid character found")}let r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}var Ql=class{constructor(e){this.base64=!1,this.contentType=null;let t=e.match(/^data:([^,]+)?,/);if(t===null)throw Za(Rn.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");let r=t[1]||null;r!=null&&(this.base64=b2(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}};function C2(n){let e=new Ql(n);return e.base64?Ew(Rn.BASE64,e.rest):D2(e.rest)}function A2(n){return new Ql(n).contentType}function b2(n,e){return n.length>=e.length?n.substring(n.length-e.length)===e:!1}var Xl=class n{constructor(e,t){let r=0,i="";iw(e)?(this.data_=e,r=e.size,i=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=i}size(){return this.size_}type(){return this.type_}slice(e,t){if(iw(this.data_)){let r=this.data_,i=x2(r,e,t);return i===null?null:new n(i)}else{let r=new Uint8Array(this.data_.buffer,e,t-e);return new n(r,!0)}}static getBlob(...e){if(Rp()){let t=e.map(r=>r instanceof n?r.data_:r);return new n(_2.apply(null,t))}else{let t=e.map(o=>Yl(o)?w2(Rn.RAW,o).data:o.data_),r=0;t.forEach(o=>{r+=o.byteLength});let i=new Uint8Array(r),s=0;return t.forEach(o=>{for(let a=0;a<o.length;a++)i[s++]=o[a]}),new n(i,!0)}}uploadData(){return this.data_}};function Fp(n){let e;try{e=JSON.parse(n)}catch{return null}return d2(e)?e:null}function T2(n){if(n.length===0)return null;let e=n.lastIndexOf("/");return e===-1?"":n.slice(0,e)}function I2(n,e){let t=e.split("/").filter(r=>r.length>0).join("/");return n.length===0?t:n+"/"+t}function ww(n){let e=n.lastIndexOf("/",n.length-2);return e===-1?n:n.slice(e+1)}function S2(n,e){return e}var ht=class{constructor(e,t,r,i){this.server=e,this.local=t||e,this.writable=!!r,this.xform=i||S2}},Kl=null;function R2(n){return!Yl(n)||n.length<2?n:ww(n)}function Zl(){if(Kl)return Kl;let n=[];n.push(new ht("bucket")),n.push(new ht("generation")),n.push(new ht("metageneration")),n.push(new ht("name","fullPath",!0));function e(s,o){return R2(o)}let t=new ht("name");t.xform=e,n.push(t);function r(s,o){return o!==void 0?Number(o):o}let i=new ht("size");return i.xform=r,n.push(i),n.push(new ht("timeCreated")),n.push(new ht("updated")),n.push(new ht("md5Hash",null,!0)),n.push(new ht("cacheControl",null,!0)),n.push(new ht("contentDisposition",null,!0)),n.push(new ht("contentEncoding",null,!0)),n.push(new ht("contentLanguage",null,!0)),n.push(new ht("contentType",null,!0)),n.push(new ht("metadata","customMetadata",!0)),Kl=n,Kl}function F2(n,e){function t(){let r=n.bucket,i=n.fullPath,s=new Ht(r,i);return e._makeStorageReference(s)}Object.defineProperty(n,"ref",{get:t})}function P2(n,e,t){let r={};r.type="file";let i=t.length;for(let s=0;s<i;s++){let o=t[s];r[o.local]=o.xform(r,e[o.server])}return F2(r,n),r}function Dw(n,e,t){let r=Fp(e);return r===null?null:P2(n,r,t)}function k2(n,e,t,r){let i=Fp(e);if(i===null||!Yl(i.downloadTokens))return null;let s=i.downloadTokens;if(s.length===0)return null;let o=encodeURIComponent;return s.split(",").map(l=>{let h=n.bucket,f=n.fullPath,p="/b/"+o(h)+"/o/"+o(f),m=Br(p,t,r),y=vw({alt:"media",token:l});return m+y})[0]}function Pp(n,e){let t={},r=e.length;for(let i=0;i<r;i++){let s=e[i];s.writable&&(t[s.server]=n[s.local])}return JSON.stringify(t)}var sw="prefixes",ow="items";function N2(n,e,t){let r={prefixes:[],items:[],nextPageToken:t.nextPageToken};if(t[sw])for(let i of t[sw]){let s=i.replace(/\/$/,""),o=n._makeStorageReference(new Ht(e,s));r.prefixes.push(o)}if(t[ow])for(let i of t[ow]){let s=n._makeStorageReference(new Ht(e,i.name));r.items.push(s)}return r}function M2(n,e,t){let r=Fp(t);return r===null?null:N2(n,e,r)}var dn=class{constructor(e,t,r,i){this.url=e,this.method=t,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}};function Fn(n){if(!n)throw Sp()}function Jl(n,e){function t(r,i){let s=Dw(n,i,e);return Fn(s!==null),s}return t}function O2(n,e){function t(r,i){let s=M2(n,e,i);return Fn(s!==null),s}return t}function B2(n,e){function t(r,i){let s=Dw(n,i,e);return Fn(s!==null),k2(s,i,n.host,n._protocol)}return t}function qs(n){function e(t,r){let i;return t.getStatus()===401?t.getErrorText().includes("Firebase App Check token is invalid")?i=JR():i=ZR():t.getStatus()===402?i=YR(n.bucket):t.getStatus()===403?i=e2(n.path):i=r,i.status=t.getStatus(),i.serverResponse=r.serverResponse,i}return e}function eh(n){let e=qs(n);function t(r,i){let s=e(r,i);return r.getStatus()===404&&(s=XR(n.path)),s.serverResponse=i.serverResponse,s}return t}function Cw(n,e,t){let r=e.fullServerUrl(),i=Br(r,n.host,n._protocol),s="GET",o=n.maxOperationRetryTime,a=new dn(i,s,Jl(n,t),o);return a.errorHandler=eh(e),a}function V2(n,e,t,r,i){let s={};e.isRoot?s.prefix="":s.prefix=e.path+"/",t&&t.length>0&&(s.delimiter=t),r&&(s.pageToken=r),i&&(s.maxResults=i);let o=e.bucketOnlyServerUrl(),a=Br(o,n.host,n._protocol),c="GET",l=n.maxOperationRetryTime,h=new dn(a,c,O2(n,e.bucket),l);return h.urlParams=s,h.errorHandler=qs(e),h}function L2(n,e,t){let r=e.fullServerUrl(),i=Br(r,n.host,n._protocol),s="GET",o=n.maxOperationRetryTime,a=new dn(i,s,B2(n,t),o);return a.errorHandler=eh(e),a}function U2(n,e,t,r){let i=e.fullServerUrl(),s=Br(i,n.host,n._protocol),o="PATCH",a=Pp(t,r),c={"Content-Type":"application/json; charset=utf-8"},l=n.maxOperationRetryTime,h=new dn(s,o,Jl(n,r),l);return h.headers=c,h.body=a,h.errorHandler=eh(e),h}function j2(n,e){let t=e.fullServerUrl(),r=Br(t,n.host,n._protocol),i="DELETE",s=n.maxOperationRetryTime;function o(c,l){}let a=new dn(r,i,o,s);return a.successCodes=[200,204],a.errorHandler=eh(e),a}function z2(n,e){return n&&n.contentType||e&&e.type()||"application/octet-stream"}function Aw(n,e,t){let r=Object.assign({},t);return r.fullPath=n.path,r.size=e.size(),r.contentType||(r.contentType=z2(null,e)),r}function $2(n,e,t,r,i){let s=e.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"};function a(){let R="";for(let F=0;F<2;F++)R=R+Math.random().toString().slice(2);return R}let c=a();o["Content-Type"]="multipart/related; boundary="+c;let l=Aw(e,r,i),h=Pp(l,t),f="--"+c+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+h+`\r
--`+c+`\r
Content-Type: `+l.contentType+`\r
\r
`,p=`\r
--`+c+"--",m=Xl.getBlob(f,r,p);if(m===null)throw mw();let y={name:l.fullPath},w=Br(s,n.host,n._protocol),E="POST",x=n.maxUploadRetryTime,D=new dn(w,E,Jl(n,t),x);return D.urlParams=y,D.headers=o,D.body=m.uploadData(),D.errorHandler=qs(e),D}var zs=class{constructor(e,t,r,i){this.current=e,this.total=t,this.finalized=!!r,this.metadata=i||null}};function kp(n,e){let t=null;try{t=n.getResponseHeader("X-Goog-Upload-Status")}catch{Fn(!1)}return Fn(!!t&&(e||["active"]).indexOf(t)!==-1),t}function q2(n,e,t,r,i){let s=e.bucketOnlyServerUrl(),o=Aw(e,r,i),a={name:o.fullPath},c=Br(s,n.host,n._protocol),l="POST",h={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${r.size()}`,"X-Goog-Upload-Header-Content-Type":o.contentType,"Content-Type":"application/json; charset=utf-8"},f=Pp(o,t),p=n.maxUploadRetryTime;function m(w){kp(w);let E;try{E=w.getResponseHeader("X-Goog-Upload-URL")}catch{Fn(!1)}return Fn(Yl(E)),E}let y=new dn(c,l,m,p);return y.urlParams=a,y.headers=h,y.body=f,y.errorHandler=qs(e),y}function H2(n,e,t,r){let i={"X-Goog-Upload-Command":"query"};function s(l){let h=kp(l,["active","final"]),f=null;try{f=l.getResponseHeader("X-Goog-Upload-Size-Received")}catch{Fn(!1)}f||Fn(!1);let p=Number(f);return Fn(!isNaN(p)),new zs(p,r.size(),h==="final")}let o="POST",a=n.maxUploadRetryTime,c=new dn(t,o,s,a);return c.headers=i,c.errorHandler=qs(e),c}var aw=256*1024;function G2(n,e,t,r,i,s,o,a){let c=new zs(0,0);if(o?(c.current=o.current,c.total=o.total):(c.current=0,c.total=r.size()),r.size()!==c.total)throw i2();let l=c.total-c.current,h=l;i>0&&(h=Math.min(h,i));let f=c.current,p=f+h,m="";h===0?m="finalize":l===h?m="upload, finalize":m="upload";let y={"X-Goog-Upload-Command":m,"X-Goog-Upload-Offset":`${c.current}`},w=r.slice(f,p);if(w===null)throw mw();function E(F,k){let P=kp(F,["active","final"]),T=c.current+h,v=r.size(),C;return P==="final"?C=Jl(e,s)(F,k):C=null,new zs(T,v,P==="final",C)}let x="POST",D=e.maxUploadRetryTime,R=new dn(t,x,E,D);return R.headers=y,R.body=w.uploadData(),R.progressCallback=a||null,R.errorHandler=qs(n),R}var aB={STATE_CHANGED:"state_changed"},Pt={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function xp(n){switch(n){case"running":case"pausing":case"canceling":return Pt.RUNNING;case"paused":return Pt.PAUSED;case"success":return Pt.SUCCESS;case"canceled":return Pt.CANCELED;case"error":return Pt.ERROR;default:return Pt.ERROR}}var Ap=class{constructor(e,t,r){if(h2(e)||t!=null||r!=null)this.next=e,this.error=t??void 0,this.complete=r??void 0;else{let s=e;this.next=s.next,this.error=s.error,this.complete=s.complete}}};function Ls(n){return(...e)=>{Promise.resolve().then(()=>n(...e))}}var uw=null,bp=class{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=js.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=js.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=js.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,t,r,i){if(this.sent_)throw Ya("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(t,e,!0),i!==void 0)for(let s in i)i.hasOwnProperty(s)&&this.xhr_.setRequestHeader(s,i[s].toString());return r!==void 0?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Ya("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Ya("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw Ya("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Ya("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}},Tp=class extends bp{initXhr(){this.xhr_.responseType="text"}};function Sn(){return uw?uw():new Tp}var Ip=class{isExponentialBackoffExpired(){return this.sleepTime>this.maxSleepTime}constructor(e,t,r=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=t,this._metadata=r,this._mappings=Zl(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=i=>{if(this._request=void 0,this._chunkMultiplier=1,i._codeEquals(Me.CANCELED))this._needToFetchStatus=!0,this.completeTransitions_();else{let s=this.isExponentialBackoffExpired();if(_w(i.status,[]))if(s)i=pw();else{this.sleepTime=Math.max(this.sleepTime*2,QR),this._needToFetchStatus=!0,this.completeTransitions_();return}this._error=i,this._transition("error")}},this._metadataErrorHandler=i=>{this._request=void 0,i._codeEquals(Me.CANCELED)?this.completeTransitions_():(this._error=i,this._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise((i,s)=>{this._resolve=i,this._reject=s,this._start()}),this._promise.then(null,()=>{})}_makeProgressCallback(){let e=this._transferred;return t=>this._updateProgress(e+t)}_shouldDoResumable(e){return e.size()>256*1024}_start(){this._state==="running"&&this._request===void 0&&(this._resumable?this._uploadUrl===void 0?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout(()=>{this.pendingTimeout=void 0,this._continueUpload()},this.sleepTime):this._oneShotUpload())}_resolveToken(e){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([t,r])=>{switch(this._state){case"running":e(t,r);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused");break}})}_createResumable(){this._resolveToken((e,t)=>{let r=q2(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(r,Sn,e,t);this._request=i,i.getPromise().then(s=>{this._request=void 0,this._uploadUrl=s,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){let e=this._uploadUrl;this._resolveToken((t,r)=>{let i=H2(this._ref.storage,this._ref._location,e,this._blob),s=this._ref.storage._makeRequest(i,Sn,t,r);this._request=s,s.getPromise().then(o=>{o=o,this._request=void 0,this._updateProgress(o.current),this._needToFetchStatus=!1,o.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){let e=aw*this._chunkMultiplier,t=new zs(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken((i,s)=>{let o;try{o=G2(this._ref._location,this._ref.storage,r,this._blob,e,this._mappings,t,this._makeProgressCallback())}catch(c){this._error=c,this._transition("error");return}let a=this._ref.storage._makeRequest(o,Sn,i,s,!1);this._request=a,a.getPromise().then(c=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(c.current),c.finalized?(this._metadata=c.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){aw*this._chunkMultiplier*2<32*1024*1024&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((e,t)=>{let r=Cw(this._ref.storage,this._ref._location,this._mappings),i=this._ref.storage._makeRequest(r,Sn,e,t);this._request=i,i.getPromise().then(s=>{this._request=void 0,this._metadata=s,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((e,t)=>{let r=$2(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(r,Sn,e,t);this._request=i,i.getPromise().then(s=>{this._request=void 0,this._metadata=s,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(e){let t=this._transferred;this._transferred=e,this._transferred!==t&&this._notifyObservers()}_transition(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,this._request!==void 0?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":let t=this._state==="paused";this._state=e,t&&(this._notifyObservers(),this._start());break;case"paused":this._state=e,this._notifyObservers();break;case"canceled":this._error=gw(),this._state=e,this._notifyObservers();break;case"error":this._state=e,this._notifyObservers();break;case"success":this._state=e,this._notifyObservers();break}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start();break}}get snapshot(){let e=xp(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}on(e,t,r,i){let s=new Ap(t||void 0,r||void 0,i||void 0);return this._addObserver(s),()=>{this._removeObserver(s)}}then(e,t){return this._promise.then(e,t)}catch(e){return this.then(null,e)}_addObserver(e){this._observers.push(e),this._notifyObserver(e)}_removeObserver(e){let t=this._observers.indexOf(e);t!==-1&&this._observers.splice(t,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(t=>{this._notifyObserver(t)})}_finishPromise(){if(this._resolve!==void 0){let e=!0;switch(xp(this._state)){case Pt.SUCCESS:Ls(this._resolve.bind(null,this.snapshot))();break;case Pt.CANCELED:case Pt.ERROR:let t=this._reject;Ls(t.bind(null,this._error))();break;default:e=!1;break}e&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(e){switch(xp(this._state)){case Pt.RUNNING:case Pt.PAUSED:e.next&&Ls(e.next.bind(e,this.snapshot))();break;case Pt.SUCCESS:e.complete&&Ls(e.complete.bind(e))();break;case Pt.CANCELED:case Pt.ERROR:e.error&&Ls(e.error.bind(e,this._error))();break;default:e.error&&Ls(e.error.bind(e,this._error))()}}resume(){let e=this._state==="paused"||this._state==="pausing";return e&&this._transition("running"),e}pause(){let e=this._state==="running";return e&&this._transition("pausing"),e}cancel(){let e=this._state==="running"||this._state==="pausing";return e&&this._transition("canceling"),e}};var $s=class n{constructor(e,t){this._service=e,t instanceof Ht?this._location=t:this._location=Ht.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new n(e,t)}get root(){let e=new Ht(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return ww(this._location.path)}get storage(){return this._service}get parent(){let e=T2(this._location.path);if(e===null)return null;let t=new Ht(this._location.bucket,e);return new n(this._service,t)}_throwIfRoot(e){if(this._location.path==="")throw a2(e)}};function W2(n,e,t){return n._throwIfRoot("uploadBytesResumable"),new Ip(n,new Xl(e),t)}function K2(n){let e={prefixes:[],items:[]};return bw(n,e).then(()=>e)}function bw(n,e,t){return O(this,null,function*(){let i=yield Tw(n,{pageToken:t});e.prefixes.push(...i.prefixes),e.items.push(...i.items),i.nextPageToken!=null&&(yield bw(n,e,i.nextPageToken))})}function Tw(n,e){e!=null&&typeof e.maxResults=="number"&&Dp("options.maxResults",1,1e3,e.maxResults);let t=e||{},r=V2(n.storage,n._location,"/",t.pageToken,t.maxResults);return n.storage.makeRequestWithTokens(r,Sn)}function Q2(n){n._throwIfRoot("getMetadata");let e=Cw(n.storage,n._location,Zl());return n.storage.makeRequestWithTokens(e,Sn)}function X2(n,e){n._throwIfRoot("updateMetadata");let t=U2(n.storage,n._location,e,Zl());return n.storage.makeRequestWithTokens(t,Sn)}function Y2(n){n._throwIfRoot("getDownloadURL");let e=L2(n.storage,n._location,Zl());return n.storage.makeRequestWithTokens(e,Sn).then(t=>{if(t===null)throw s2();return t})}function Z2(n){n._throwIfRoot("deleteObject");let e=j2(n.storage,n._location);return n.storage.makeRequestWithTokens(e,Sn)}function Iw(n,e){let t=I2(n._location.path,e),r=new Ht(n._location.bucket,t);return new $s(n.storage,r)}function J2(n){return/^[A-Za-z]+:\/\//.test(n)}function eF(n,e){return new $s(n,e)}function Sw(n,e){if(n instanceof eu){let t=n;if(t._bucket==null)throw r2();let r=new $s(t,t._bucket);return e!=null?Sw(r,e):r}else return e!==void 0?Iw(n,e):n}function tF(n,e){if(e&&J2(e)){if(n instanceof eu)return eF(n,e);throw Ep("To use ref(service, url), the first argument must be a Storage instance.")}else return Sw(n,e)}function cw(n,e){let t=e?.[fw];return t==null?null:Ht.makeFromBucketSpec(t,n)}function nF(n,e,t,r={}){n.host=`${e}:${t}`,n._protocol="http";let{mockUserToken:i}=r;i&&(n._overrideAuthToken=typeof i=="string"?i:Ic(i,n.app.options.projectId))}var eu=class{constructor(e,t,r,i,s){this.app=e,this._authProvider=t,this._appCheckProvider=r,this._url=i,this._firebaseVersion=s,this._bucket=null,this._host=dw,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=WR,this._maxUploadRetryTime=KR,this._requests=new Set,i!=null?this._bucket=Ht.makeFromBucketSpec(i,this._host):this._bucket=cw(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=Ht.makeFromBucketSpec(this._url,e):this._bucket=cw(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){Dp("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){Dp("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}_getAuthToken(){return O(this,null,function*(){if(this._overrideAuthToken)return this._overrideAuthToken;let e=this._authProvider.getImmediate({optional:!0});if(e){let t=yield e.getToken();if(t!==null)return t.accessToken}return null})}_getAppCheckToken(){return O(this,null,function*(){if(Nc(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;let e=this._appCheckProvider.getImmediate({optional:!0});return e?(yield e.getToken()).token:null})}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new $s(this,e)}_makeRequest(e,t,r,i,s=!0){if(this._deleted)return new wp(yw());{let o=y2(e,this._appId,r,i,t,this._firebaseVersion,s);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}makeRequestWithTokens(e,t){return O(this,null,function*(){let[r,i]=yield Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,t,r,i).getPromise()})}},lw="@firebase/storage",hw="0.13.7";var Rw="storage";function rF(n,e,t){return n=Ce(n),W2(n,e,t)}function iF(n){return n=Ce(n),Q2(n)}function sF(n,e){return n=Ce(n),X2(n,e)}function oF(n,e){return n=Ce(n),Tw(n,e)}function aF(n){return n=Ce(n),K2(n)}function Fw(n){return n=Ce(n),Y2(n)}function uF(n){return n=Ce(n),Z2(n)}function Pw(n,e){return n=Ce(n),tF(n,e)}function uB(n,e){return Iw(n,e)}function kw(n=Oc(),e){n=Ce(n);let r=kc(n,Rw).getImmediate({identifier:e}),i=e0("storage");return i&&Nw(r,...i),r}function Nw(n,e,t,r={}){nF(n,e,t,r)}function cF(n,{instanceIdentifier:e}){let t=n.getProvider("app").getImmediate(),r=n.getProvider("auth-internal"),i=n.getProvider("app-check-internal");return new eu(t,r,i,e,Mc)}function lF(){bi(new Ai(Rw,cF,"PUBLIC").setMultipleInstances(!0)),Jt(lw,hw,""),Jt(lw,hw,"esm2017")}lF();var Mw=Ka(Fw,!0);var Ow=Ka(kw,!0);var Bw=Ka(Pw,!0,2);var Vw=(()=>{class n{constructor(){this.storage=Ow()}getFileUrl(t){return O(this,null,function*(){let r=Bw(this.storage,t);try{return yield Mw(r)}catch(i){throw console.error(`Archivo no encontrado: ${t}`,i),new Error("Archivo no encontrado")}})}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=ne({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var AB=(()=>{class n{constructor(t){this.storageService=t}downloadPDF(){return O(this,null,function*(){let t=yield this.storageService.getFileUrl("portfolio/cv/cv_max_poblete.pdf"),r=document.createElement("a");r.href=t,r.target="_blank";let i=new Date().toISOString().split("T")[0];r.download=`cv_max_poblete_${i}.pdf`,document.body.appendChild(r),r.click(),document.body.removeChild(r)})}static{this.\u0275fac=function(r){return new(r||n)(pe(Vw))}}static{this.\u0275cmp=gs({type:n,selectors:[["app-download-cv"]],standalone:!1,decls:5,vars:0,consts:[[1,"w-full","flex","items-center","justify-center","gap-2","bg-gray-600","hover:bg-gray-500","text-blue-400","py-2","px-4","rounded-lg","transition-colors","mb-6",3,"click"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"h-5","w-5"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"]],template:function(r,i){r&1&&(on(0,"button",0),Qn("click",function(){return i.downloadPDF()}),vc(),on(1,"svg",1),Di(2,"path",2),Kn(),_c(),on(3,"span"),aa(4,"Descargar CV"),Kn()())},styles:[".btn-download[_ngcontent-%COMP%]{background-color:#124670;color:#fff;font-size:16px;font-weight:700;padding:10px 15px;border:none;border-radius:5px;cursor:pointer;display:flex;align-items:center;gap:8px;transition:background .3s;margin:22px}.btn-download[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:20px}.btn-download[_ngcontent-%COMP%]:hover{background-color:#125185}"]})}}return n})();var BB=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=Ut({type:n})}static{this.\u0275inj=Lt({imports:[ga,cp,Gx]})}}return n})();var Lw={production:!1,firebaseConfig:{apiKey:"AIzaSyCTKHi7WZLVkGoqxw9qDq7qyn6rTSWV7G4",authDomain:"portfolio-549f8.firebaseapp.com",projectId:"portfolio-549f8",storageBucket:"portfolio-549f8.appspot.com",messagingSenderId:"346210724876",appId:"1:346210724876:web:9107d4534a1f905da69229",measurementId:"G-QJ6ENBNDV2"},apiSecret:"a3f8d7e0b2c94f1e6d5a8c2b7e3f9d01a4c6b8d2e5f7a3c9d1e0b4f6a8c2d7"};var Uw=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},jw={};var er,Np;(function(){var n;function e(T,v){function C(){}C.prototype=v.prototype,T.D=v.prototype,T.prototype=new C,T.prototype.constructor=T,T.C=function(I,A,S){for(var b=Array(arguments.length-2),j=2;j<arguments.length;j++)b[j-2]=arguments[j];return v.prototype[A].apply(I,b)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,t),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(T,v,C){C||(C=0);var I=Array(16);if(typeof v=="string")for(var A=0;16>A;++A)I[A]=v.charCodeAt(C++)|v.charCodeAt(C++)<<8|v.charCodeAt(C++)<<16|v.charCodeAt(C++)<<24;else for(A=0;16>A;++A)I[A]=v[C++]|v[C++]<<8|v[C++]<<16|v[C++]<<24;v=T.g[0],C=T.g[1],A=T.g[2];var S=T.g[3],b=v+(S^C&(A^S))+I[0]+3614090360&4294967295;v=C+(b<<7&4294967295|b>>>25),b=S+(A^v&(C^A))+I[1]+3905402710&4294967295,S=v+(b<<12&4294967295|b>>>20),b=A+(C^S&(v^C))+I[2]+606105819&4294967295,A=S+(b<<17&4294967295|b>>>15),b=C+(v^A&(S^v))+I[3]+3250441966&4294967295,C=A+(b<<22&4294967295|b>>>10),b=v+(S^C&(A^S))+I[4]+4118548399&4294967295,v=C+(b<<7&4294967295|b>>>25),b=S+(A^v&(C^A))+I[5]+1200080426&4294967295,S=v+(b<<12&4294967295|b>>>20),b=A+(C^S&(v^C))+I[6]+2821735955&4294967295,A=S+(b<<17&4294967295|b>>>15),b=C+(v^A&(S^v))+I[7]+4249261313&4294967295,C=A+(b<<22&4294967295|b>>>10),b=v+(S^C&(A^S))+I[8]+1770035416&4294967295,v=C+(b<<7&4294967295|b>>>25),b=S+(A^v&(C^A))+I[9]+2336552879&4294967295,S=v+(b<<12&4294967295|b>>>20),b=A+(C^S&(v^C))+I[10]+4294925233&4294967295,A=S+(b<<17&4294967295|b>>>15),b=C+(v^A&(S^v))+I[11]+2304563134&4294967295,C=A+(b<<22&4294967295|b>>>10),b=v+(S^C&(A^S))+I[12]+1804603682&4294967295,v=C+(b<<7&4294967295|b>>>25),b=S+(A^v&(C^A))+I[13]+4254626195&4294967295,S=v+(b<<12&4294967295|b>>>20),b=A+(C^S&(v^C))+I[14]+2792965006&4294967295,A=S+(b<<17&4294967295|b>>>15),b=C+(v^A&(S^v))+I[15]+1236535329&4294967295,C=A+(b<<22&4294967295|b>>>10),b=v+(A^S&(C^A))+I[1]+4129170786&4294967295,v=C+(b<<5&4294967295|b>>>27),b=S+(C^A&(v^C))+I[6]+3225465664&4294967295,S=v+(b<<9&4294967295|b>>>23),b=A+(v^C&(S^v))+I[11]+643717713&4294967295,A=S+(b<<14&4294967295|b>>>18),b=C+(S^v&(A^S))+I[0]+3921069994&4294967295,C=A+(b<<20&4294967295|b>>>12),b=v+(A^S&(C^A))+I[5]+3593408605&4294967295,v=C+(b<<5&4294967295|b>>>27),b=S+(C^A&(v^C))+I[10]+38016083&4294967295,S=v+(b<<9&4294967295|b>>>23),b=A+(v^C&(S^v))+I[15]+3634488961&4294967295,A=S+(b<<14&4294967295|b>>>18),b=C+(S^v&(A^S))+I[4]+3889429448&4294967295,C=A+(b<<20&4294967295|b>>>12),b=v+(A^S&(C^A))+I[9]+568446438&4294967295,v=C+(b<<5&4294967295|b>>>27),b=S+(C^A&(v^C))+I[14]+3275163606&4294967295,S=v+(b<<9&4294967295|b>>>23),b=A+(v^C&(S^v))+I[3]+4107603335&4294967295,A=S+(b<<14&4294967295|b>>>18),b=C+(S^v&(A^S))+I[8]+1163531501&4294967295,C=A+(b<<20&4294967295|b>>>12),b=v+(A^S&(C^A))+I[13]+2850285829&4294967295,v=C+(b<<5&4294967295|b>>>27),b=S+(C^A&(v^C))+I[2]+4243563512&4294967295,S=v+(b<<9&4294967295|b>>>23),b=A+(v^C&(S^v))+I[7]+1735328473&4294967295,A=S+(b<<14&4294967295|b>>>18),b=C+(S^v&(A^S))+I[12]+2368359562&4294967295,C=A+(b<<20&4294967295|b>>>12),b=v+(C^A^S)+I[5]+4294588738&4294967295,v=C+(b<<4&4294967295|b>>>28),b=S+(v^C^A)+I[8]+2272392833&4294967295,S=v+(b<<11&4294967295|b>>>21),b=A+(S^v^C)+I[11]+1839030562&4294967295,A=S+(b<<16&4294967295|b>>>16),b=C+(A^S^v)+I[14]+4259657740&4294967295,C=A+(b<<23&4294967295|b>>>9),b=v+(C^A^S)+I[1]+2763975236&4294967295,v=C+(b<<4&4294967295|b>>>28),b=S+(v^C^A)+I[4]+1272893353&4294967295,S=v+(b<<11&4294967295|b>>>21),b=A+(S^v^C)+I[7]+4139469664&4294967295,A=S+(b<<16&4294967295|b>>>16),b=C+(A^S^v)+I[10]+3200236656&4294967295,C=A+(b<<23&4294967295|b>>>9),b=v+(C^A^S)+I[13]+681279174&4294967295,v=C+(b<<4&4294967295|b>>>28),b=S+(v^C^A)+I[0]+3936430074&4294967295,S=v+(b<<11&4294967295|b>>>21),b=A+(S^v^C)+I[3]+3572445317&4294967295,A=S+(b<<16&4294967295|b>>>16),b=C+(A^S^v)+I[6]+76029189&4294967295,C=A+(b<<23&4294967295|b>>>9),b=v+(C^A^S)+I[9]+3654602809&4294967295,v=C+(b<<4&4294967295|b>>>28),b=S+(v^C^A)+I[12]+3873151461&4294967295,S=v+(b<<11&4294967295|b>>>21),b=A+(S^v^C)+I[15]+530742520&4294967295,A=S+(b<<16&4294967295|b>>>16),b=C+(A^S^v)+I[2]+3299628645&4294967295,C=A+(b<<23&4294967295|b>>>9),b=v+(A^(C|~S))+I[0]+4096336452&4294967295,v=C+(b<<6&4294967295|b>>>26),b=S+(C^(v|~A))+I[7]+1126891415&4294967295,S=v+(b<<10&4294967295|b>>>22),b=A+(v^(S|~C))+I[14]+2878612391&4294967295,A=S+(b<<15&4294967295|b>>>17),b=C+(S^(A|~v))+I[5]+4237533241&4294967295,C=A+(b<<21&4294967295|b>>>11),b=v+(A^(C|~S))+I[12]+1700485571&4294967295,v=C+(b<<6&4294967295|b>>>26),b=S+(C^(v|~A))+I[3]+2399980690&4294967295,S=v+(b<<10&4294967295|b>>>22),b=A+(v^(S|~C))+I[10]+4293915773&4294967295,A=S+(b<<15&4294967295|b>>>17),b=C+(S^(A|~v))+I[1]+2240044497&4294967295,C=A+(b<<21&4294967295|b>>>11),b=v+(A^(C|~S))+I[8]+1873313359&4294967295,v=C+(b<<6&4294967295|b>>>26),b=S+(C^(v|~A))+I[15]+4264355552&4294967295,S=v+(b<<10&4294967295|b>>>22),b=A+(v^(S|~C))+I[6]+2734768916&4294967295,A=S+(b<<15&4294967295|b>>>17),b=C+(S^(A|~v))+I[13]+1309151649&4294967295,C=A+(b<<21&4294967295|b>>>11),b=v+(A^(C|~S))+I[4]+4149444226&4294967295,v=C+(b<<6&4294967295|b>>>26),b=S+(C^(v|~A))+I[11]+3174756917&4294967295,S=v+(b<<10&4294967295|b>>>22),b=A+(v^(S|~C))+I[2]+718787259&4294967295,A=S+(b<<15&4294967295|b>>>17),b=C+(S^(A|~v))+I[9]+3951481745&4294967295,T.g[0]=T.g[0]+v&4294967295,T.g[1]=T.g[1]+(A+(b<<21&4294967295|b>>>11))&4294967295,T.g[2]=T.g[2]+A&4294967295,T.g[3]=T.g[3]+S&4294967295}r.prototype.u=function(T,v){v===void 0&&(v=T.length);for(var C=v-this.blockSize,I=this.B,A=this.h,S=0;S<v;){if(A==0)for(;S<=C;)i(this,T,S),S+=this.blockSize;if(typeof T=="string"){for(;S<v;)if(I[A++]=T.charCodeAt(S++),A==this.blockSize){i(this,I),A=0;break}}else for(;S<v;)if(I[A++]=T[S++],A==this.blockSize){i(this,I),A=0;break}}this.h=A,this.o+=v},r.prototype.v=function(){var T=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);T[0]=128;for(var v=1;v<T.length-8;++v)T[v]=0;var C=8*this.o;for(v=T.length-8;v<T.length;++v)T[v]=C&255,C/=256;for(this.u(T),T=Array(16),v=C=0;4>v;++v)for(var I=0;32>I;I+=8)T[C++]=this.g[v]>>>I&255;return T};function s(T,v){var C=a;return Object.prototype.hasOwnProperty.call(C,T)?C[T]:C[T]=v(T)}function o(T,v){this.h=v;for(var C=[],I=!0,A=T.length-1;0<=A;A--){var S=T[A]|0;I&&S==v||(C[A]=S,I=!1)}this.g=C}var a={};function c(T){return-128<=T&&128>T?s(T,function(v){return new o([v|0],0>v?-1:0)}):new o([T|0],0>T?-1:0)}function l(T){if(isNaN(T)||!isFinite(T))return f;if(0>T)return E(l(-T));for(var v=[],C=1,I=0;T>=C;I++)v[I]=T/C|0,C*=4294967296;return new o(v,0)}function h(T,v){if(T.length==0)throw Error("number format error: empty string");if(v=v||10,2>v||36<v)throw Error("radix out of range: "+v);if(T.charAt(0)=="-")return E(h(T.substring(1),v));if(0<=T.indexOf("-"))throw Error('number format error: interior "-" character');for(var C=l(Math.pow(v,8)),I=f,A=0;A<T.length;A+=8){var S=Math.min(8,T.length-A),b=parseInt(T.substring(A,A+S),v);8>S?(S=l(Math.pow(v,S)),I=I.j(S).add(l(b))):(I=I.j(C),I=I.add(l(b)))}return I}var f=c(0),p=c(1),m=c(16777216);n=o.prototype,n.m=function(){if(w(this))return-E(this).m();for(var T=0,v=1,C=0;C<this.g.length;C++){var I=this.i(C);T+=(0<=I?I:4294967296+I)*v,v*=4294967296}return T},n.toString=function(T){if(T=T||10,2>T||36<T)throw Error("radix out of range: "+T);if(y(this))return"0";if(w(this))return"-"+E(this).toString(T);for(var v=l(Math.pow(T,6)),C=this,I="";;){var A=F(C,v).g;C=x(C,A.j(v));var S=((0<C.g.length?C.g[0]:C.h)>>>0).toString(T);if(C=A,y(C))return S+I;for(;6>S.length;)S="0"+S;I=S+I}},n.i=function(T){return 0>T?0:T<this.g.length?this.g[T]:this.h};function y(T){if(T.h!=0)return!1;for(var v=0;v<T.g.length;v++)if(T.g[v]!=0)return!1;return!0}function w(T){return T.h==-1}n.l=function(T){return T=x(this,T),w(T)?-1:y(T)?0:1};function E(T){for(var v=T.g.length,C=[],I=0;I<v;I++)C[I]=~T.g[I];return new o(C,~T.h).add(p)}n.abs=function(){return w(this)?E(this):this},n.add=function(T){for(var v=Math.max(this.g.length,T.g.length),C=[],I=0,A=0;A<=v;A++){var S=I+(this.i(A)&65535)+(T.i(A)&65535),b=(S>>>16)+(this.i(A)>>>16)+(T.i(A)>>>16);I=b>>>16,S&=65535,b&=65535,C[A]=b<<16|S}return new o(C,C[C.length-1]&-2147483648?-1:0)};function x(T,v){return T.add(E(v))}n.j=function(T){if(y(this)||y(T))return f;if(w(this))return w(T)?E(this).j(E(T)):E(E(this).j(T));if(w(T))return E(this.j(E(T)));if(0>this.l(m)&&0>T.l(m))return l(this.m()*T.m());for(var v=this.g.length+T.g.length,C=[],I=0;I<2*v;I++)C[I]=0;for(I=0;I<this.g.length;I++)for(var A=0;A<T.g.length;A++){var S=this.i(I)>>>16,b=this.i(I)&65535,j=T.i(A)>>>16,te=T.i(A)&65535;C[2*I+2*A]+=b*te,D(C,2*I+2*A),C[2*I+2*A+1]+=S*te,D(C,2*I+2*A+1),C[2*I+2*A+1]+=b*j,D(C,2*I+2*A+1),C[2*I+2*A+2]+=S*j,D(C,2*I+2*A+2)}for(I=0;I<v;I++)C[I]=C[2*I+1]<<16|C[2*I];for(I=v;I<2*v;I++)C[I]=0;return new o(C,0)};function D(T,v){for(;(T[v]&65535)!=T[v];)T[v+1]+=T[v]>>>16,T[v]&=65535,v++}function R(T,v){this.g=T,this.h=v}function F(T,v){if(y(v))throw Error("division by zero");if(y(T))return new R(f,f);if(w(T))return v=F(E(T),v),new R(E(v.g),E(v.h));if(w(v))return v=F(T,E(v)),new R(E(v.g),v.h);if(30<T.g.length){if(w(T)||w(v))throw Error("slowDivide_ only works with positive integers.");for(var C=p,I=v;0>=I.l(T);)C=k(C),I=k(I);var A=P(C,1),S=P(I,1);for(I=P(I,2),C=P(C,2);!y(I);){var b=S.add(I);0>=b.l(T)&&(A=A.add(C),S=b),I=P(I,1),C=P(C,1)}return v=x(T,A.j(v)),new R(A,v)}for(A=f;0<=T.l(v);){for(C=Math.max(1,Math.floor(T.m()/v.m())),I=Math.ceil(Math.log(C)/Math.LN2),I=48>=I?1:Math.pow(2,I-48),S=l(C),b=S.j(v);w(b)||0<b.l(T);)C-=I,S=l(C),b=S.j(v);y(S)&&(S=p),A=A.add(S),T=x(T,b)}return new R(A,T)}n.A=function(T){return F(this,T).h},n.and=function(T){for(var v=Math.max(this.g.length,T.g.length),C=[],I=0;I<v;I++)C[I]=this.i(I)&T.i(I);return new o(C,this.h&T.h)},n.or=function(T){for(var v=Math.max(this.g.length,T.g.length),C=[],I=0;I<v;I++)C[I]=this.i(I)|T.i(I);return new o(C,this.h|T.h)},n.xor=function(T){for(var v=Math.max(this.g.length,T.g.length),C=[],I=0;I<v;I++)C[I]=this.i(I)^T.i(I);return new o(C,this.h^T.h)};function k(T){for(var v=T.g.length+1,C=[],I=0;I<v;I++)C[I]=T.i(I)<<1|T.i(I-1)>>>31;return new o(C,T.h)}function P(T,v){var C=v>>5;v%=32;for(var I=T.g.length-C,A=[],S=0;S<I;S++)A[S]=0<v?T.i(S+C)>>>v|T.i(S+C+1)<<32-v:T.i(S+C);return new o(A,T.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,Np=jw.Md5=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=l,o.fromString=h,er=jw.Integer=o}).apply(typeof Uw<"u"?Uw:typeof self<"u"?self:typeof window<"u"?window:{});var th=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},tr={};var Mp,dF,Hs,Op,tu,nh,Bp,Vp,Lp;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(u,d,g){return u==Array.prototype||u==Object.prototype||(u[d]=g.value),u};function t(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof th=="object"&&th];for(var d=0;d<u.length;++d){var g=u[d];if(g&&g.Math==Math)return g}throw Error("Cannot find global object")}var r=t(this);function i(u,d){if(d)e:{var g=r;u=u.split(".");for(var _=0;_<u.length-1;_++){var N=u[_];if(!(N in g))break e;g=g[N]}u=u[u.length-1],_=g[u],d=d(_),d!=_&&d!=null&&e(g,u,{configurable:!0,writable:!0,value:d})}}function s(u,d){u instanceof String&&(u+="");var g=0,_=!1,N={next:function(){if(!_&&g<u.length){var V=g++;return{value:d(V,u[V]),done:!1}}return _=!0,{done:!0,value:void 0}}};return N[Symbol.iterator]=function(){return N},N}i("Array.prototype.values",function(u){return u||function(){return s(this,function(d,g){return g})}});var o=o||{},a=this||self;function c(u){var d=typeof u;return d=d!="object"?d:u?Array.isArray(u)?"array":d:"null",d=="array"||d=="object"&&typeof u.length=="number"}function l(u){var d=typeof u;return d=="object"&&u!=null||d=="function"}function h(u,d,g){return u.call.apply(u.bind,arguments)}function f(u,d,g){if(!u)throw Error();if(2<arguments.length){var _=Array.prototype.slice.call(arguments,2);return function(){var N=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(N,_),u.apply(d,N)}}return function(){return u.apply(d,arguments)}}function p(u,d,g){return p=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?h:f,p.apply(null,arguments)}function m(u,d){var g=Array.prototype.slice.call(arguments,1);return function(){var _=g.slice();return _.push.apply(_,arguments),u.apply(this,_)}}function y(u,d){function g(){}g.prototype=d.prototype,u.aa=d.prototype,u.prototype=new g,u.prototype.constructor=u,u.Qb=function(_,N,V){for(var G=Array(arguments.length-2),Se=2;Se<arguments.length;Se++)G[Se-2]=arguments[Se];return d.prototype[N].apply(_,G)}}function w(u){let d=u.length;if(0<d){let g=Array(d);for(let _=0;_<d;_++)g[_]=u[_];return g}return[]}function E(u,d){for(let g=1;g<arguments.length;g++){let _=arguments[g];if(c(_)){let N=u.length||0,V=_.length||0;u.length=N+V;for(let G=0;G<V;G++)u[N+G]=_[G]}else u.push(_)}}class x{constructor(d,g){this.i=d,this.j=g,this.h=0,this.g=null}get(){let d;return 0<this.h?(this.h--,d=this.g,this.g=d.next,d.next=null):d=this.i(),d}}function D(u){return/^[\s\xa0]*$/.test(u)}function R(){var u=a.navigator;return u&&(u=u.userAgent)?u:""}function F(u){return F[" "](u),u}F[" "]=function(){};var k=R().indexOf("Gecko")!=-1&&!(R().toLowerCase().indexOf("webkit")!=-1&&R().indexOf("Edge")==-1)&&!(R().indexOf("Trident")!=-1||R().indexOf("MSIE")!=-1)&&R().indexOf("Edge")==-1;function P(u,d,g){for(let _ in u)d.call(g,u[_],_,u)}function T(u,d){for(let g in u)d.call(void 0,u[g],g,u)}function v(u){let d={};for(let g in u)d[g]=u[g];return d}let C="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function I(u,d){let g,_;for(let N=1;N<arguments.length;N++){_=arguments[N];for(g in _)u[g]=_[g];for(let V=0;V<C.length;V++)g=C[V],Object.prototype.hasOwnProperty.call(_,g)&&(u[g]=_[g])}}function A(u){var d=1;u=u.split(":");let g=[];for(;0<d&&u.length;)g.push(u.shift()),d--;return u.length&&g.push(u.join(":")),g}function S(u){a.setTimeout(()=>{throw u},0)}function b(){var u=L;let d=null;return u.g&&(d=u.g,u.g=u.g.next,u.g||(u.h=null),d.next=null),d}class j{constructor(){this.h=this.g=null}add(d,g){let _=te.get();_.set(d,g),this.h?this.h.next=_:this.g=_,this.h=_}}var te=new x(()=>new ee,u=>u.reset());class ee{constructor(){this.next=this.g=this.h=null}set(d,g){this.h=d,this.g=g,this.next=null}reset(){this.next=this.g=this.h=null}}let oe,le=!1,L=new j,q=()=>{let u=a.Promise.resolve(void 0);oe=()=>{u.then(H)}};var H=()=>{for(var u;u=b();){try{u.h.call(u.g)}catch(g){S(g)}var d=te;d.j(u),100>d.h&&(d.h++,u.next=d.g,d.g=u)}le=!1};function U(){this.s=this.s,this.C=this.C}U.prototype.s=!1,U.prototype.ma=function(){this.s||(this.s=!0,this.N())},U.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function he(u,d){this.type=u,this.g=this.target=d,this.defaultPrevented=!1}he.prototype.h=function(){this.defaultPrevented=!0};var be=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var u=!1,d=Object.defineProperty({},"passive",{get:function(){u=!0}});try{let g=()=>{};a.addEventListener("test",g,d),a.removeEventListener("test",g,d)}catch{}return u}();function Ge(u,d){if(he.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u){var g=this.type=u.type,_=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;if(this.target=u.target||u.srcElement,this.g=d,d=u.relatedTarget){if(k){e:{try{F(d.nodeName);var N=!0;break e}catch{}N=!1}N||(d=null)}}else g=="mouseover"?d=u.fromElement:g=="mouseout"&&(d=u.toElement);this.relatedTarget=d,_?(this.clientX=_.clientX!==void 0?_.clientX:_.pageX,this.clientY=_.clientY!==void 0?_.clientY:_.pageY,this.screenX=_.screenX||0,this.screenY=_.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=typeof u.pointerType=="string"?u.pointerType:de[u.pointerType]||"",this.state=u.state,this.i=u,u.defaultPrevented&&Ge.aa.h.call(this)}}y(Ge,he);var de={2:"touch",3:"pen",4:"mouse"};Ge.prototype.h=function(){Ge.aa.h.call(this);var u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var nn="closure_listenable_"+(1e6*Math.random()|0),fr=0;function Lo(u,d,g,_,N){this.listener=u,this.proxy=null,this.src=d,this.type=g,this.capture=!!_,this.ha=N,this.key=++fr,this.da=this.fa=!1}function yn(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function ft(u){this.src=u,this.g={},this.h=0}ft.prototype.add=function(u,d,g,_,N){var V=u.toString();u=this.g[V],u||(u=this.g[V]=[],this.h++);var G=pr(u,d,_,N);return-1<G?(d=u[G],g||(d.fa=!1)):(d=new Lo(d,this.src,V,!!_,N),d.fa=g,u.push(d)),d};function ut(u,d){var g=d.type;if(g in u.g){var _=u.g[g],N=Array.prototype.indexOf.call(_,d,void 0),V;(V=0<=N)&&Array.prototype.splice.call(_,N,1),V&&(yn(d),u.g[g].length==0&&(delete u.g[g],u.h--))}}function pr(u,d,g,_){for(var N=0;N<u.length;++N){var V=u[N];if(!V.da&&V.listener==d&&V.capture==!!g&&V.ha==_)return N}return-1}var Un="closure_lm_"+(1e6*Math.random()|0),gr={};function mr(u,d,g,_,N){if(_&&_.once)return It(u,d,g,_,N);if(Array.isArray(d)){for(var V=0;V<d.length;V++)mr(u,d[V],g,_,N);return null}return g=Uo(g),u&&u[nn]?u.K(d,g,l(_)?!!_.capture:!!_,N):ss(u,d,g,!1,_,N)}function ss(u,d,g,_,N,V){if(!d)throw Error("Invalid event type");var G=l(N)?!!N.capture:!!N,Se=vn(u);if(Se||(u[Un]=Se=new ft(u)),g=Se.add(d,g,_,G,V),g.proxy)return g;if(_=hi(),g.proxy=_,_.src=u,_.listener=g,u.addEventListener)be||(N=G),N===void 0&&(N=!1),u.addEventListener(d.toString(),_,N);else if(u.attachEvent)u.attachEvent(di(d.toString()),_);else if(u.addListener&&u.removeListener)u.addListener(_);else throw Error("addEventListener and attachEvent are unavailable.");return g}function hi(){function u(g){return d.call(u.src,u.listener,g)}let d=Ku;return u}function It(u,d,g,_,N){if(Array.isArray(d)){for(var V=0;V<d.length;V++)It(u,d[V],g,_,N);return null}return g=Uo(g),u&&u[nn]?u.L(d,g,l(_)?!!_.capture:!!_,N):ss(u,d,g,!0,_,N)}function Dt(u,d,g,_,N){if(Array.isArray(d))for(var V=0;V<d.length;V++)Dt(u,d[V],g,_,N);else _=l(_)?!!_.capture:!!_,g=Uo(g),u&&u[nn]?(u=u.i,d=String(d).toString(),d in u.g&&(V=u.g[d],g=pr(V,g,_,N),-1<g&&(yn(V[g]),Array.prototype.splice.call(V,g,1),V.length==0&&(delete u.g[d],u.h--)))):u&&(u=vn(u))&&(d=u.g[d.toString()],u=-1,d&&(u=pr(d,g,_,N)),(g=-1<u?d[u]:null)&&Qt(g))}function Qt(u){if(typeof u!="number"&&u&&!u.da){var d=u.src;if(d&&d[nn])ut(d.i,u);else{var g=u.type,_=u.proxy;d.removeEventListener?d.removeEventListener(g,_,u.capture):d.detachEvent?d.detachEvent(di(g),_):d.addListener&&d.removeListener&&d.removeListener(_),(g=vn(d))?(ut(g,u),g.h==0&&(g.src=null,d[Un]=null)):yn(u)}}}function di(u){return u in gr?gr[u]:gr[u]="on"+u}function Ku(u,d){if(u.da)u=!0;else{d=new Ge(d,this);var g=u.listener,_=u.ha||u.src;u.fa&&Qt(u),u=g.call(_,d)}return u}function vn(u){return u=u[Un],u instanceof ft?u:null}var jn="__closure_events_fn_"+(1e9*Math.random()>>>0);function Uo(u){return typeof u=="function"?u:(u[jn]||(u[jn]=function(d){return u.handleEvent(d)}),u[jn])}function et(){U.call(this),this.i=new ft(this),this.M=this,this.F=null}y(et,U),et.prototype[nn]=!0,et.prototype.removeEventListener=function(u,d,g,_){Dt(this,u,d,g,_)};function at(u,d){var g,_=u.F;if(_)for(g=[];_;_=_.F)g.push(_);if(u=u.M,_=d.type||d,typeof d=="string")d=new he(d,u);else if(d instanceof he)d.target=d.target||u;else{var N=d;d=new he(_,u),I(d,N)}if(N=!0,g)for(var V=g.length-1;0<=V;V--){var G=d.g=g[V];N=rn(G,_,!0,d)&&N}if(G=d.g=u,N=rn(G,_,!0,d)&&N,N=rn(G,_,!1,d)&&N,g)for(V=0;V<g.length;V++)G=d.g=g[V],N=rn(G,_,!1,d)&&N}et.prototype.N=function(){if(et.aa.N.call(this),this.i){var u=this.i,d;for(d in u.g){for(var g=u.g[d],_=0;_<g.length;_++)yn(g[_]);delete u.g[d],u.h--}}this.F=null},et.prototype.K=function(u,d,g,_){return this.i.add(String(u),d,!1,g,_)},et.prototype.L=function(u,d,g,_){return this.i.add(String(u),d,!0,g,_)};function rn(u,d,g,_){if(d=u.i.g[String(d)],!d)return!0;d=d.concat();for(var N=!0,V=0;V<d.length;++V){var G=d[V];if(G&&!G.da&&G.capture==g){var Se=G.listener,ct=G.ha||G.src;G.fa&&ut(u.i,G),N=Se.call(ct,_)!==!1&&N}}return N&&!_.defaultPrevented}function yr(u,d,g){if(typeof u=="function")g&&(u=p(u,g));else if(u&&typeof u.handleEvent=="function")u=p(u.handleEvent,u);else throw Error("Invalid listener argument");return 2147483647<Number(d)?-1:a.setTimeout(u,d||0)}function Qu(u){u.g=yr(()=>{u.g=null,u.i&&(u.i=!1,Qu(u))},u.l);let d=u.h;u.h=null,u.m.apply(null,d)}class Xu extends U{constructor(d,g){super(),this.m=d,this.l=g,this.h=null,this.i=!1,this.g=null}j(d){this.h=arguments,this.g?this.i=!0:Qu(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function vr(u){U.call(this),this.h=u,this.g={}}y(vr,U);var Yu=[];function Zu(u){P(u.g,function(d,g){this.g.hasOwnProperty(g)&&Qt(d)},u),u.g={}}vr.prototype.N=function(){vr.aa.N.call(this),Zu(this)},vr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var os=a.JSON.stringify,vf=a.JSON.parse,Ju=class{stringify(u){return a.JSON.stringify(u,void 0)}parse(u){return a.JSON.parse(u,void 0)}};function jo(){}jo.prototype.h=null;function zo(u){return u.h||(u.h=u.i())}function ec(){}var fi={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function $o(){he.call(this,"d")}y($o,he);function as(){he.call(this,"c")}y(as,he);var zn={},tc=null;function pi(){return tc=tc||new et}zn.La="serverreachability";function nc(u){he.call(this,zn.La,u)}y(nc,he);function _r(u){let d=pi();at(d,new nc(d))}zn.STAT_EVENT="statevent";function pt(u,d){he.call(this,zn.STAT_EVENT,u),this.stat=d}y(pt,he);function Ne(u){let d=pi();at(d,new pt(d,u))}zn.Ma="timingevent";function qo(u,d){he.call(this,zn.Ma,u),this.size=d}y(qo,he);function gi(u,d){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){u()},d)}function Ho(){this.g=!0}Ho.prototype.xa=function(){this.g=!1};function fb(u,d,g,_,N,V){u.info(function(){if(u.g)if(V)for(var G="",Se=V.split("&"),ct=0;ct<Se.length;ct++){var Ee=Se[ct].split("=");if(1<Ee.length){var gt=Ee[0];Ee=Ee[1];var mt=gt.split("_");G=2<=mt.length&&mt[1]=="type"?G+(gt+"="+Ee+"&"):G+(gt+"=redacted&")}}else G=null;else G=V;return"XMLHTTP REQ ("+_+") [attempt "+N+"]: "+d+`
`+g+`
`+G})}function pb(u,d,g,_,N,V,G){u.info(function(){return"XMLHTTP RESP ("+_+") [ attempt "+N+"]: "+d+`
`+g+`
`+V+" "+G})}function us(u,d,g,_){u.info(function(){return"XMLHTTP TEXT ("+d+"): "+mb(u,g)+(_?" "+_:"")})}function gb(u,d){u.info(function(){return"TIMEOUT: "+d})}Ho.prototype.info=function(){};function mb(u,d){if(!u.g)return d;if(!d)return null;try{var g=JSON.parse(d);if(g){for(u=0;u<g.length;u++)if(Array.isArray(g[u])){var _=g[u];if(!(2>_.length)){var N=_[1];if(Array.isArray(N)&&!(1>N.length)){var V=N[0];if(V!="noop"&&V!="stop"&&V!="close")for(var G=1;G<N.length;G++)N[G]=""}}}}return os(g)}catch{return d}}var rc={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},zy={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},_f;function ic(){}y(ic,jo),ic.prototype.g=function(){return new XMLHttpRequest},ic.prototype.i=function(){return{}},_f=new ic;function xr(u,d,g,_){this.j=u,this.i=d,this.l=g,this.R=_||1,this.U=new vr(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new $y}function $y(){this.i=null,this.g="",this.h=!1}var qy={},xf={};function Ef(u,d,g){u.L=1,u.v=uc($n(d)),u.m=g,u.P=!0,Hy(u,null)}function Hy(u,d){u.F=Date.now(),sc(u),u.A=$n(u.v);var g=u.A,_=u.R;Array.isArray(_)||(_=[String(_)]),sv(g.i,"t",_),u.C=0,g=u.j.J,u.h=new $y,u.g=Dv(u.j,g?d:null,!u.m),0<u.O&&(u.M=new Xu(p(u.Y,u,u.g),u.O)),d=u.U,g=u.g,_=u.ca;var N="readystatechange";Array.isArray(N)||(N&&(Yu[0]=N.toString()),N=Yu);for(var V=0;V<N.length;V++){var G=mr(g,N[V],_||d.handleEvent,!1,d.h||d);if(!G)break;d.g[G.key]=G}d=u.H?v(u.H):{},u.m?(u.u||(u.u="POST"),d["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.A,u.u,u.m,d)):(u.u="GET",u.g.ea(u.A,u.u,null,d)),_r(),fb(u.i,u.u,u.A,u.l,u.R,u.m)}xr.prototype.ca=function(u){u=u.target;let d=this.M;d&&qn(u)==3?d.j():this.Y(u)},xr.prototype.Y=function(u){try{if(u==this.g)e:{let mt=qn(this.g);var d=this.g.Ba();let hs=this.g.Z();if(!(3>mt)&&(mt!=3||this.g&&(this.h.h||this.g.oa()||dv(this.g)))){this.J||mt!=4||d==7||(d==8||0>=hs?_r(3):_r(2)),wf(this);var g=this.g.Z();this.X=g;t:if(Gy(this)){var _=dv(this.g);u="";var N=_.length,V=qn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){mi(this),Go(this);var G="";break t}this.h.i=new a.TextDecoder}for(d=0;d<N;d++)this.h.h=!0,u+=this.h.i.decode(_[d],{stream:!(V&&d==N-1)});_.length=0,this.h.g+=u,this.C=0,G=this.h.g}else G=this.g.oa();if(this.o=g==200,pb(this.i,this.u,this.A,this.l,this.R,mt,g),this.o){if(this.T&&!this.K){t:{if(this.g){var Se,ct=this.g;if((Se=ct.g?ct.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!D(Se)){var Ee=Se;break t}}Ee=null}if(g=Ee)us(this.i,this.l,g,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Df(this,g);else{this.o=!1,this.s=3,Ne(12),mi(this),Go(this);break e}}if(this.P){g=!0;let sn;for(;!this.J&&this.C<G.length;)if(sn=yb(this,G),sn==xf){mt==4&&(this.s=4,Ne(14),g=!1),us(this.i,this.l,null,"[Incomplete Response]");break}else if(sn==qy){this.s=4,Ne(15),us(this.i,this.l,G,"[Invalid Chunk]"),g=!1;break}else us(this.i,this.l,sn,null),Df(this,sn);if(Gy(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),mt!=4||G.length!=0||this.h.h||(this.s=1,Ne(16),g=!1),this.o=this.o&&g,!g)us(this.i,this.l,G,"[Invalid Chunked Response]"),mi(this),Go(this);else if(0<G.length&&!this.W){this.W=!0;var gt=this.j;gt.g==this&&gt.ba&&!gt.M&&(gt.j.info("Great, no buffering proxy detected. Bytes received: "+G.length),Sf(gt),gt.M=!0,Ne(11))}}else us(this.i,this.l,G,null),Df(this,G);mt==4&&mi(this),this.o&&!this.J&&(mt==4?_v(this.j,this):(this.o=!1,sc(this)))}else Nb(this.g),g==400&&0<G.indexOf("Unknown SID")?(this.s=3,Ne(12)):(this.s=0,Ne(13)),mi(this),Go(this)}}}catch{}finally{}};function Gy(u){return u.g?u.u=="GET"&&u.L!=2&&u.j.Ca:!1}function yb(u,d){var g=u.C,_=d.indexOf(`
`,g);return _==-1?xf:(g=Number(d.substring(g,_)),isNaN(g)?qy:(_+=1,_+g>d.length?xf:(d=d.slice(_,_+g),u.C=_+g,d)))}xr.prototype.cancel=function(){this.J=!0,mi(this)};function sc(u){u.S=Date.now()+u.I,Wy(u,u.I)}function Wy(u,d){if(u.B!=null)throw Error("WatchDog timer not null");u.B=gi(p(u.ba,u),d)}function wf(u){u.B&&(a.clearTimeout(u.B),u.B=null)}xr.prototype.ba=function(){this.B=null;let u=Date.now();0<=u-this.S?(gb(this.i,this.A),this.L!=2&&(_r(),Ne(17)),mi(this),this.s=2,Go(this)):Wy(this,this.S-u)};function Go(u){u.j.G==0||u.J||_v(u.j,u)}function mi(u){wf(u);var d=u.M;d&&typeof d.ma=="function"&&d.ma(),u.M=null,Zu(u.U),u.g&&(d=u.g,u.g=null,d.abort(),d.ma())}function Df(u,d){try{var g=u.j;if(g.G!=0&&(g.g==u||Cf(g.h,u))){if(!u.K&&Cf(g.h,u)&&g.G==3){try{var _=g.Da.g.parse(d)}catch{_=null}if(Array.isArray(_)&&_.length==3){var N=_;if(N[0]==0){e:if(!g.u){if(g.g)if(g.g.F+3e3<u.F)fc(g),hc(g);else break e;If(g),Ne(18)}}else g.za=N[1],0<g.za-g.T&&37500>N[2]&&g.F&&g.v==0&&!g.C&&(g.C=gi(p(g.Za,g),6e3));if(1>=Xy(g.h)&&g.ca){try{g.ca()}catch{}g.ca=void 0}}else vi(g,11)}else if((u.K||g.g==u)&&fc(g),!D(d))for(N=g.Da.g.parse(d),d=0;d<N.length;d++){let Ee=N[d];if(g.T=Ee[0],Ee=Ee[1],g.G==2)if(Ee[0]=="c"){g.K=Ee[1],g.ia=Ee[2];let gt=Ee[3];gt!=null&&(g.la=gt,g.j.info("VER="+g.la));let mt=Ee[4];mt!=null&&(g.Aa=mt,g.j.info("SVER="+g.Aa));let hs=Ee[5];hs!=null&&typeof hs=="number"&&0<hs&&(_=1.5*hs,g.L=_,g.j.info("backChannelRequestTimeoutMs_="+_)),_=g;let sn=u.g;if(sn){let gc=sn.g?sn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(gc){var V=_.h;V.g||gc.indexOf("spdy")==-1&&gc.indexOf("quic")==-1&&gc.indexOf("h2")==-1||(V.j=V.l,V.g=new Set,V.h&&(Af(V,V.h),V.h=null))}if(_.D){let Rf=sn.g?sn.g.getResponseHeader("X-HTTP-Session-Id"):null;Rf&&(_.ya=Rf,Pe(_.I,_.D,Rf))}}g.G=3,g.l&&g.l.ua(),g.ba&&(g.R=Date.now()-u.F,g.j.info("Handshake RTT: "+g.R+"ms")),_=g;var G=u;if(_.qa=wv(_,_.J?_.ia:null,_.W),G.K){Yy(_.h,G);var Se=G,ct=_.L;ct&&(Se.I=ct),Se.B&&(wf(Se),sc(Se)),_.g=G}else yv(_);0<g.i.length&&dc(g)}else Ee[0]!="stop"&&Ee[0]!="close"||vi(g,7);else g.G==3&&(Ee[0]=="stop"||Ee[0]=="close"?Ee[0]=="stop"?vi(g,7):Tf(g):Ee[0]!="noop"&&g.l&&g.l.ta(Ee),g.v=0)}}_r(4)}catch{}}var vb=class{constructor(u,d){this.g=u,this.map=d}};function Ky(u){this.l=u||10,a.PerformanceNavigationTiming?(u=a.performance.getEntriesByType("navigation"),u=0<u.length&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Qy(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function Xy(u){return u.h?1:u.g?u.g.size:0}function Cf(u,d){return u.h?u.h==d:u.g?u.g.has(d):!1}function Af(u,d){u.g?u.g.add(d):u.h=d}function Yy(u,d){u.h&&u.h==d?u.h=null:u.g&&u.g.has(d)&&u.g.delete(d)}Ky.prototype.cancel=function(){if(this.i=Zy(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let u of this.g.values())u.cancel();this.g.clear()}};function Zy(u){if(u.h!=null)return u.i.concat(u.h.D);if(u.g!=null&&u.g.size!==0){let d=u.i;for(let g of u.g.values())d=d.concat(g.D);return d}return w(u.i)}function _b(u){if(u.V&&typeof u.V=="function")return u.V();if(typeof Map<"u"&&u instanceof Map||typeof Set<"u"&&u instanceof Set)return Array.from(u.values());if(typeof u=="string")return u.split("");if(c(u)){for(var d=[],g=u.length,_=0;_<g;_++)d.push(u[_]);return d}d=[],g=0;for(_ in u)d[g++]=u[_];return d}function xb(u){if(u.na&&typeof u.na=="function")return u.na();if(!u.V||typeof u.V!="function"){if(typeof Map<"u"&&u instanceof Map)return Array.from(u.keys());if(!(typeof Set<"u"&&u instanceof Set)){if(c(u)||typeof u=="string"){var d=[];u=u.length;for(var g=0;g<u;g++)d.push(g);return d}d=[],g=0;for(let _ in u)d[g++]=_;return d}}}function Jy(u,d){if(u.forEach&&typeof u.forEach=="function")u.forEach(d,void 0);else if(c(u)||typeof u=="string")Array.prototype.forEach.call(u,d,void 0);else for(var g=xb(u),_=_b(u),N=_.length,V=0;V<N;V++)d.call(void 0,_[V],g&&g[V],u)}var ev=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Eb(u,d){if(u){u=u.split("&");for(var g=0;g<u.length;g++){var _=u[g].indexOf("="),N=null;if(0<=_){var V=u[g].substring(0,_);N=u[g].substring(_+1)}else V=u[g];d(V,N?decodeURIComponent(N.replace(/\+/g," ")):"")}}}function yi(u){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,u instanceof yi){this.h=u.h,oc(this,u.j),this.o=u.o,this.g=u.g,ac(this,u.s),this.l=u.l;var d=u.i,g=new Qo;g.i=d.i,d.g&&(g.g=new Map(d.g),g.h=d.h),tv(this,g),this.m=u.m}else u&&(d=String(u).match(ev))?(this.h=!1,oc(this,d[1]||"",!0),this.o=Wo(d[2]||""),this.g=Wo(d[3]||"",!0),ac(this,d[4]),this.l=Wo(d[5]||"",!0),tv(this,d[6]||"",!0),this.m=Wo(d[7]||"")):(this.h=!1,this.i=new Qo(null,this.h))}yi.prototype.toString=function(){var u=[],d=this.j;d&&u.push(Ko(d,nv,!0),":");var g=this.g;return(g||d=="file")&&(u.push("//"),(d=this.o)&&u.push(Ko(d,nv,!0),"@"),u.push(encodeURIComponent(String(g)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),g=this.s,g!=null&&u.push(":",String(g))),(g=this.l)&&(this.g&&g.charAt(0)!="/"&&u.push("/"),u.push(Ko(g,g.charAt(0)=="/"?Cb:Db,!0))),(g=this.i.toString())&&u.push("?",g),(g=this.m)&&u.push("#",Ko(g,bb)),u.join("")};function $n(u){return new yi(u)}function oc(u,d,g){u.j=g?Wo(d,!0):d,u.j&&(u.j=u.j.replace(/:$/,""))}function ac(u,d){if(d){if(d=Number(d),isNaN(d)||0>d)throw Error("Bad port number "+d);u.s=d}else u.s=null}function tv(u,d,g){d instanceof Qo?(u.i=d,Tb(u.i,u.h)):(g||(d=Ko(d,Ab)),u.i=new Qo(d,u.h))}function Pe(u,d,g){u.i.set(d,g)}function uc(u){return Pe(u,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),u}function Wo(u,d){return u?d?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function Ko(u,d,g){return typeof u=="string"?(u=encodeURI(u).replace(d,wb),g&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function wb(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var nv=/[#\/\?@]/g,Db=/[#\?:]/g,Cb=/[#\?]/g,Ab=/[#\?@]/g,bb=/#/g;function Qo(u,d){this.h=this.g=null,this.i=u||null,this.j=!!d}function Er(u){u.g||(u.g=new Map,u.h=0,u.i&&Eb(u.i,function(d,g){u.add(decodeURIComponent(d.replace(/\+/g," ")),g)}))}n=Qo.prototype,n.add=function(u,d){Er(this),this.i=null,u=cs(this,u);var g=this.g.get(u);return g||this.g.set(u,g=[]),g.push(d),this.h+=1,this};function rv(u,d){Er(u),d=cs(u,d),u.g.has(d)&&(u.i=null,u.h-=u.g.get(d).length,u.g.delete(d))}function iv(u,d){return Er(u),d=cs(u,d),u.g.has(d)}n.forEach=function(u,d){Er(this),this.g.forEach(function(g,_){g.forEach(function(N){u.call(d,N,_,this)},this)},this)},n.na=function(){Er(this);let u=Array.from(this.g.values()),d=Array.from(this.g.keys()),g=[];for(let _=0;_<d.length;_++){let N=u[_];for(let V=0;V<N.length;V++)g.push(d[_])}return g},n.V=function(u){Er(this);let d=[];if(typeof u=="string")iv(this,u)&&(d=d.concat(this.g.get(cs(this,u))));else{u=Array.from(this.g.values());for(let g=0;g<u.length;g++)d=d.concat(u[g])}return d},n.set=function(u,d){return Er(this),this.i=null,u=cs(this,u),iv(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[d]),this.h+=1,this},n.get=function(u,d){return u?(u=this.V(u),0<u.length?String(u[0]):d):d};function sv(u,d,g){rv(u,d),0<g.length&&(u.i=null,u.g.set(cs(u,d),w(g)),u.h+=g.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";let u=[],d=Array.from(this.g.keys());for(var g=0;g<d.length;g++){var _=d[g];let V=encodeURIComponent(String(_)),G=this.V(_);for(_=0;_<G.length;_++){var N=V;G[_]!==""&&(N+="="+encodeURIComponent(String(G[_]))),u.push(N)}}return this.i=u.join("&")};function cs(u,d){return d=String(d),u.j&&(d=d.toLowerCase()),d}function Tb(u,d){d&&!u.j&&(Er(u),u.i=null,u.g.forEach(function(g,_){var N=_.toLowerCase();_!=N&&(rv(this,_),sv(this,N,g))},u)),u.j=d}function Ib(u,d){let g=new Ho;if(a.Image){let _=new Image;_.onload=m(wr,g,"TestLoadImage: loaded",!0,d,_),_.onerror=m(wr,g,"TestLoadImage: error",!1,d,_),_.onabort=m(wr,g,"TestLoadImage: abort",!1,d,_),_.ontimeout=m(wr,g,"TestLoadImage: timeout",!1,d,_),a.setTimeout(function(){_.ontimeout&&_.ontimeout()},1e4),_.src=u}else d(!1)}function Sb(u,d){let g=new Ho,_=new AbortController,N=setTimeout(()=>{_.abort(),wr(g,"TestPingServer: timeout",!1,d)},1e4);fetch(u,{signal:_.signal}).then(V=>{clearTimeout(N),V.ok?wr(g,"TestPingServer: ok",!0,d):wr(g,"TestPingServer: server error",!1,d)}).catch(()=>{clearTimeout(N),wr(g,"TestPingServer: error",!1,d)})}function wr(u,d,g,_,N){try{N&&(N.onload=null,N.onerror=null,N.onabort=null,N.ontimeout=null),_(g)}catch{}}function Rb(){this.g=new Ju}function Fb(u,d,g){let _=g||"";try{Jy(u,function(N,V){let G=N;l(N)&&(G=os(N)),d.push(_+V+"="+encodeURIComponent(G))})}catch(N){throw d.push(_+"type="+encodeURIComponent("_badmap")),N}}function Xo(u){this.l=u.Ub||null,this.j=u.eb||!1}y(Xo,jo),Xo.prototype.g=function(){return new cc(this.l,this.j)},Xo.prototype.i=function(u){return function(){return u}}({});function cc(u,d){et.call(this),this.D=u,this.o=d,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}y(cc,et),n=cc.prototype,n.open=function(u,d){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=u,this.A=d,this.readyState=1,Zo(this)},n.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let d={headers:this.u,method:this.B,credentials:this.m,cache:void 0};u&&(d.body=u),(this.D||a).fetch(new Request(this.A,d)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Yo(this)),this.readyState=0},n.Sa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,Zo(this)),this.g&&(this.readyState=3,Zo(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;ov(this)}else u.text().then(this.Ra.bind(this),this.ga.bind(this))};function ov(u){u.j.read().then(u.Pa.bind(u)).catch(u.ga.bind(u))}n.Pa=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var d=u.value?u.value:new Uint8Array(0);(d=this.v.decode(d,{stream:!u.done}))&&(this.response=this.responseText+=d)}u.done?Yo(this):Zo(this),this.readyState==3&&ov(this)}},n.Ra=function(u){this.g&&(this.response=this.responseText=u,Yo(this))},n.Qa=function(u){this.g&&(this.response=u,Yo(this))},n.ga=function(){this.g&&Yo(this)};function Yo(u){u.readyState=4,u.l=null,u.j=null,u.v=null,Zo(u)}n.setRequestHeader=function(u,d){this.u.append(u,d)},n.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";let u=[],d=this.h.entries();for(var g=d.next();!g.done;)g=g.value,u.push(g[0]+": "+g[1]),g=d.next();return u.join(`\r
`)};function Zo(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(cc.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function av(u){let d="";return P(u,function(g,_){d+=_,d+=":",d+=g,d+=`\r
`}),d}function bf(u,d,g){e:{for(_ in g){var _=!1;break e}_=!0}_||(g=av(g),typeof u=="string"?g!=null&&encodeURIComponent(String(g)):Pe(u,d,g))}function Le(u){et.call(this),this.headers=new Map,this.o=u||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}y(Le,et);var Pb=/^https?$/i,kb=["POST","PUT"];n=Le.prototype,n.Ha=function(u){this.J=u},n.ea=function(u,d,g,_){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);d=d?d.toUpperCase():"GET",this.D=u,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():_f.g(),this.v=this.o?zo(this.o):zo(_f),this.g.onreadystatechange=p(this.Ea,this);try{this.B=!0,this.g.open(d,String(u),!0),this.B=!1}catch(V){uv(this,V);return}if(u=g||"",g=new Map(this.headers),_)if(Object.getPrototypeOf(_)===Object.prototype)for(var N in _)g.set(N,_[N]);else if(typeof _.keys=="function"&&typeof _.get=="function")for(let V of _.keys())g.set(V,_.get(V));else throw Error("Unknown input type for opt_headers: "+String(_));_=Array.from(g.keys()).find(V=>V.toLowerCase()=="content-type"),N=a.FormData&&u instanceof a.FormData,!(0<=Array.prototype.indexOf.call(kb,d,void 0))||_||N||g.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[V,G]of g)this.g.setRequestHeader(V,G);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{hv(this),this.u=!0,this.g.send(u),this.u=!1}catch(V){uv(this,V)}};function uv(u,d){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=d,u.m=5,cv(u),lc(u)}function cv(u){u.A||(u.A=!0,at(u,"complete"),at(u,"error"))}n.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=u||7,at(this,"complete"),at(this,"abort"),lc(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),lc(this,!0)),Le.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?lv(this):this.bb())},n.bb=function(){lv(this)};function lv(u){if(u.h&&typeof o<"u"&&(!u.v[1]||qn(u)!=4||u.Z()!=2)){if(u.u&&qn(u)==4)yr(u.Ea,0,u);else if(at(u,"readystatechange"),qn(u)==4){u.h=!1;try{let G=u.Z();e:switch(G){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var d=!0;break e;default:d=!1}var g;if(!(g=d)){var _;if(_=G===0){var N=String(u.D).match(ev)[1]||null;!N&&a.self&&a.self.location&&(N=a.self.location.protocol.slice(0,-1)),_=!Pb.test(N?N.toLowerCase():"")}g=_}if(g)at(u,"complete"),at(u,"success");else{u.m=6;try{var V=2<qn(u)?u.g.statusText:""}catch{V=""}u.l=V+" ["+u.Z()+"]",cv(u)}}finally{lc(u)}}}}function lc(u,d){if(u.g){hv(u);let g=u.g,_=u.v[0]?()=>{}:null;u.g=null,u.v=null,d||at(u,"ready");try{g.onreadystatechange=_}catch{}}}function hv(u){u.I&&(a.clearTimeout(u.I),u.I=null)}n.isActive=function(){return!!this.g};function qn(u){return u.g?u.g.readyState:0}n.Z=function(){try{return 2<qn(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(u){if(this.g){var d=this.g.responseText;return u&&d.indexOf(u)==0&&(d=d.substring(u.length)),vf(d)}};function dv(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.H){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function Nb(u){let d={};u=(u.g&&2<=qn(u)&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let _=0;_<u.length;_++){if(D(u[_]))continue;var g=A(u[_]);let N=g[0];if(g=g[1],typeof g!="string")continue;g=g.trim();let V=d[N]||[];d[N]=V,V.push(g)}T(d,function(_){return _.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Jo(u,d,g){return g&&g.internalChannelParams&&g.internalChannelParams[u]||d}function fv(u){this.Aa=0,this.i=[],this.j=new Ho,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Jo("failFast",!1,u),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Jo("baseRetryDelayMs",5e3,u),this.cb=Jo("retryDelaySeedMs",1e4,u),this.Wa=Jo("forwardChannelMaxRetries",2,u),this.wa=Jo("forwardChannelRequestTimeoutMs",2e4,u),this.pa=u&&u.xmlHttpFactory||void 0,this.Xa=u&&u.Tb||void 0,this.Ca=u&&u.useFetchStreams||!1,this.L=void 0,this.J=u&&u.supportsCrossDomainXhr||!1,this.K="",this.h=new Ky(u&&u.concurrentRequestLimit),this.Da=new Rb,this.P=u&&u.fastHandshake||!1,this.O=u&&u.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=u&&u.Rb||!1,u&&u.xa&&this.j.xa(),u&&u.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&u&&u.detectBufferingProxy||!1,this.ja=void 0,u&&u.longPollingTimeout&&0<u.longPollingTimeout&&(this.ja=u.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=fv.prototype,n.la=8,n.G=1,n.connect=function(u,d,g,_){Ne(0),this.W=u,this.H=d||{},g&&_!==void 0&&(this.H.OSID=g,this.H.OAID=_),this.F=this.X,this.I=wv(this,null,this.W),dc(this)};function Tf(u){if(pv(u),u.G==3){var d=u.U++,g=$n(u.I);if(Pe(g,"SID",u.K),Pe(g,"RID",d),Pe(g,"TYPE","terminate"),ea(u,g),d=new xr(u,u.j,d),d.L=2,d.v=uc($n(g)),g=!1,a.navigator&&a.navigator.sendBeacon)try{g=a.navigator.sendBeacon(d.v.toString(),"")}catch{}!g&&a.Image&&(new Image().src=d.v,g=!0),g||(d.g=Dv(d.j,null),d.g.ea(d.v)),d.F=Date.now(),sc(d)}Ev(u)}function hc(u){u.g&&(Sf(u),u.g.cancel(),u.g=null)}function pv(u){hc(u),u.u&&(a.clearTimeout(u.u),u.u=null),fc(u),u.h.cancel(),u.s&&(typeof u.s=="number"&&a.clearTimeout(u.s),u.s=null)}function dc(u){if(!Qy(u.h)&&!u.s){u.s=!0;var d=u.Ga;oe||q(),le||(oe(),le=!0),L.add(d,u),u.B=0}}function Mb(u,d){return Xy(u.h)>=u.h.j-(u.s?1:0)?!1:u.s?(u.i=d.D.concat(u.i),!0):u.G==1||u.G==2||u.B>=(u.Va?0:u.Wa)?!1:(u.s=gi(p(u.Ga,u,d),xv(u,u.B)),u.B++,!0)}n.Ga=function(u){if(this.s)if(this.s=null,this.G==1){if(!u){this.U=Math.floor(1e5*Math.random()),u=this.U++;let N=new xr(this,this.j,u),V=this.o;if(this.S&&(V?(V=v(V),I(V,this.S)):V=this.S),this.m!==null||this.O||(N.H=V,V=null),this.P)e:{for(var d=0,g=0;g<this.i.length;g++){t:{var _=this.i[g];if("__data__"in _.map&&(_=_.map.__data__,typeof _=="string")){_=_.length;break t}_=void 0}if(_===void 0)break;if(d+=_,4096<d){d=g;break e}if(d===4096||g===this.i.length-1){d=g+1;break e}}d=1e3}else d=1e3;d=mv(this,N,d),g=$n(this.I),Pe(g,"RID",u),Pe(g,"CVER",22),this.D&&Pe(g,"X-HTTP-Session-Id",this.D),ea(this,g),V&&(this.O?d="headers="+encodeURIComponent(String(av(V)))+"&"+d:this.m&&bf(g,this.m,V)),Af(this.h,N),this.Ua&&Pe(g,"TYPE","init"),this.P?(Pe(g,"$req",d),Pe(g,"SID","null"),N.T=!0,Ef(N,g,null)):Ef(N,g,d),this.G=2}}else this.G==3&&(u?gv(this,u):this.i.length==0||Qy(this.h)||gv(this))};function gv(u,d){var g;d?g=d.l:g=u.U++;let _=$n(u.I);Pe(_,"SID",u.K),Pe(_,"RID",g),Pe(_,"AID",u.T),ea(u,_),u.m&&u.o&&bf(_,u.m,u.o),g=new xr(u,u.j,g,u.B+1),u.m===null&&(g.H=u.o),d&&(u.i=d.D.concat(u.i)),d=mv(u,g,1e3),g.I=Math.round(.5*u.wa)+Math.round(.5*u.wa*Math.random()),Af(u.h,g),Ef(g,_,d)}function ea(u,d){u.H&&P(u.H,function(g,_){Pe(d,_,g)}),u.l&&Jy({},function(g,_){Pe(d,_,g)})}function mv(u,d,g){g=Math.min(u.i.length,g);var _=u.l?p(u.l.Na,u.l,u):null;e:{var N=u.i;let V=-1;for(;;){let G=["count="+g];V==-1?0<g?(V=N[0].g,G.push("ofs="+V)):V=0:G.push("ofs="+V);let Se=!0;for(let ct=0;ct<g;ct++){let Ee=N[ct].g,gt=N[ct].map;if(Ee-=V,0>Ee)V=Math.max(0,N[ct].g-100),Se=!1;else try{Fb(gt,G,"req"+Ee+"_")}catch{_&&_(gt)}}if(Se){_=G.join("&");break e}}}return u=u.i.splice(0,g),d.D=u,_}function yv(u){if(!u.g&&!u.u){u.Y=1;var d=u.Fa;oe||q(),le||(oe(),le=!0),L.add(d,u),u.v=0}}function If(u){return u.g||u.u||3<=u.v?!1:(u.Y++,u.u=gi(p(u.Fa,u),xv(u,u.v)),u.v++,!0)}n.Fa=function(){if(this.u=null,vv(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var u=2*this.R;this.j.info("BP detection timer enabled: "+u),this.A=gi(p(this.ab,this),u)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Ne(10),hc(this),vv(this))};function Sf(u){u.A!=null&&(a.clearTimeout(u.A),u.A=null)}function vv(u){u.g=new xr(u,u.j,"rpc",u.Y),u.m===null&&(u.g.H=u.o),u.g.O=0;var d=$n(u.qa);Pe(d,"RID","rpc"),Pe(d,"SID",u.K),Pe(d,"AID",u.T),Pe(d,"CI",u.F?"0":"1"),!u.F&&u.ja&&Pe(d,"TO",u.ja),Pe(d,"TYPE","xmlhttp"),ea(u,d),u.m&&u.o&&bf(d,u.m,u.o),u.L&&(u.g.I=u.L);var g=u.g;u=u.ia,g.L=1,g.v=uc($n(d)),g.m=null,g.P=!0,Hy(g,u)}n.Za=function(){this.C!=null&&(this.C=null,hc(this),If(this),Ne(19))};function fc(u){u.C!=null&&(a.clearTimeout(u.C),u.C=null)}function _v(u,d){var g=null;if(u.g==d){fc(u),Sf(u),u.g=null;var _=2}else if(Cf(u.h,d))g=d.D,Yy(u.h,d),_=1;else return;if(u.G!=0){if(d.o)if(_==1){g=d.m?d.m.length:0,d=Date.now()-d.F;var N=u.B;_=pi(),at(_,new qo(_,g)),dc(u)}else yv(u);else if(N=d.s,N==3||N==0&&0<d.X||!(_==1&&Mb(u,d)||_==2&&If(u)))switch(g&&0<g.length&&(d=u.h,d.i=d.i.concat(g)),N){case 1:vi(u,5);break;case 4:vi(u,10);break;case 3:vi(u,6);break;default:vi(u,2)}}}function xv(u,d){let g=u.Ta+Math.floor(Math.random()*u.cb);return u.isActive()||(g*=2),g*d}function vi(u,d){if(u.j.info("Error code "+d),d==2){var g=p(u.fb,u),_=u.Xa;let N=!_;_=new yi(_||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||oc(_,"https"),uc(_),N?Ib(_.toString(),g):Sb(_.toString(),g)}else Ne(2);u.G=0,u.l&&u.l.sa(d),Ev(u),pv(u)}n.fb=function(u){u?(this.j.info("Successfully pinged google.com"),Ne(2)):(this.j.info("Failed to ping google.com"),Ne(1))};function Ev(u){if(u.G=0,u.ka=[],u.l){let d=Zy(u.h);(d.length!=0||u.i.length!=0)&&(E(u.ka,d),E(u.ka,u.i),u.h.i.length=0,w(u.i),u.i.length=0),u.l.ra()}}function wv(u,d,g){var _=g instanceof yi?$n(g):new yi(g);if(_.g!="")d&&(_.g=d+"."+_.g),ac(_,_.s);else{var N=a.location;_=N.protocol,d=d?d+"."+N.hostname:N.hostname,N=+N.port;var V=new yi(null);_&&oc(V,_),d&&(V.g=d),N&&ac(V,N),g&&(V.l=g),_=V}return g=u.D,d=u.ya,g&&d&&Pe(_,g,d),Pe(_,"VER",u.la),ea(u,_),_}function Dv(u,d,g){if(d&&!u.J)throw Error("Can't create secondary domain capable XhrIo object.");return d=u.Ca&&!u.pa?new Le(new Xo({eb:g})):new Le(u.pa),d.Ha(u.J),d}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function Cv(){}n=Cv.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function pc(){}pc.prototype.g=function(u,d){return new Mt(u,d)};function Mt(u,d){et.call(this),this.g=new fv(d),this.l=u,this.h=d&&d.messageUrlParams||null,u=d&&d.messageHeaders||null,d&&d.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=d&&d.initMessageHeaders||null,d&&d.messageContentType&&(u?u["X-WebChannel-Content-Type"]=d.messageContentType:u={"X-WebChannel-Content-Type":d.messageContentType}),d&&d.va&&(u?u["X-WebChannel-Client-Profile"]=d.va:u={"X-WebChannel-Client-Profile":d.va}),this.g.S=u,(u=d&&d.Sb)&&!D(u)&&(this.g.m=u),this.v=d&&d.supportsCrossDomainXhr||!1,this.u=d&&d.sendRawJson||!1,(d=d&&d.httpSessionIdParam)&&!D(d)&&(this.g.D=d,u=this.h,u!==null&&d in u&&(u=this.h,d in u&&delete u[d])),this.j=new ls(this)}y(Mt,et),Mt.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Mt.prototype.close=function(){Tf(this.g)},Mt.prototype.o=function(u){var d=this.g;if(typeof u=="string"){var g={};g.__data__=u,u=g}else this.u&&(g={},g.__data__=os(u),u=g);d.i.push(new vb(d.Ya++,u)),d.G==3&&dc(d)},Mt.prototype.N=function(){this.g.l=null,delete this.j,Tf(this.g),delete this.g,Mt.aa.N.call(this)};function Av(u){$o.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var d=u.__sm__;if(d){e:{for(let g in d){u=g;break e}u=void 0}(this.i=u)&&(u=this.i,d=d!==null&&u in d?d[u]:void 0),this.data=d}else this.data=u}y(Av,$o);function bv(){as.call(this),this.status=1}y(bv,as);function ls(u){this.g=u}y(ls,Cv),ls.prototype.ua=function(){at(this.g,"a")},ls.prototype.ta=function(u){at(this.g,new Av(u))},ls.prototype.sa=function(u){at(this.g,new bv)},ls.prototype.ra=function(){at(this.g,"b")},pc.prototype.createWebChannel=pc.prototype.g,Mt.prototype.send=Mt.prototype.o,Mt.prototype.open=Mt.prototype.m,Mt.prototype.close=Mt.prototype.close,Lp=tr.createWebChannelTransport=function(){return new pc},Vp=tr.getStatEventTarget=function(){return pi()},Bp=tr.Event=zn,nh=tr.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},rc.NO_ERROR=0,rc.TIMEOUT=8,rc.HTTP_ERROR=6,tu=tr.ErrorCode=rc,zy.COMPLETE="complete",Op=tr.EventType=zy,ec.EventType=fi,fi.OPEN="a",fi.CLOSE="b",fi.ERROR="c",fi.MESSAGE="d",et.prototype.listen=et.prototype.K,Hs=tr.WebChannel=ec,dF=tr.FetchXmlHttpFactory=Xo,Le.prototype.listenOnce=Le.prototype.L,Le.prototype.getLastError=Le.prototype.Ka,Le.prototype.getLastErrorCode=Le.prototype.Ba,Le.prototype.getStatus=Le.prototype.Z,Le.prototype.getResponseJson=Le.prototype.Oa,Le.prototype.getResponseText=Le.prototype.oa,Le.prototype.send=Le.prototype.ea,Le.prototype.setWithCredentials=Le.prototype.Ha,Mp=tr.XhrIo=Le}).apply(typeof th<"u"?th:typeof self<"u"?self:typeof window<"u"?window:{});var zw="@firebase/firestore",$w="4.7.10";var Ze=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};Ze.UNAUTHENTICATED=new Ze(null),Ze.GOOGLE_CREDENTIALS=new Ze("google-credentials-uid"),Ze.FIRST_PARTY=new Ze("first-party-uid"),Ze.MOCK_USER=new Ze("mock-user");var ko="11.5.0";var Hr=new Pc("@firebase/firestore");function Zs(){return Hr.logLevel}function YB(n){Hr.setLogLevel(n)}function z(n,...e){if(Hr.logLevel<=wn.DEBUG){let t=e.map(Jm);Hr.debug(`Firestore (${ko}): ${n}`,...t)}}function je(n,...e){if(Hr.logLevel<=wn.ERROR){let t=e.map(Jm);Hr.error(`Firestore (${ko}): ${n}`,...t)}}function ir(n,...e){if(Hr.logLevel<=wn.WARN){let t=e.map(Jm);Hr.warn(`Firestore (${ko}): ${n}`,...t)}}function Jm(n){if(typeof n=="string")return n;try{return function(t){return JSON.stringify(t)}(n)}catch{return n}}function Y(n="Unexpected state"){let e=`FIRESTORE (${ko}) INTERNAL ASSERTION FAILED: `+n;throw je(e),new Error(e)}function Z(n,e){n||Y()}function ZB(n,e){n||Y()}function W(n,e){return n}var B={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},$=class extends Rc{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var rt=class{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}};var gh=class{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},Wp=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Ze.UNAUTHENTICATED))}shutdown(){}},Kp=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}},Qp=class{constructor(e){this.t=e,this.currentUser=Ze.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Z(this.o===void 0);let r=this.i,i=c=>this.i!==r?(r=this.i,t(c)):Promise.resolve(),s=new rt;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new rt,e.enqueueRetryable(()=>i(this.currentUser))};let o=()=>{let c=s;e.enqueueRetryable(()=>O(this,null,function*(){yield c.promise,yield i(this.currentUser)}))},a=c=>{z("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(c=>a(c)),setTimeout(()=>{if(!this.auth){let c=this.t.getImmediate({optional:!0});c?a(c):(z("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new rt)}},0),o()}getToken(){let e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(z("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Z(typeof r.accessToken=="string"),new gh(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){let e=this.auth&&this.auth.getUid();return Z(e===null||typeof e=="string"),new Ze(e)}},Xp=class{constructor(e,t,r){this.l=e,this.h=t,this.P=r,this.type="FirstParty",this.user=Ze.FIRST_PARTY,this.T=new Map}I(){return this.P?this.P():null}get headers(){this.T.set("X-Goog-AuthUser",this.l);let e=this.I();return e&&this.T.set("Authorization",e),this.h&&this.T.set("X-Goog-Iam-Authorization-Token",this.h),this.T}},Yp=class{constructor(e,t,r){this.l=e,this.h=t,this.P=r}getToken(){return Promise.resolve(new Xp(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable(()=>t(Ze.FIRST_PARTY))}shutdown(){}invalidateToken(){}},mh=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},Zp=class{constructor(e,t){this.A=t,this.forceRefresh=!1,this.appCheck=null,this.R=null,this.V=null,Nc(e)&&e.settings.appCheckToken&&(this.V=e.settings.appCheckToken)}start(e,t){Z(this.o===void 0);let r=s=>{s.error!=null&&z("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);let o=s.token!==this.R;return this.R=s.token,z("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?t(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};let i=s=>{z("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){let s=this.A.getImmediate({optional:!0});s?i(s):z("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.V)return Promise.resolve(new mh(this.V));let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Z(typeof t.token=="string"),this.R=t.token,new mh(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}};function fF(n){let e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}function ey(){return new TextEncoder}var yh=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516),r="";for(;r.length<20;){let i=fF(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<t&&(r+=e.charAt(i[s]%62))}return r}};function se(n,e){return n<e?-1:n>e?1:0}function Jp(n,e){let t=0;for(;t<n.length&&t<e.length;){let r=n.codePointAt(t),i=e.codePointAt(t);if(r!==i){if(r<128&&i<128)return se(r,i);{let s=ey(),o=pF(s.encode(qw(n,t)),s.encode(qw(e,t)));return o!==0?o:se(r,i)}}t+=r>65535?2:1}return se(n.length,e.length)}function qw(n,e){return n.codePointAt(e)>65535?n.substring(e,e+2):n.substring(e,e+1)}function pF(n,e){for(let t=0;t<n.length&&t<e.length;++t)if(n[t]!==e[t])return se(n[t],e[t]);return se(n.length,e.length)}function uo(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}function rD(n){return n+"\0"}var Hw=-62135596800,Gw=1e6,ze=class n{static now(){return n.fromMillis(Date.now())}static fromDate(e){return n.fromMillis(e.getTime())}static fromMillis(e){let t=Math.floor(e/1e3),r=Math.floor((e-1e3*t)*Gw);return new n(t,r)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new $(B.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new $(B.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<Hw)throw new $(B.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new $(B.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Gw}_compareTo(e){return this.seconds===e.seconds?se(this.nanoseconds,e.nanoseconds):se(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){let e=this.seconds-Hw;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};var J=class n{static fromTimestamp(e){return new n(e)}static min(){return new n(new ze(0,0))}static max(){return new n(new ze(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var Ww="__name__",vh=class n{constructor(e,t,r){t===void 0?t=0:t>e.length&&Y(),r===void 0?r=e.length-t:r>e.length-t&&Y(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return n.comparator(this,e)===0}child(e){let t=this.segments.slice(this.offset,this.limit());return e instanceof n?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){let r=Math.min(e.length,t.length);for(let i=0;i<r;i++){let s=n.compareSegments(e.get(i),t.get(i));if(s!==0)return s}return se(e.length,t.length)}static compareSegments(e,t){let r=n.isNumericId(e),i=n.isNumericId(t);return r&&!i?-1:!r&&i?1:r&&i?n.extractNumericId(e).compare(n.extractNumericId(t)):Jp(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return er.fromString(e.substring(4,e.length-2))}},_e=class n extends vh{construct(e,t,r){return new n(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let t=[];for(let r of e){if(r.indexOf("//")>=0)throw new $(B.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new n(t)}static emptyPath(){return new n([])}},gF=/^[_a-zA-Z][_a-zA-Z0-9]*$/,it=class n extends vh{construct(e,t,r){return new n(e,t,r)}static isValidIdentifier(e){return gF.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Ww}static keyField(){return new n([Ww])}static fromServerFormat(e){let t=[],r="",i=0,s=()=>{if(r.length===0)throw new $(B.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""},o=!1;for(;i<e.length;){let a=e[i];if(a==="\\"){if(i+1===e.length)throw new $(B.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let c=e[i+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new $(B.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=c,i+=2}else a==="`"?(o=!o,i++):a!=="."||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new $(B.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}static emptyPath(){return new n([])}};var K=class n{constructor(e){this.path=e}static fromPath(e){return new n(_e.fromString(e))}static fromName(e){return new n(_e.fromString(e).popFirst(5))}static empty(){return new n(_e.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&_e.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return _e.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new n(new _e(e.slice()))}};var co=-1,lo=class{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}};function eg(n){return n.fields.find(e=>e.kind===2)}function Bi(n){return n.fields.filter(e=>e.kind!==2)}lo.UNKNOWN_ID=-1;var io=class{constructor(e,t){this.fieldPath=e,this.kind=t}};var pu=class n{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new n(0,tn.min())}};function iD(n,e){let t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=J.fromTimestamp(r===1e9?new ze(t+1,0):new ze(t,r));return new tn(i,K.empty(),e)}function sD(n){return new tn(n.readTime,n.key,co)}var tn=class n{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new n(J.min(),K.empty(),co)}static max(){return new n(J.max(),K.empty(),co)}};function ty(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=K.comparator(n.documentKey,e.documentKey),t!==0?t:se(n.largestBatchId,e.largestBatchId))}var oD="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",_h=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};function ii(n){return O(this,null,function*(){if(n.code!==B.FAILED_PRECONDITION||n.message!==oD)throw n;z("LocalStore","Unexpectedly lost primary lease")})}var M=class n{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Y(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new n((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(t,s).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{let t=e();return t instanceof n?t:n.resolve(t)}catch(t){return n.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):n.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):n.reject(t)}static resolve(e){return new n((t,r)=>{t(e)})}static reject(e){return new n((t,r)=>{r(e)})}static waitFor(e){return new n((t,r)=>{let i=0,s=0,o=!1;e.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&t()},c=>r(c))}),o=!0,s===i&&t()})}static or(e){let t=n.resolve(!1);for(let r of e)t=t.next(i=>i?n.resolve(i):r());return t}static forEach(e,t){let r=[];return e.forEach((i,s)=>{r.push(t.call(this,i,s))}),this.waitFor(r)}static mapArray(e,t){return new n((r,i)=>{let s=e.length,o=new Array(s),a=0;for(let c=0;c<s;c++){let l=c;t(e[l]).next(h=>{o[l]=h,++a,a===s&&r(o)},h=>i(h))}})}static doWhile(e,t){return new n((r,i)=>{let s=()=>{e()===!0?t().next(()=>{s()},i):r()};s()})}};var Gt="SimpleDb",xh=class n{static open(e,t,r,i){try{return new n(t,e.transaction(i,r))}catch(s){throw new Hi(t,s)}}constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.m=new rt,this.transaction.oncomplete=()=>{this.m.resolve()},this.transaction.onabort=()=>{t.error?this.m.reject(new Hi(e,t.error)):this.m.resolve()},this.transaction.onerror=r=>{let i=ny(r.target.error);this.m.reject(new Hi(e,i))}}get p(){return this.m.promise}abort(e){e&&this.m.reject(e),this.aborted||(z(Gt,"Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}S(){let e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){let t=this.transaction.objectStore(e);return new ng(t)}},Gr=class n{static delete(e){return z(Gt,"Removing database:",e),Li(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!Sc())return!1;if(n.v())return!0;let e=ua(),t=n.C(e),r=0<t&&t<10,i=aD(e),s=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||s)}static v(){var e;return typeof process<"u"&&((e=process.__PRIVATE_env)===null||e===void 0?void 0:e.F)==="YES"}static M(e,t){return e.store(t)}static C(e){let t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}constructor(e,t,r){this.name=e,this.version=t,this.O=r,n.C(ua())===12.2&&je("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}N(e){return O(this,null,function*(){return this.db||(z(Gt,"Opening database:",this.name),this.db=yield new Promise((t,r)=>{let i=indexedDB.open(this.name,this.version);i.onsuccess=s=>{let o=s.target.result;t(o)},i.onblocked=()=>{r(new Hi(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=s=>{let o=s.target.error;o.name==="VersionError"?r(new $(B.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):o.name==="InvalidStateError"?r(new $(B.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+o)):r(new Hi(e,o))},i.onupgradeneeded=s=>{z(Gt,'Database "'+this.name+'" requires upgrade from version:',s.oldVersion);let o=s.target.result;this.O.B(o,i.transaction,s.oldVersion,this.version).next(()=>{z(Gt,"Database upgrade to version "+this.version+" complete")})}})),this.L&&(this.db.onversionchange=t=>this.L(t)),this.db})}k(e){this.L=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,i){return O(this,null,function*(){let s=t==="readonly",o=0;for(;;){++o;try{this.db=yield this.N(e);let a=xh.open(this.db,e,s?"readonly":"readwrite",r),c=i(a).next(l=>(a.S(),l)).catch(l=>(a.abort(l),M.reject(l))).toPromise();return c.catch(()=>{}),yield a.p,c}catch(a){let c=a,l=c.name!=="FirebaseError"&&o<3;if(z(Gt,"Transaction failed with error:",c.message,"Retrying:",l),this.close(),!l)return Promise.reject(c)}}})}close(){this.db&&this.db.close(),this.db=void 0}};function aD(n){let e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}var tg=class{constructor(e){this.q=e,this.$=!1,this.U=null}get isDone(){return this.$}get K(){return this.U}set cursor(e){this.q=e}done(){this.$=!0}W(e){this.U=e}delete(){return Li(this.q.delete())}},Hi=class extends ${constructor(e,t){super(B.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}};function si(n){return n.name==="IndexedDbTransactionError"}var ng=class{constructor(e){this.store=e}put(e,t){let r;return t!==void 0?(z(Gt,"PUT",this.store.name,e,t),r=this.store.put(t,e)):(z(Gt,"PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),Li(r)}add(e){return z(Gt,"ADD",this.store.name,e,e),Li(this.store.add(e))}get(e){return Li(this.store.get(e)).next(t=>(t===void 0&&(t=null),z(Gt,"GET",this.store.name,e,t),t))}delete(e){return z(Gt,"DELETE",this.store.name,e),Li(this.store.delete(e))}count(){return z(Gt,"COUNT",this.store.name),Li(this.store.count())}G(e,t){let r=this.options(e,t),i=r.index?this.store.index(r.index):this.store;if(typeof i.getAll=="function"){let s=i.getAll(r.range);return new M((o,a)=>{s.onerror=c=>{a(c.target.error)},s.onsuccess=c=>{o(c.target.result)}})}{let s=this.cursor(r),o=[];return this.j(s,(a,c)=>{o.push(c)}).next(()=>o)}}H(e,t){let r=this.store.getAll(e,t===null?void 0:t);return new M((i,s)=>{r.onerror=o=>{s(o.target.error)},r.onsuccess=o=>{i(o.target.result)}})}J(e,t){z(Gt,"DELETE ALL",this.store.name);let r=this.options(e,t);r.Y=!1;let i=this.cursor(r);return this.j(i,(s,o,a)=>a.delete())}Z(e,t){let r;t?r=e:(r={},t=e);let i=this.cursor(r);return this.j(i,t)}X(e){let t=this.cursor({});return new M((r,i)=>{t.onerror=s=>{let o=ny(s.target.error);i(o)},t.onsuccess=s=>{let o=s.target.result;o?e(o.primaryKey,o.value).next(a=>{a?o.continue():r()}):r()}})}j(e,t){let r=[];return new M((i,s)=>{e.onerror=o=>{s(o.target.error)},e.onsuccess=o=>{let a=o.target.result;if(!a)return void i();let c=new tg(a),l=t(a.primaryKey,a.value,c);if(l instanceof M){let h=l.catch(f=>(c.done(),M.reject(f)));r.push(h)}c.isDone?i():c.K===null?a.continue():a.continue(c.K)}}).next(()=>M.waitFor(r))}options(e,t){let r;return e!==void 0&&(typeof e=="string"?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){let r=this.store.index(e.index);return e.Y?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}};function Li(n){return new M((e,t)=>{n.onsuccess=r=>{let i=r.target.result;e(i)},n.onerror=r=>{let i=ny(r.target.error);t(i)}})}var Kw=!1;function ny(n){let e=Gr.C(ua());if(e>=12.2&&e<13){let t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){let r=new $("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return Kw||(Kw=!0,setTimeout(()=>{throw r},0)),r}}return n}var uu="IndexBackfiller",rg=class{constructor(e,t){this.asyncQueue=e,this.ee=t,this.task=null}start(){this.te(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}te(e){z(uu,`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,()=>O(this,null,function*(){this.task=null;try{let t=yield this.ee.ne();z(uu,`Documents written: ${t}`)}catch(t){si(t)?z(uu,"Ignoring IndexedDB error during index backfill: ",t):yield ii(t)}yield this.te(6e4)}))}},ig=class{constructor(e,t){this.localStore=e,this.persistence=t}ne(e=50){return O(this,null,function*(){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",t=>this.re(t,e))})}re(e,t){let r=new Set,i=t,s=!0;return M.doWhile(()=>s===!0&&i>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(o=>{if(o!==null&&!r.has(o))return z(uu,`Processing collection: ${o}`),this.ie(e,o,i).next(a=>{i-=a,r.add(o)});s=!1})).next(()=>t-i)}ie(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(i=>this.localStore.localDocuments.getNextDocuments(e,t,i,r).next(s=>{let o=s.changes;return this.localStore.indexManager.updateIndexEntries(e,o).next(()=>this.se(i,s)).next(a=>(z(uu,`Updating offset: ${a}`),this.localStore.indexManager.updateCollectionGroup(e,t,a))).next(()=>o.size)}))}se(e,t){let r=e;return t.changes.forEach((i,s)=>{let o=sD(s);ty(o,r)>0&&(r=o)}),new tn(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}};var Wt=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=i=>this.oe(i),this._e=i=>r.writeSequenceNumber(i))}oe(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){let t=++this.previousValue;return this._e&&this._e(t),t}}n.ae=-1;return n})(),qr=-1;function Uu(n){return n==null}function gu(n){return n===0&&1/n==-1/0}function uD(n){return typeof n=="number"&&Number.isInteger(n)&&!gu(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}var Eh="";function wt(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=Qw(e)),e=mF(n.get(t),e);return Qw(e)}function mF(n,e){let t=e,r=n.length;for(let i=0;i<r;i++){let s=n.charAt(i);switch(s){case"\0":t+="";break;case Eh:t+="";break;default:t+=s}}return t}function Qw(n){return n+Eh+""}function kn(n){let e=n.length;if(Z(e>=2),e===2)return Z(n.charAt(0)===Eh&&n.charAt(1)===""),_e.emptyPath();let t=e-2,r=[],i="";for(let s=0;s<e;){let o=n.indexOf(Eh,s);switch((o<0||o>t)&&Y(),n.charAt(o+1)){case"":let a=n.substring(s,o),c;i.length===0?c=a:(i+=a,c=i,i=""),r.push(c);break;case"":i+=n.substring(s,o),i+="\0";break;case"":i+=n.substring(s,o+1);break;default:Y()}s=o+2}return new _e(r)}var Vi="remoteDocuments",ju="owner",Gs="owner",mu="mutationQueues",yF="userId",fn="mutations",Xw="batchId",$i="userMutationsIndex",Yw=["userId","batchId"];function uh(n,e){return[n,wt(e)]}function cD(n,e,t){return[n,wt(e),t]}var vF={},ho="documentMutations",wh="remoteDocumentsV14",_F=["prefixPath","collectionGroup","readTime","documentId"],ch="documentKeyIndex",xF=["prefixPath","collectionGroup","documentId"],lD="collectionGroupIndex",EF=["collectionGroup","readTime","prefixPath","documentId"],yu="remoteDocumentGlobal",sg="remoteDocumentGlobalKey",fo="targets",hD="queryTargetsIndex",wF=["canonicalId","targetId"],po="targetDocuments",DF=["targetId","path"],ry="documentTargetsIndex",CF=["path","targetId"],Dh="targetGlobalKey",Gi="targetGlobal",vu="collectionParents",AF=["collectionId","parent"],go="clientMetadata",bF="clientId",_d="bundles",TF="bundleId",xd="namedQueries",IF="name",iy="indexConfiguration",SF="indexId",og="collectionGroupIndex",RF="collectionGroup",Ch="indexState",FF=["indexId","uid"],dD="sequenceNumberIndex",PF=["uid","sequenceNumber"],Ah="indexEntries",kF=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],fD="documentKeyIndex",NF=["indexId","uid","orderedDocumentKey"],Ed="documentOverlays",MF=["userId","collectionPath","documentId"],ag="collectionPathOverlayIndex",OF=["userId","collectionPath","largestBatchId"],pD="collectionGroupOverlayIndex",BF=["userId","collectionGroup","largestBatchId"],sy="globals",VF="name",gD=[mu,fn,ho,Vi,fo,ju,Gi,po,go,yu,vu,_d,xd],LF=[...gD,Ed],mD=[mu,fn,ho,wh,fo,ju,Gi,po,go,yu,vu,_d,xd,Ed],yD=mD,oy=[...yD,iy,Ch,Ah],UF=oy,jF=[...oy,sy];var _u=class extends _h{constructor(e,t){super(),this.ue=e,this.currentSequenceNumber=t}};function st(n,e){let t=W(n);return Gr.M(t.ue,e)}function Zw(n){let e=0;for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function oi(n,e){for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function vD(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}var ke=class n{constructor(e,t){this.comparator=e,this.root=t||Mn.EMPTY}insert(e,t){return new n(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Mn.BLACK,null,null))}remove(e){return new n(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Mn.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){let r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){let i=this.comparator(e,r.key);if(i===0)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){let e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new ro(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new ro(this.root,e,this.comparator,!1)}getReverseIterator(){return new ro(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new ro(this.root,e,this.comparator,!0)}},ro=class{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=t?r(e.key,t):1,t&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},Mn=class n{constructor(e,t,r,i,s){this.key=e,this.value=t,this.color=r??n.RED,this.left=i??n.EMPTY,this.right=s??n.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,s){return new n(e??this.key,t??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this,s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,t,r),null):s===0?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return n.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),t(e,i.key)===0){if(i.right.isEmpty())return n.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Y();let e=this.left.check();if(e!==this.right.check())throw Y();return e+(this.isRed()?0:1)}};Mn.EMPTY=null,Mn.RED=!0,Mn.BLACK=!1;Mn.EMPTY=new class{constructor(){this.size=0}get key(){throw Y()}get value(){throw Y()}get color(){throw Y()}get left(){throw Y()}get right(){throw Y()}copy(e,t,r,i,s){return this}insert(e,t,r){return new Mn(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var Ie=class n{constructor(e){this.comparator=e,this.data=new ke(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){let r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){let i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){let t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new bh(this.data.getIterator())}getIteratorFrom(e){return new bh(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){let i=t.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(t=>{e.push(t)}),e}toString(){let e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){let t=new n(this.comparator);return t.data=e,t}},bh=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};function Ws(n){return n.hasNext()?n.getNext():void 0}var Kt=class n{constructor(e){this.fields=e,e.sort(it.comparator)}static empty(){return new n([])}unionWith(e){let t=new Ie(it.comparator);for(let r of this.fields)t=t.add(r);for(let r of e)t=t.add(r);return new n(t.toArray())}covers(e){for(let t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return uo(this.fields,e.fields,(t,r)=>t.isEqual(r))}};var Th=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};function e8(){return typeof atob<"u"}var He=class n{constructor(e){this.binaryString=e}static fromBase64String(e){let t=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new Th("Invalid base64 string: "+s):s}}(e);return new n(t)}static fromUint8Array(e){let t=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(e);return new n(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){let r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return se(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};He.EMPTY_BYTE_STRING=new He("");var zF=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function sr(n){if(Z(!!n),typeof n=="string"){let e=0,t=zF.exec(n);if(Z(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}let r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Oe(n.seconds),nanos:Oe(n.nanos)}}function Oe(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function or(n){return typeof n=="string"?He.fromBase64String(n):He.fromUint8Array(n)}var _D="server_timestamp",xD="__type__",ED="__previous_value__",wD="__local_write_time__";function wd(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{})[xD])===null||t===void 0?void 0:t.stringValue)===_D}function Dd(n){let e=n.mapValue.fields[ED];return wd(e)?Dd(e):e}function xu(n){let e=sr(n.mapValue.fields[wD].timestampValue);return new ze(e.seconds,e.nanos)}var ug=class{constructor(e,t,r,i,s,o,a,c,l){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=c,this.useFetchStreams=l}},cg="(default)",mo=class n{constructor(e,t){this.projectId=e,this.database=t||cg}static empty(){return new n("","")}get isDefaultDatabase(){return this.database===cg}isEqual(e){return e instanceof n&&e.projectId===this.projectId&&e.database===this.database}};var ay="__type__",DD="__max__",zr={mapValue:{fields:{__type__:{stringValue:DD}}}},uy="__vector__",yo="value",lh={nullValue:"NULL_VALUE"};function Wr(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?wd(n)?4:CD(n)?9007199254740991:Cd(n)?10:11:Y()}function Vn(n,e){if(n===e)return!0;let t=Wr(n);if(t!==Wr(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return xu(n).isEqual(xu(e));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;let o=sr(i.timestampValue),a=sr(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return function(i,s){return or(i.bytesValue).isEqual(or(s.bytesValue))}(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return function(i,s){return Oe(i.geoPointValue.latitude)===Oe(s.geoPointValue.latitude)&&Oe(i.geoPointValue.longitude)===Oe(s.geoPointValue.longitude)}(n,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return Oe(i.integerValue)===Oe(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){let o=Oe(i.doubleValue),a=Oe(s.doubleValue);return o===a?gu(o)===gu(a):isNaN(o)&&isNaN(a)}return!1}(n,e);case 9:return uo(n.arrayValue.values||[],e.arrayValue.values||[],Vn);case 10:case 11:return function(i,s){let o=i.mapValue.fields||{},a=s.mapValue.fields||{};if(Zw(o)!==Zw(a))return!1;for(let c in o)if(o.hasOwnProperty(c)&&(a[c]===void 0||!Vn(o[c],a[c])))return!1;return!0}(n,e);default:return Y()}}function Eu(n,e){return(n.values||[]).find(t=>Vn(t,e))!==void 0}function Kr(n,e){if(n===e)return 0;let t=Wr(n),r=Wr(e);if(t!==r)return se(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return se(n.booleanValue,e.booleanValue);case 2:return function(s,o){let a=Oe(s.integerValue||s.doubleValue),c=Oe(o.integerValue||o.doubleValue);return a<c?-1:a>c?1:a===c?0:isNaN(a)?isNaN(c)?0:-1:1}(n,e);case 3:return Jw(n.timestampValue,e.timestampValue);case 4:return Jw(xu(n),xu(e));case 5:return Jp(n.stringValue,e.stringValue);case 6:return function(s,o){let a=or(s),c=or(o);return a.compareTo(c)}(n.bytesValue,e.bytesValue);case 7:return function(s,o){let a=s.split("/"),c=o.split("/");for(let l=0;l<a.length&&l<c.length;l++){let h=se(a[l],c[l]);if(h!==0)return h}return se(a.length,c.length)}(n.referenceValue,e.referenceValue);case 8:return function(s,o){let a=se(Oe(s.latitude),Oe(o.latitude));return a!==0?a:se(Oe(s.longitude),Oe(o.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return e1(n.arrayValue,e.arrayValue);case 10:return function(s,o){var a,c,l,h;let f=s.fields||{},p=o.fields||{},m=(a=f[yo])===null||a===void 0?void 0:a.arrayValue,y=(c=p[yo])===null||c===void 0?void 0:c.arrayValue,w=se(((l=m?.values)===null||l===void 0?void 0:l.length)||0,((h=y?.values)===null||h===void 0?void 0:h.length)||0);return w!==0?w:e1(m,y)}(n.mapValue,e.mapValue);case 11:return function(s,o){if(s===zr.mapValue&&o===zr.mapValue)return 0;if(s===zr.mapValue)return 1;if(o===zr.mapValue)return-1;let a=s.fields||{},c=Object.keys(a),l=o.fields||{},h=Object.keys(l);c.sort(),h.sort();for(let f=0;f<c.length&&f<h.length;++f){let p=Jp(c[f],h[f]);if(p!==0)return p;let m=Kr(a[c[f]],l[h[f]]);if(m!==0)return m}return se(c.length,h.length)}(n.mapValue,e.mapValue);default:throw Y()}}function Jw(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return se(n,e);let t=sr(n),r=sr(e),i=se(t.seconds,r.seconds);return i!==0?i:se(t.nanos,r.nanos)}function e1(n,e){let t=n.values||[],r=e.values||[];for(let i=0;i<t.length&&i<r.length;++i){let s=Kr(t[i],r[i]);if(s)return s}return se(t.length,r.length)}function vo(n){return lg(n)}function lg(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){let r=sr(t);return`time(${r.seconds},${r.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(t){return or(t).toBase64()}(n.bytesValue):"referenceValue"in n?function(t){return K.fromName(t).toString()}(n.referenceValue):"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let r="[",i=!0;for(let s of t.values||[])i?i=!1:r+=",",r+=lg(s);return r+"]"}(n.arrayValue):"mapValue"in n?function(t){let r=Object.keys(t.fields||{}).sort(),i="{",s=!0;for(let o of r)s?s=!1:i+=",",i+=`${o}:${lg(t.fields[o])}`;return i+"}"}(n.mapValue):Y()}function hh(n){switch(Wr(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:let e=Dd(n);return e?16+hh(e):16;case 5:return 2*n.stringValue.length;case 6:return or(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((i,s)=>i+hh(s),0)}(n.arrayValue);case 10:case 11:return function(r){let i=0;return oi(r.fields,(s,o)=>{i+=s.length+hh(o)}),i}(n.mapValue);default:throw Y()}}function Wi(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function hg(n){return!!n&&"integerValue"in n}function wu(n){return!!n&&"arrayValue"in n}function t1(n){return!!n&&"nullValue"in n}function n1(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function dh(n){return!!n&&"mapValue"in n}function Cd(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{})[ay])===null||t===void 0?void 0:t.stringValue)===uy}function cu(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){let e={mapValue:{fields:{}}};return oi(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=cu(r)),e}if(n.arrayValue){let e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=cu(n.arrayValue.values[t]);return e}return Object.assign({},n)}function CD(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===DD}var AD={mapValue:{fields:{[ay]:{stringValue:uy},[yo]:{arrayValue:{}}}}};function $F(n){return"nullValue"in n?lh:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?Wi(mo.empty(),K.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?Cd(n)?AD:{mapValue:{}}:Y()}function qF(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?Wi(mo.empty(),K.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?AD:"mapValue"in n?Cd(n)?{mapValue:{}}:zr:Y()}function r1(n,e){let t=Kr(n.value,e.value);return t!==0?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function i1(n,e){let t=Kr(n.value,e.value);return t!==0?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}var Et=class n{constructor(e){this.value=e}static empty(){return new n({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!dh(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=cu(t)}setAll(e){let t=it.emptyPath(),r={},i=[];e.forEach((o,a)=>{if(!t.isImmediateParentOf(a)){let c=this.getFieldsMap(t);this.applyChanges(c,r,i),r={},i=[],t=a.popLast()}o?r[a.lastSegment()]=cu(o):i.push(a.lastSegment())});let s=this.getFieldsMap(t);this.applyChanges(s,r,i)}delete(e){let t=this.field(e.popLast());dh(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Vn(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];dh(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){oi(t,(i,s)=>e[i]=s);for(let i of r)delete e[i]}clone(){return new n(cu(this.value))}};function bD(n){let e=[];return oi(n.fields,(t,r)=>{let i=new it([t]);if(dh(r)){let s=bD(r.mapValue).fields;if(s.length===0)e.push(i);else for(let o of s)e.push(i.child(o))}else e.push(i)}),new Kt(e)}var Je=class n{constructor(e,t,r,i,s,o,a){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new n(e,0,J.min(),J.min(),J.min(),Et.empty(),0)}static newFoundDocument(e,t,r,i){return new n(e,1,t,J.min(),r,i,0)}static newNoDocument(e,t){return new n(e,2,t,J.min(),J.min(),Et.empty(),0)}static newUnknownDocument(e,t){return new n(e,3,t,J.min(),J.min(),Et.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(J.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Et.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Et.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=J.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof n&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new n(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var Ln=class{constructor(e,t){this.position=e,this.inclusive=t}};function s1(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){let s=e[i],o=n.position[i];if(s.field.isKeyField()?r=K.comparator(K.fromName(o.referenceValue),t.key):r=Kr(o,t.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function o1(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Vn(n.position[t],e.position[t]))return!1;return!0}var Ki=class{constructor(e,t="asc"){this.field=e,this.dir=t}};function HF(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}var Ih=class{},me=class n extends Ih{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new pg(e,t,r):t==="array-contains"?new yg(e,r):t==="in"?new Sh(e,r):t==="not-in"?new vg(e,r):t==="array-contains-any"?new _g(e,r):new n(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new gg(e,r):new mg(e,r)}matches(e){let t=e.data.field(this.field);return this.op==="!="?t!==null&&this.matchesComparison(Kr(t,this.value)):t!==null&&Wr(this.value)===Wr(t)&&this.matchesComparison(Kr(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Y()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},Ae=class n extends Ih{constructor(e,t){super(),this.filters=e,this.op=t,this.ce=null}static create(e,t){return new n(e,t)}matches(e){return _o(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.ce!==null||(this.ce=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ce}getFilters(){return Object.assign([],this.filters)}};function _o(n){return n.op==="and"}function dg(n){return n.op==="or"}function cy(n){return TD(n)&&_o(n)}function TD(n){for(let e of n.filters)if(e instanceof Ae)return!1;return!0}function fg(n){if(n instanceof me)return n.field.canonicalString()+n.op.toString()+vo(n.value);if(cy(n))return n.filters.map(e=>fg(e)).join(",");{let e=n.filters.map(t=>fg(t)).join(",");return`${n.op}(${e})`}}function ID(n,e){return n instanceof me?function(r,i){return i instanceof me&&r.op===i.op&&r.field.isEqual(i.field)&&Vn(r.value,i.value)}(n,e):n instanceof Ae?function(r,i){return i instanceof Ae&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,o,a)=>s&&ID(o,i.filters[a]),!0):!1}(n,e):void Y()}function SD(n,e){let t=n.filters.concat(e);return Ae.create(t,n.op)}function RD(n){return n instanceof me?function(t){return`${t.field.canonicalString()} ${t.op} ${vo(t.value)}`}(n):n instanceof Ae?function(t){return t.op.toString()+" {"+t.getFilters().map(RD).join(" ,")+"}"}(n):"Filter"}var pg=class extends me{constructor(e,t,r){super(e,t,r),this.key=K.fromName(r.referenceValue)}matches(e){let t=K.comparator(e.key,this.key);return this.matchesComparison(t)}},gg=class extends me{constructor(e,t){super(e,"in",t),this.keys=FD("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}},mg=class extends me{constructor(e,t){super(e,"not-in",t),this.keys=FD("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}};function FD(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(r=>K.fromName(r.referenceValue))}var yg=class extends me{constructor(e,t){super(e,"array-contains",t)}matches(e){let t=e.data.field(this.field);return wu(t)&&Eu(t.arrayValue,this.value)}},Sh=class extends me{constructor(e,t){super(e,"in",t)}matches(e){let t=e.data.field(this.field);return t!==null&&Eu(this.value.arrayValue,t)}},vg=class extends me{constructor(e,t){super(e,"not-in",t)}matches(e){if(Eu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let t=e.data.field(this.field);return t!==null&&!Eu(this.value.arrayValue,t)}},_g=class extends me{constructor(e,t){super(e,"array-contains-any",t)}matches(e){let t=e.data.field(this.field);return!(!wu(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>Eu(this.value.arrayValue,r))}};var xg=class{constructor(e,t=null,r=[],i=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.le=null}};function Eg(n,e=null,t=[],r=[],i=null,s=null,o=null){return new xg(n,e,t,r,i,s,o)}function Qi(n){let e=W(n);if(e.le===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>fg(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),Uu(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>vo(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>vo(r)).join(",")),e.le=t}return e.le}function zu(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!HF(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!ID(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!o1(n.startAt,e.startAt)&&o1(n.endAt,e.endAt)}function Rh(n){return K.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}function Fh(n,e){return n.filters.filter(t=>t instanceof me&&t.field.isEqual(e))}function a1(n,e,t){let r=lh,i=!0;for(let s of Fh(n,e)){let o=lh,a=!0;switch(s.op){case"<":case"<=":o=$F(s.value);break;case"==":case"in":case">=":o=s.value;break;case">":o=s.value,a=!1;break;case"!=":case"not-in":o=lh}r1({value:r,inclusive:i},{value:o,inclusive:a})<0&&(r=o,i=a)}if(t!==null){for(let s=0;s<n.orderBy.length;++s)if(n.orderBy[s].field.isEqual(e)){let o=t.position[s];r1({value:r,inclusive:i},{value:o,inclusive:t.inclusive})<0&&(r=o,i=t.inclusive);break}}return{value:r,inclusive:i}}function u1(n,e,t){let r=zr,i=!0;for(let s of Fh(n,e)){let o=zr,a=!0;switch(s.op){case">=":case">":o=qF(s.value),a=!1;break;case"==":case"in":case"<=":o=s.value;break;case"<":o=s.value,a=!1;break;case"!=":case"not-in":o=zr}i1({value:r,inclusive:i},{value:o,inclusive:a})>0&&(r=o,i=a)}if(t!==null){for(let s=0;s<n.orderBy.length;++s)if(n.orderBy[s].field.isEqual(e)){let o=t.position[s];i1({value:r,inclusive:i},{value:o,inclusive:t.inclusive})>0&&(r=o,i=t.inclusive);break}}return{value:r,inclusive:i}}var pn=class{constructor(e,t=null,r=[],i=[],s=null,o="F",a=null,c=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=c,this.he=null,this.Pe=null,this.Te=null,this.startAt,this.endAt}};function PD(n,e,t,r,i,s,o,a){return new pn(n,e,t,r,i,s,o,a)}function No(n){return new pn(n)}function c1(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function ly(n){return n.collectionGroup!==null}function so(n){let e=W(n);if(e.he===null){e.he=[];let t=new Set;for(let s of e.explicitOrderBy)e.he.push(s),t.add(s.field.canonicalString());let r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new Ie(it.comparator);return o.filters.forEach(c=>{c.getFlattenedFilters().forEach(l=>{l.isInequality()&&(a=a.add(l.field))})}),a})(e).forEach(s=>{t.has(s.canonicalString())||s.isKeyField()||e.he.push(new Ki(s,r))}),t.has(it.keyField().canonicalString())||e.he.push(new Ki(it.keyField(),r))}return e.he}function bt(n){let e=W(n);return e.Pe||(e.Pe=GF(e,so(n))),e.Pe}function GF(n,e){if(n.limitType==="F")return Eg(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(i=>{let s=i.dir==="desc"?"asc":"desc";return new Ki(i.field,s)});let t=n.endAt?new Ln(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new Ln(n.startAt.position,n.startAt.inclusive):null;return Eg(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function wg(n,e){let t=n.filters.concat([e]);return new pn(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function Ph(n,e,t){return new pn(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function $u(n,e){return zu(bt(n),bt(e))&&n.limitType===e.limitType}function kD(n){return`${Qi(bt(n))}|lt:${n.limitType}`}function Js(n){return`Query(target=${function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(i=>RD(i)).join(", ")}]`),Uu(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(i=>vo(i)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(i=>vo(i)).join(",")),`Target(${r})`}(bt(n))}; limitType=${n.limitType})`}function qu(n,e){return e.isFoundDocument()&&function(r,i){let s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):K.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(n,e)&&function(r,i){for(let s of so(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(n,e)&&function(r,i){for(let s of r.filters)if(!s.matches(i))return!1;return!0}(n,e)&&function(r,i){return!(r.startAt&&!function(o,a,c){let l=s1(o,a,c);return o.inclusive?l<=0:l<0}(r.startAt,so(r),i)||r.endAt&&!function(o,a,c){let l=s1(o,a,c);return o.inclusive?l>=0:l>0}(r.endAt,so(r),i))}(n,e)}function ND(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function MD(n){return(e,t)=>{let r=!1;for(let i of so(n)){let s=WF(i,e,t);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function WF(n,e,t){let r=n.field.isKeyField()?K.comparator(e.key,t.key):function(s,o,a){let c=o.data.field(s),l=a.data.field(s);return c!==null&&l!==null?Kr(c,l):Y()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return Y()}}var gn=class{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(let[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,t){let r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){oi(this.inner,(t,r)=>{for(let[i,s]of r)e(i,s)})}isEmpty(){return vD(this.inner)}size(){return this.innerSize}};var KF=new ke(K.comparator);function Nt(){return KF}var OD=new ke(K.comparator);function ou(...n){let e=OD;for(let t of n)e=e.insert(t.key,t);return e}function BD(n){let e=OD;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function Nn(){return lu()}function VD(){return lu()}function lu(){return new gn(n=>n.toString(),(n,e)=>n.isEqual(e))}var QF=new ke(K.comparator),XF=new Ie(K.comparator);function ce(...n){let e=XF;for(let t of n)e=e.add(t);return e}var YF=new Ie(se);function hy(){return YF}function dy(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:gu(e)?"-0":e}}function LD(n){return{integerValue:""+n}}function UD(n,e){return uD(e)?LD(e):dy(n,e)}var xo=class{constructor(){this._=void 0}};function ZF(n,e,t){return n instanceof Qr?function(i,s){let o={fields:{[xD]:{stringValue:_D},[wD]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&wd(s)&&(s=Dd(s)),s&&(o.fields[ED]=s),{mapValue:o}}(t,e):n instanceof ar?zD(n,e):n instanceof ur?$D(n,e):function(i,s){let o=jD(i,s),a=l1(o)+l1(i.Ie);return hg(o)&&hg(i.Ie)?LD(a):dy(i.serializer,a)}(n,e)}function JF(n,e,t){return n instanceof ar?zD(n,e):n instanceof ur?$D(n,e):t}function jD(n,e){return n instanceof Xr?function(r){return hg(r)||function(s){return!!s&&"doubleValue"in s}(r)}(e)?e:{integerValue:0}:null}var Qr=class extends xo{},ar=class extends xo{constructor(e){super(),this.elements=e}};function zD(n,e){let t=qD(e);for(let r of n.elements)t.some(i=>Vn(i,r))||t.push(r);return{arrayValue:{values:t}}}var ur=class extends xo{constructor(e){super(),this.elements=e}};function $D(n,e){let t=qD(e);for(let r of n.elements)t=t.filter(i=>!Vn(i,r));return{arrayValue:{values:t}}}var Xr=class extends xo{constructor(e,t){super(),this.serializer=e,this.Ie=t}};function l1(n){return Oe(n.integerValue||n.doubleValue)}function qD(n){return wu(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}var Xi=class{constructor(e,t){this.field=e,this.transform=t}};function eP(n,e){return n.field.isEqual(e.field)&&function(r,i){return r instanceof ar&&i instanceof ar||r instanceof ur&&i instanceof ur?uo(r.elements,i.elements,Vn):r instanceof Xr&&i instanceof Xr?Vn(r.Ie,i.Ie):r instanceof Qr&&i instanceof Qr}(n.transform,e.transform)}var Dg=class{constructor(e,t){this.version=e,this.transformResults=t}},Ue=class n{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new n}static exists(e){return new n(void 0,e)}static updateTime(e){return new n(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function fh(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}var Eo=class{};function HD(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new Zr(n.key,Ue.none()):new Yr(n.key,n.data,Ue.none());{let t=n.data,r=Et.empty(),i=new Ie(it.comparator);for(let s of e.fields)if(!i.has(s)){let o=t.field(s);o===null&&s.length>1&&(s=s.popLast(),o=t.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new mn(n.key,r,new Kt(i.toArray()),Ue.none())}}function tP(n,e,t){n instanceof Yr?function(i,s,o){let a=i.value.clone(),c=d1(i.fieldTransforms,s,o.transformResults);a.setAll(c),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(n,e,t):n instanceof mn?function(i,s,o){if(!fh(i.precondition,s))return void s.convertToUnknownDocument(o.version);let a=d1(i.fieldTransforms,s,o.transformResults),c=s.data;c.setAll(GD(i)),c.setAll(a),s.convertToFoundDocument(o.version,c).setHasCommittedMutations()}(n,e,t):function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,t)}function hu(n,e,t,r){return n instanceof Yr?function(s,o,a,c){if(!fh(s.precondition,o))return a;let l=s.value.clone(),h=f1(s.fieldTransforms,c,o);return l.setAll(h),o.convertToFoundDocument(o.version,l).setHasLocalMutations(),null}(n,e,t,r):n instanceof mn?function(s,o,a,c){if(!fh(s.precondition,o))return a;let l=f1(s.fieldTransforms,c,o),h=o.data;return h.setAll(GD(s)),h.setAll(l),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),a===null?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(f=>f.field))}(n,e,t,r):function(s,o,a){return fh(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(n,e,t)}function nP(n,e){let t=null;for(let r of n.fieldTransforms){let i=e.data.field(r.field),s=jD(r.transform,i||null);s!=null&&(t===null&&(t=Et.empty()),t.set(r.field,s))}return t||null}function h1(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&uo(r,i,(s,o)=>eP(s,o))}(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}var Yr=class extends Eo{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}},mn=class extends Eo{constructor(e,t,r,i,s=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}};function GD(n){let e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){let r=n.data.field(t);e.set(t,r)}}),e}function d1(n,e,t){let r=new Map;Z(n.length===t.length);for(let i=0;i<t.length;i++){let s=n[i],o=s.transform,a=e.data.field(s.field);r.set(s.field,JF(o,a,t[i]))}return r}function f1(n,e,t){let r=new Map;for(let i of n){let s=i.transform,o=t.data.field(i.field);r.set(i.field,ZF(s,o,e))}return r}var Zr=class extends Eo{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},Du=class extends Eo{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var Cu=class{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){let r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){let s=this.mutations[i];s.key.isEqual(e.key)&&tP(s,e,r[i])}}applyToLocalView(e,t){for(let r of this.baseMutations)r.key.isEqual(e.key)&&(t=hu(r,e,t,this.localWriteTime));for(let r of this.mutations)r.key.isEqual(e.key)&&(t=hu(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){let r=VD();return this.mutations.forEach(i=>{let s=e.get(i.key),o=s.overlayedDocument,a=this.applyToLocalView(o,s.mutatedFields);a=t.has(i.key)?null:a;let c=HD(o,a);c!==null&&r.set(i.key,c),o.isValidDocument()||o.convertToNoDocument(J.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),ce())}isEqual(e){return this.batchId===e.batchId&&uo(this.mutations,e.mutations,(t,r)=>h1(t,r))&&uo(this.baseMutations,e.baseMutations,(t,r)=>h1(t,r))}},Cg=class n{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){Z(e.mutations.length===r.length);let i=function(){return QF}(),s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new n(e,t,r,i)}};var Au=class{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var Ag=class{constructor(e,t){this.count=e,this.unchangedNames=t}};var Xe,ve;function WD(n){switch(n){case B.OK:return Y();case B.CANCELLED:case B.UNKNOWN:case B.DEADLINE_EXCEEDED:case B.RESOURCE_EXHAUSTED:case B.INTERNAL:case B.UNAVAILABLE:case B.UNAUTHENTICATED:return!1;case B.INVALID_ARGUMENT:case B.NOT_FOUND:case B.ALREADY_EXISTS:case B.PERMISSION_DENIED:case B.FAILED_PRECONDITION:case B.ABORTED:case B.OUT_OF_RANGE:case B.UNIMPLEMENTED:case B.DATA_LOSS:return!0;default:return Y()}}function KD(n){if(n===void 0)return je("GRPC error has no .code"),B.UNKNOWN;switch(n){case Xe.OK:return B.OK;case Xe.CANCELLED:return B.CANCELLED;case Xe.UNKNOWN:return B.UNKNOWN;case Xe.DEADLINE_EXCEEDED:return B.DEADLINE_EXCEEDED;case Xe.RESOURCE_EXHAUSTED:return B.RESOURCE_EXHAUSTED;case Xe.INTERNAL:return B.INTERNAL;case Xe.UNAVAILABLE:return B.UNAVAILABLE;case Xe.UNAUTHENTICATED:return B.UNAUTHENTICATED;case Xe.INVALID_ARGUMENT:return B.INVALID_ARGUMENT;case Xe.NOT_FOUND:return B.NOT_FOUND;case Xe.ALREADY_EXISTS:return B.ALREADY_EXISTS;case Xe.PERMISSION_DENIED:return B.PERMISSION_DENIED;case Xe.FAILED_PRECONDITION:return B.FAILED_PRECONDITION;case Xe.ABORTED:return B.ABORTED;case Xe.OUT_OF_RANGE:return B.OUT_OF_RANGE;case Xe.UNIMPLEMENTED:return B.UNIMPLEMENTED;case Xe.DATA_LOSS:return B.DATA_LOSS;default:return Y()}}(ve=Xe||(Xe={}))[ve.OK=0]="OK",ve[ve.CANCELLED=1]="CANCELLED",ve[ve.UNKNOWN=2]="UNKNOWN",ve[ve.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ve[ve.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ve[ve.NOT_FOUND=5]="NOT_FOUND",ve[ve.ALREADY_EXISTS=6]="ALREADY_EXISTS",ve[ve.PERMISSION_DENIED=7]="PERMISSION_DENIED",ve[ve.UNAUTHENTICATED=16]="UNAUTHENTICATED",ve[ve.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ve[ve.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ve[ve.ABORTED=10]="ABORTED",ve[ve.OUT_OF_RANGE=11]="OUT_OF_RANGE",ve[ve.UNIMPLEMENTED=12]="UNIMPLEMENTED",ve[ve.INTERNAL=13]="INTERNAL",ve[ve.UNAVAILABLE=14]="UNAVAILABLE",ve[ve.DATA_LOSS=15]="DATA_LOSS";var p1=null;var rP=new er([4294967295,4294967295],0);function g1(n){let e=ey().encode(n),t=new Np;return t.update(e),new Uint8Array(t.digest())}function m1(n){let e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new er([t,r],0),new er([i,s],0)]}var bg=class n{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new qi(`Invalid padding: ${t}`);if(r<0)throw new qi(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new qi(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new qi(`Invalid padding when bitmap length is 0: ${t}`);this.Ee=8*e.length-t,this.de=er.fromNumber(this.Ee)}Ae(e,t,r){let i=e.add(t.multiply(er.fromNumber(r)));return i.compare(rP)===1&&(i=new er([i.getBits(0),i.getBits(1)],0)),i.modulo(this.de).toNumber()}Re(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.Ee===0)return!1;let t=g1(e),[r,i]=m1(t);for(let s=0;s<this.hashCount;s++){let o=this.Ae(r,i,s);if(!this.Re(o))return!1}return!0}static create(e,t,r){let i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new n(s,i,t);return r.forEach(a=>o.insert(a)),o}insert(e){if(this.Ee===0)return;let t=g1(e),[r,i]=m1(t);for(let s=0;s<this.hashCount;s++){let o=this.Ae(r,i,s);this.Ve(o)}}Ve(e){let t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}},qi=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var bu=class n{constructor(e,t,r,i,s){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,t,r){let i=new Map;return i.set(e,Tu.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new n(J.min(),i,new ke(se),Nt(),ce())}},Tu=class n{constructor(e,t,r,i,s){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new n(r,t,ce(),ce(),ce())}};var oo=class{constructor(e,t,r,i){this.me=e,this.removedTargetIds=t,this.key=r,this.fe=i}},kh=class{constructor(e,t){this.targetId=e,this.ge=t}},Nh=class{constructor(e,t,r=He.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}},Mh=class{constructor(){this.pe=0,this.ye=y1(),this.we=He.EMPTY_BYTE_STRING,this.Se=!1,this.be=!0}get current(){return this.Se}get resumeToken(){return this.we}get De(){return this.pe!==0}get ve(){return this.be}Ce(e){e.approximateByteSize()>0&&(this.be=!0,this.we=e)}Fe(){let e=ce(),t=ce(),r=ce();return this.ye.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:Y()}}),new Tu(this.we,this.Se,e,t,r)}Me(){this.be=!1,this.ye=y1()}xe(e,t){this.be=!0,this.ye=this.ye.insert(e,t)}Oe(e){this.be=!0,this.ye=this.ye.remove(e)}Ne(){this.pe+=1}Be(){this.pe-=1,Z(this.pe>=0)}Le(){this.be=!0,this.Se=!0}},Tg=class{constructor(e){this.ke=e,this.qe=new Map,this.Qe=Nt(),this.$e=rh(),this.Ue=rh(),this.Ke=new ke(se)}We(e){for(let t of e.me)e.fe&&e.fe.isFoundDocument()?this.Ge(t,e.fe):this.ze(t,e.key,e.fe);for(let t of e.removedTargetIds)this.ze(t,e.key,e.fe)}je(e){this.forEachTarget(e,t=>{let r=this.He(t);switch(e.state){case 0:this.Je(t)&&r.Ce(e.resumeToken);break;case 1:r.Be(),r.De||r.Me(),r.Ce(e.resumeToken);break;case 2:r.Be(),r.De||this.removeTarget(t);break;case 3:this.Je(t)&&(r.Le(),r.Ce(e.resumeToken));break;case 4:this.Je(t)&&(this.Ye(t),r.Ce(e.resumeToken));break;default:Y()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.qe.forEach((r,i)=>{this.Je(i)&&t(i)})}Ze(e){let t=e.targetId,r=e.ge.count,i=this.Xe(t);if(i){let s=i.target;if(Rh(s))if(r===0){let o=new K(s.path);this.ze(t,o,Je.newNoDocument(o,J.min()))}else Z(r===1);else{let o=this.et(t);if(o!==r){let a=this.tt(e),c=a?this.nt(a,e,o):1;if(c!==0){this.Ye(t);let l=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ke=this.Ke.insert(t,l)}p1?.rt(function(h,f,p,m,y){var w,E,x,D,R,F;let k={localCacheCount:h,existenceFilterCount:f.count,databaseId:p.database,projectId:p.projectId},P=f.unchangedNames;return P&&(k.bloomFilter={applied:y===0,hashCount:(w=P?.hashCount)!==null&&w!==void 0?w:0,bitmapLength:(D=(x=(E=P?.bits)===null||E===void 0?void 0:E.bitmap)===null||x===void 0?void 0:x.length)!==null&&D!==void 0?D:0,padding:(F=(R=P?.bits)===null||R===void 0?void 0:R.padding)!==null&&F!==void 0?F:0,mightContain:T=>{var v;return(v=m?.mightContain(T))!==null&&v!==void 0&&v}}),k}(o,e.ge,this.ke.it(),a,c))}}}}tt(e){let t=e.ge.unchangedNames;if(!t||!t.bits)return null;let{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=t,o,a;try{o=or(r).toUint8Array()}catch(c){if(c instanceof Th)return ir("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{a=new bg(o,i,s)}catch(c){return ir(c instanceof qi?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return a.Ee===0?null:a}nt(e,t,r){return t.ge.count===r-this.st(e,t.targetId)?0:2}st(e,t){let r=this.ke.getRemoteKeysForTarget(t),i=0;return r.forEach(s=>{let o=this.ke.it(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(a)||(this.ze(t,s,null),i++)}),i}ot(e){let t=new Map;this.qe.forEach((s,o)=>{let a=this.Xe(o);if(a){if(s.current&&Rh(a.target)){let c=new K(a.target.path);this._t(c).has(o)||this.ut(o,c)||this.ze(o,c,Je.newNoDocument(c,e))}s.ve&&(t.set(o,s.Fe()),s.Me())}});let r=ce();this.Ue.forEach((s,o)=>{let a=!0;o.forEachWhile(c=>{let l=this.Xe(c);return!l||l.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(s))}),this.Qe.forEach((s,o)=>o.setReadTime(e));let i=new bu(e,t,this.Ke,this.Qe,r);return this.Qe=Nt(),this.$e=rh(),this.Ue=rh(),this.Ke=new ke(se),i}Ge(e,t){if(!this.Je(e))return;let r=this.ut(e,t.key)?2:0;this.He(e).xe(t.key,r),this.Qe=this.Qe.insert(t.key,t),this.$e=this.$e.insert(t.key,this._t(t.key).add(e)),this.Ue=this.Ue.insert(t.key,this.ct(t.key).add(e))}ze(e,t,r){if(!this.Je(e))return;let i=this.He(e);this.ut(e,t)?i.xe(t,1):i.Oe(t),this.Ue=this.Ue.insert(t,this.ct(t).delete(e)),this.Ue=this.Ue.insert(t,this.ct(t).add(e)),r&&(this.Qe=this.Qe.insert(t,r))}removeTarget(e){this.qe.delete(e)}et(e){let t=this.He(e).Fe();return this.ke.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ne(e){this.He(e).Ne()}He(e){let t=this.qe.get(e);return t||(t=new Mh,this.qe.set(e,t)),t}ct(e){let t=this.Ue.get(e);return t||(t=new Ie(se),this.Ue=this.Ue.insert(e,t)),t}_t(e){let t=this.$e.get(e);return t||(t=new Ie(se),this.$e=this.$e.insert(e,t)),t}Je(e){let t=this.Xe(e)!==null;return t||z("WatchChangeAggregator","Detected inactive target",e),t}Xe(e){let t=this.qe.get(e);return t&&t.De?null:this.ke.lt(e)}Ye(e){this.qe.set(e,new Mh),this.ke.getRemoteKeysForTarget(e).forEach(t=>{this.ze(e,t,null)})}ut(e,t){return this.ke.getRemoteKeysForTarget(e).has(t)}};function rh(){return new ke(K.comparator)}function y1(){return new ke(K.comparator)}var iP={asc:"ASCENDING",desc:"DESCENDING"},sP={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},oP={and:"AND",or:"OR"},Ig=class{constructor(e,t){this.databaseId=e,this.useProto3Json=t}};function Sg(n,e){return n.useProto3Json||Uu(e)?e:{value:e}}function wo(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function QD(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function aP(n,e){return wo(n,e.toTimestamp())}function $e(n){return Z(!!n),J.fromTimestamp(function(t){let r=sr(t);return new ze(r.seconds,r.nanos)}(n))}function fy(n,e){return Rg(n,e).canonicalString()}function Rg(n,e){let t=function(i){return new _e(["projects",i.projectId,"databases",i.database])}(n).child("documents");return e===void 0?t:t.child(e)}function XD(n){let e=_e.fromString(n);return Z(oC(e)),e}function Iu(n,e){return fy(n.databaseId,e.path)}function On(n,e){let t=XD(e);if(t.get(1)!==n.databaseId.projectId)throw new $(B.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new $(B.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new K(JD(t))}function YD(n,e){return fy(n.databaseId,e)}function ZD(n){let e=XD(n);return e.length===4?_e.emptyPath():JD(e)}function Fg(n){return new _e(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function JD(n){return Z(n.length>4&&n.get(4)==="documents"),n.popFirst(5)}function v1(n,e,t){return{name:Iu(n,e),fields:t.value.mapValue.fields}}function eC(n,e,t){let r=On(n,e.name),i=$e(e.updateTime),s=e.createTime?$e(e.createTime):J.min(),o=new Et({mapValue:{fields:e.fields}}),a=Je.newFoundDocument(r,i,s,o);return t&&a.setHasCommittedMutations(),t?a.setHasCommittedMutations():a}function uP(n,e){return"found"in e?function(r,i){Z(!!i.found),i.found.name,i.found.updateTime;let s=On(r,i.found.name),o=$e(i.found.updateTime),a=i.found.createTime?$e(i.found.createTime):J.min(),c=new Et({mapValue:{fields:i.found.fields}});return Je.newFoundDocument(s,o,a,c)}(n,e):"missing"in e?function(r,i){Z(!!i.missing),Z(!!i.readTime);let s=On(r,i.missing),o=$e(i.readTime);return Je.newNoDocument(s,o)}(n,e):Y()}function cP(n,e){let t;if("targetChange"in e){e.targetChange;let r=function(l){return l==="NO_CHANGE"?0:l==="ADD"?1:l==="REMOVE"?2:l==="CURRENT"?3:l==="RESET"?4:Y()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(l,h){return l.useProto3Json?(Z(h===void 0||typeof h=="string"),He.fromBase64String(h||"")):(Z(h===void 0||h instanceof Buffer||h instanceof Uint8Array),He.fromUint8Array(h||new Uint8Array))}(n,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(l){let h=l.code===void 0?B.UNKNOWN:KD(l.code);return new $(h,l.message||"")}(o);t=new Nh(r,i,s,a||null)}else if("documentChange"in e){e.documentChange;let r=e.documentChange;r.document,r.document.name,r.document.updateTime;let i=On(n,r.document.name),s=$e(r.document.updateTime),o=r.document.createTime?$e(r.document.createTime):J.min(),a=new Et({mapValue:{fields:r.document.fields}}),c=Je.newFoundDocument(i,s,o,a),l=r.targetIds||[],h=r.removedTargetIds||[];t=new oo(l,h,c.key,c)}else if("documentDelete"in e){e.documentDelete;let r=e.documentDelete;r.document;let i=On(n,r.document),s=r.readTime?$e(r.readTime):J.min(),o=Je.newNoDocument(i,s),a=r.removedTargetIds||[];t=new oo([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;let r=e.documentRemove;r.document;let i=On(n,r.document),s=r.removedTargetIds||[];t=new oo([],s,i,null)}else{if(!("filter"in e))return Y();{e.filter;let r=e.filter;r.targetId;let{count:i=0,unchangedNames:s}=r,o=new Ag(i,s),a=r.targetId;t=new kh(a,o)}}return t}function Su(n,e){let t;if(e instanceof Yr)t={update:v1(n,e.key,e.value)};else if(e instanceof Zr)t={delete:Iu(n,e.key)};else if(e instanceof mn)t={update:v1(n,e.key,e.data),updateMask:gP(e.fieldMask)};else{if(!(e instanceof Du))return Y();t={verify:Iu(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(s,o){let a=o.transform;if(a instanceof Qr)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof ar)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof ur)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof Xr)return{fieldPath:o.field.canonicalString(),increment:a.Ie};throw Y()}(0,r))),e.precondition.isNone||(t.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:aP(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:Y()}(n,e.precondition)),t}function Pg(n,e){let t=e.currentDocument?function(s){return s.updateTime!==void 0?Ue.updateTime($e(s.updateTime)):s.exists!==void 0?Ue.exists(s.exists):Ue.none()}(e.currentDocument):Ue.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(o,a){let c=null;if("setToServerValue"in a)Z(a.setToServerValue==="REQUEST_TIME"),c=new Qr;else if("appendMissingElements"in a){let h=a.appendMissingElements.values||[];c=new ar(h)}else if("removeAllFromArray"in a){let h=a.removeAllFromArray.values||[];c=new ur(h)}else"increment"in a?c=new Xr(o,a.increment):Y();let l=it.fromServerFormat(a.fieldPath);return new Xi(l,c)}(n,i)):[];if(e.update){e.update.name;let i=On(n,e.update.name),s=new Et({mapValue:{fields:e.update.fields}});if(e.updateMask){let o=function(c){let l=c.fieldPaths||[];return new Kt(l.map(h=>it.fromServerFormat(h)))}(e.updateMask);return new mn(i,s,o,t,r)}return new Yr(i,s,t,r)}if(e.delete){let i=On(n,e.delete);return new Zr(i,t)}if(e.verify){let i=On(n,e.verify);return new Du(i,t)}return Y()}function lP(n,e){return n&&n.length>0?(Z(e!==void 0),n.map(t=>function(i,s){let o=i.updateTime?$e(i.updateTime):$e(s);return o.isEqual(J.min())&&(o=$e(s)),new Dg(o,i.transformResults||[])}(t,e))):[]}function tC(n,e){return{documents:[YD(n,e.path)]}}function nC(n,e){let t={structuredQuery:{}},r=e.path,i;e.collectionGroup!==null?(i=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=YD(n,i);let s=function(l){if(l.length!==0)return sC(Ae.create(l,"and"))}(e.filters);s&&(t.structuredQuery.where=s);let o=function(l){if(l.length!==0)return l.map(h=>function(p){return{field:eo(p.field),direction:dP(p.dir)}}(h))}(e.orderBy);o&&(t.structuredQuery.orderBy=o);let a=Sg(n,e.limit);return a!==null&&(t.structuredQuery.limit=a),e.startAt&&(t.structuredQuery.startAt=function(l){return{before:l.inclusive,values:l.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(l){return{before:!l.inclusive,values:l.position}}(e.endAt)),{ht:t,parent:i}}function rC(n){let e=ZD(n.parent),t=n.structuredQuery,r=t.from?t.from.length:0,i=null;if(r>0){Z(r===1);let h=t.from[0];h.allDescendants?i=h.collectionId:e=e.child(h.collectionId)}let s=[];t.where&&(s=function(f){let p=iC(f);return p instanceof Ae&&cy(p)?p.getFilters():[p]}(t.where));let o=[];t.orderBy&&(o=function(f){return f.map(p=>function(y){return new Ki(to(y.field),function(E){switch(E){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(y.direction))}(p))}(t.orderBy));let a=null;t.limit&&(a=function(f){let p;return p=typeof f=="object"?f.value:f,Uu(p)?null:p}(t.limit));let c=null;t.startAt&&(c=function(f){let p=!!f.before,m=f.values||[];return new Ln(m,p)}(t.startAt));let l=null;return t.endAt&&(l=function(f){let p=!f.before,m=f.values||[];return new Ln(m,p)}(t.endAt)),PD(e,i,o,s,a,"F",c,l)}function hP(n,e){let t=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Y()}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function iC(n){return n.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":let r=to(t.unaryFilter.field);return me.create(r,"==",{doubleValue:NaN});case"IS_NULL":let i=to(t.unaryFilter.field);return me.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let s=to(t.unaryFilter.field);return me.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let o=to(t.unaryFilter.field);return me.create(o,"!=",{nullValue:"NULL_VALUE"});default:return Y()}}(n):n.fieldFilter!==void 0?function(t){return me.create(to(t.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Y()}}(t.fieldFilter.op),t.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(t){return Ae.create(t.compositeFilter.filters.map(r=>iC(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return Y()}}(t.compositeFilter.op))}(n):Y()}function dP(n){return iP[n]}function fP(n){return sP[n]}function pP(n){return oP[n]}function eo(n){return{fieldPath:n.canonicalString()}}function to(n){return it.fromServerFormat(n.fieldPath)}function sC(n){return n instanceof me?function(t){if(t.op==="=="){if(n1(t.value))return{unaryFilter:{field:eo(t.field),op:"IS_NAN"}};if(t1(t.value))return{unaryFilter:{field:eo(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(n1(t.value))return{unaryFilter:{field:eo(t.field),op:"IS_NOT_NAN"}};if(t1(t.value))return{unaryFilter:{field:eo(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:eo(t.field),op:fP(t.op),value:t.value}}}(n):n instanceof Ae?function(t){let r=t.getFilters().map(i=>sC(i));return r.length===1?r[0]:{compositeFilter:{op:pP(t.op),filters:r}}}(n):Y()}function gP(n){let e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function oC(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}var Do=class n{constructor(e,t,r,i,s=J.min(),o=J.min(),a=He.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=c}withSequenceNumber(e){return new n(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var Oh=class{constructor(e){this.Tt=e}};function mP(n,e){let t;if(e.document)t=eC(n.Tt,e.document,!!e.hasCommittedMutations);else if(e.noDocument){let r=K.fromSegments(e.noDocument.path),i=Zi(e.noDocument.readTime);t=Je.newNoDocument(r,i),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return Y();{let r=K.fromSegments(e.unknownDocument.path),i=Zi(e.unknownDocument.version);t=Je.newUnknownDocument(r,i)}}return e.readTime&&t.setReadTime(function(i){let s=new ze(i[0],i[1]);return J.fromTimestamp(s)}(e.readTime)),t}function _1(n,e){let t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:Bh(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document=function(s,o){return{name:Iu(s,o.key),fields:o.data.value.mapValue.fields,updateTime:wo(s,o.version.toTimestamp()),createTime:wo(s,o.createTime.toTimestamp())}}(n.Tt,e);else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:Yi(e.version)};else{if(!e.isUnknownDocument())return Y();r.unknownDocument={path:t.path.toArray(),version:Yi(e.version)}}return r}function Bh(n){let e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function Yi(n){let e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Zi(n){let e=new ze(n.seconds,n.nanoseconds);return J.fromTimestamp(e)}function Ui(n,e){let t=(e.baseMutations||[]).map(s=>Pg(n.Tt,s));for(let s=0;s<e.mutations.length-1;++s){let o=e.mutations[s];if(s+1<e.mutations.length&&e.mutations[s+1].transform!==void 0){let a=e.mutations[s+1];o.updateTransforms=a.transform.fieldTransforms,e.mutations.splice(s+1,1),++s}}let r=e.mutations.map(s=>Pg(n.Tt,s)),i=ze.fromMillis(e.localWriteTimeMs);return new Cu(e.batchId,i,t,r)}function au(n){let e=Zi(n.readTime),t=n.lastLimboFreeSnapshotVersion!==void 0?Zi(n.lastLimboFreeSnapshotVersion):J.min(),r;return r=function(s){return s.documents!==void 0}(n.query)?function(s){return Z(s.documents.length===1),bt(No(ZD(s.documents[0])))}(n.query):function(s){return bt(rC(s))}(n.query),new Do(r,n.targetId,"TargetPurposeListen",n.lastListenSequenceNumber,e,t,He.fromBase64String(n.resumeToken))}function aC(n,e){let t=Yi(e.snapshotVersion),r=Yi(e.lastLimboFreeSnapshotVersion),i;i=Rh(e.target)?tC(n.Tt,e.target):nC(n.Tt,e.target).ht;let s=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Qi(e.target),readTime:t,resumeToken:s,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function py(n){let e=rC({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?Ph(e,e.limit,"L"):e}function Up(n,e){return new Au(e.largestBatchId,Pg(n.Tt,e.overlayMutation))}function x1(n,e){let t=e.path.lastSegment();return[n,wt(e.path.popLast()),t]}function E1(n,e,t,r){return{indexId:n,uid:e,sequenceNumber:t,readTime:Yi(r.readTime),documentKey:wt(r.documentKey.path),largestBatchId:r.largestBatchId}}var kg=class{getBundleMetadata(e,t){return w1(e).get(t).next(r=>{if(r)return function(s){return{id:s.bundleId,createTime:Zi(s.createTime),version:s.version}}(r)})}saveBundleMetadata(e,t){return w1(e).put(function(i){return{bundleId:i.id,createTime:Yi($e(i.createTime)),version:i.version}}(t))}getNamedQuery(e,t){return D1(e).get(t).next(r=>{if(r)return function(s){return{name:s.name,query:py(s.bundledQuery),readTime:Zi(s.readTime)}}(r)})}saveNamedQuery(e,t){return D1(e).put(function(i){return{name:i.name,readTime:Yi($e(i.readTime)),bundledQuery:i.bundledQuery}}(t))}};function w1(n){return st(n,_d)}function D1(n){return st(n,xd)}var Vh=class n{constructor(e,t){this.serializer=e,this.userId=t}static It(e,t){let r=t.uid||"";return new n(e,r)}getOverlay(e,t){return nu(e).get(x1(this.userId,t)).next(r=>r?Up(this.serializer,r):null)}getOverlays(e,t){let r=Nn();return M.forEach(t,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,t,r){let i=[];return r.forEach((s,o)=>{let a=new Au(t,o);i.push(this.Et(e,a))}),M.waitFor(i)}removeOverlaysForBatchId(e,t,r){let i=new Set;t.forEach(o=>i.add(wt(o.getCollectionPath())));let s=[];return i.forEach(o=>{let a=IDBKeyRange.bound([this.userId,o,r],[this.userId,o,r+1],!1,!0);s.push(nu(e).J(ag,a))}),M.waitFor(s)}getOverlaysForCollection(e,t,r){let i=Nn(),s=wt(t),o=IDBKeyRange.bound([this.userId,s,r],[this.userId,s,Number.POSITIVE_INFINITY],!0);return nu(e).G(ag,o).next(a=>{for(let c of a){let l=Up(this.serializer,c);i.set(l.getKey(),l)}return i})}getOverlaysForCollectionGroup(e,t,r,i){let s=Nn(),o,a=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return nu(e).Z({index:pD,range:a},(c,l,h)=>{let f=Up(this.serializer,l);s.size()<i||f.largestBatchId===o?(s.set(f.getKey(),f),o=f.largestBatchId):h.done()}).next(()=>s)}Et(e,t){return nu(e).put(function(i,s,o){let[a,c,l]=x1(s,o.mutation.key);return{userId:s,collectionPath:c,documentId:l,collectionGroup:o.mutation.key.getCollectionGroup(),largestBatchId:o.largestBatchId,overlayMutation:Su(i.Tt,o.mutation)}}(this.serializer,this.userId,t))}};function nu(n){return st(n,Ed)}var Ng=class{dt(e){return st(e,sy)}getSessionToken(e){return this.dt(e).get("sessionToken").next(t=>{let r=t?.value;return r?He.fromUint8Array(r):He.EMPTY_BYTE_STRING})}setSessionToken(e,t){return this.dt(e).put({name:"sessionToken",value:t.toUint8Array()})}};var nr=class{constructor(){}At(e,t){this.Rt(e,t),t.Vt()}Rt(e,t){if("nullValue"in e)this.ft(t,5);else if("booleanValue"in e)this.ft(t,10),t.gt(e.booleanValue?1:0);else if("integerValue"in e)this.ft(t,15),t.gt(Oe(e.integerValue));else if("doubleValue"in e){let r=Oe(e.doubleValue);isNaN(r)?this.ft(t,13):(this.ft(t,15),gu(r)?t.gt(0):t.gt(r))}else if("timestampValue"in e){let r=e.timestampValue;this.ft(t,20),typeof r=="string"&&(r=sr(r)),t.yt(`${r.seconds||""}`),t.gt(r.nanos||0)}else if("stringValue"in e)this.wt(e.stringValue,t),this.St(t);else if("bytesValue"in e)this.ft(t,30),t.bt(or(e.bytesValue)),this.St(t);else if("referenceValue"in e)this.Dt(e.referenceValue,t);else if("geoPointValue"in e){let r=e.geoPointValue;this.ft(t,45),t.gt(r.latitude||0),t.gt(r.longitude||0)}else"mapValue"in e?CD(e)?this.ft(t,Number.MAX_SAFE_INTEGER):Cd(e)?this.vt(e.mapValue,t):(this.Ct(e.mapValue,t),this.St(t)):"arrayValue"in e?(this.Ft(e.arrayValue,t),this.St(t)):Y()}wt(e,t){this.ft(t,25),this.Mt(e,t)}Mt(e,t){t.yt(e)}Ct(e,t){let r=e.fields||{};this.ft(t,55);for(let i of Object.keys(r))this.wt(i,t),this.Rt(r[i],t)}vt(e,t){var r,i;let s=e.fields||{};this.ft(t,53);let o=yo,a=((i=(r=s[o].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.length)||0;this.ft(t,15),t.gt(Oe(a)),this.wt(o,t),this.Rt(s[o],t)}Ft(e,t){let r=e.values||[];this.ft(t,50);for(let i of r)this.Rt(i,t)}Dt(e,t){this.ft(t,37),K.fromName(e).path.forEach(r=>{this.ft(t,60),this.Mt(r,t)})}ft(e,t){e.gt(t)}St(e){e.gt(2)}};nr.xt=new nr;var Ks=255;function yP(n){if(n===0)return 8;let e=0;return n>>4||(e+=4,n<<=4),n>>6||(e+=2,n<<=2),n>>7||(e+=1),e}function C1(n){let e=64-function(r){let i=0;for(let s=0;s<8;++s){let o=yP(255&r[s]);if(i+=o,o!==8)break}return i}(n);return Math.ceil(e/8)}var Mg=class{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Ot(e){let t=e[Symbol.iterator](),r=t.next();for(;!r.done;)this.Nt(r.value),r=t.next();this.Bt()}Lt(e){let t=e[Symbol.iterator](),r=t.next();for(;!r.done;)this.kt(r.value),r=t.next();this.qt()}Qt(e){for(let t of e){let r=t.charCodeAt(0);if(r<128)this.Nt(r);else if(r<2048)this.Nt(960|r>>>6),this.Nt(128|63&r);else if(t<"\uD800"||"\uDBFF"<t)this.Nt(480|r>>>12),this.Nt(128|63&r>>>6),this.Nt(128|63&r);else{let i=t.codePointAt(0);this.Nt(240|i>>>18),this.Nt(128|63&i>>>12),this.Nt(128|63&i>>>6),this.Nt(128|63&i)}}this.Bt()}$t(e){for(let t of e){let r=t.charCodeAt(0);if(r<128)this.kt(r);else if(r<2048)this.kt(960|r>>>6),this.kt(128|63&r);else if(t<"\uD800"||"\uDBFF"<t)this.kt(480|r>>>12),this.kt(128|63&r>>>6),this.kt(128|63&r);else{let i=t.codePointAt(0);this.kt(240|i>>>18),this.kt(128|63&i>>>12),this.kt(128|63&i>>>6),this.kt(128|63&i)}}this.qt()}Ut(e){let t=this.Kt(e),r=C1(t);this.Wt(1+r),this.buffer[this.position++]=255&r;for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=255&t[i]}Gt(e){let t=this.Kt(e),r=C1(t);this.Wt(1+r),this.buffer[this.position++]=~(255&r);for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=~(255&t[i])}zt(){this.jt(Ks),this.jt(255)}Ht(){this.Jt(Ks),this.Jt(255)}reset(){this.position=0}seed(e){this.Wt(e.length),this.buffer.set(e,this.position),this.position+=e.length}Yt(){return this.buffer.slice(0,this.position)}Kt(e){let t=function(s){let o=new DataView(new ArrayBuffer(8));return o.setFloat64(0,s,!1),new Uint8Array(o.buffer)}(e),r=!!(128&t[0]);t[0]^=r?255:128;for(let i=1;i<t.length;++i)t[i]^=r?255:0;return t}Nt(e){let t=255&e;t===0?(this.jt(0),this.jt(255)):t===Ks?(this.jt(Ks),this.jt(0)):this.jt(t)}kt(e){let t=255&e;t===0?(this.Jt(0),this.Jt(255)):t===Ks?(this.Jt(Ks),this.Jt(0)):this.Jt(e)}Bt(){this.jt(0),this.jt(1)}qt(){this.Jt(0),this.Jt(1)}jt(e){this.Wt(1),this.buffer[this.position++]=e}Jt(e){this.Wt(1),this.buffer[this.position++]=~e}Wt(e){let t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);let i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}},Og=class{constructor(e){this.Zt=e}bt(e){this.Zt.Ot(e)}yt(e){this.Zt.Qt(e)}gt(e){this.Zt.Ut(e)}Vt(){this.Zt.zt()}},Bg=class{constructor(e){this.Zt=e}bt(e){this.Zt.Lt(e)}yt(e){this.Zt.$t(e)}gt(e){this.Zt.Gt(e)}Vt(){this.Zt.Ht()}},ji=class{constructor(){this.Zt=new Mg,this.Xt=new Og(this.Zt),this.en=new Bg(this.Zt)}seed(e){this.Zt.seed(e)}tn(e){return e===0?this.Xt:this.en}Yt(){return this.Zt.Yt()}reset(){this.Zt.reset()}};var zi=class n{constructor(e,t,r,i){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=i}nn(){let e=this.directionalValue.length,t=e===0||this.directionalValue[e-1]===255?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new n(this.indexId,this.documentKey,this.arrayValue,r)}};function Vr(n,e){let t=n.indexId-e.indexId;return t!==0?t:(t=A1(n.arrayValue,e.arrayValue),t!==0?t:(t=A1(n.directionalValue,e.directionalValue),t!==0?t:K.comparator(n.documentKey,e.documentKey)))}function A1(n,e){for(let t=0;t<n.length&&t<e.length;++t){let r=n[t]-e[t];if(r!==0)return r}return n.length-e.length}var Lh=class{constructor(e){this.rn=new Ie((t,r)=>it.comparator(t.field,r.field)),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.sn=e.orderBy,this._n=[];for(let t of e.filters){let r=t;r.isInequality()?this.rn=this.rn.add(r):this._n.push(r)}}get an(){return this.rn.size>1}un(e){if(Z(e.collectionGroup===this.collectionId),this.an)return!1;let t=eg(e);if(t!==void 0&&!this.cn(t))return!1;let r=Bi(e),i=new Set,s=0,o=0;for(;s<r.length&&this.cn(r[s]);++s)i=i.add(r[s].fieldPath.canonicalString());if(s===r.length)return!0;if(this.rn.size>0){let a=this.rn.getIterator().getNext();if(!i.has(a.field.canonicalString())){let c=r[s];if(!this.ln(a,c)||!this.hn(this.sn[o++],c))return!1}++s}for(;s<r.length;++s){let a=r[s];if(o>=this.sn.length||!this.hn(this.sn[o++],a))return!1}return!0}Pn(){if(this.an)return null;let e=new Ie(it.comparator),t=[];for(let r of this._n)if(!r.field.isKeyField())if(r.op==="array-contains"||r.op==="array-contains-any")t.push(new io(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),t.push(new io(r.field,0))}for(let r of this.sn)r.field.isKeyField()||e.has(r.field)||(e=e.add(r.field),t.push(new io(r.field,r.dir==="asc"?0:1)));return new lo(lo.UNKNOWN_ID,this.collectionId,t,pu.empty())}cn(e){for(let t of this._n)if(this.ln(t,e))return!0;return!1}ln(e,t){if(e===void 0||!e.field.isEqual(t.fieldPath))return!1;let r=e.op==="array-contains"||e.op==="array-contains-any";return t.kind===2===r}hn(e,t){return!!e.field.isEqual(t.fieldPath)&&(t.kind===0&&e.dir==="asc"||t.kind===1&&e.dir==="desc")}};function uC(n){var e,t;if(Z(n instanceof me||n instanceof Ae),n instanceof me){if(n instanceof Sh){let i=((t=(e=n.value.arrayValue)===null||e===void 0?void 0:e.values)===null||t===void 0?void 0:t.map(s=>me.create(n.field,"==",s)))||[];return Ae.create(i,"or")}return n}let r=n.filters.map(i=>uC(i));return Ae.create(r,n.op)}function vP(n){if(n.getFilters().length===0)return[];let e=Ug(uC(n));return Z(cC(e)),Vg(e)||Lg(e)?[e]:e.getFilters()}function Vg(n){return n instanceof me}function Lg(n){return n instanceof Ae&&cy(n)}function cC(n){return Vg(n)||Lg(n)||function(t){if(t instanceof Ae&&dg(t)){for(let r of t.getFilters())if(!Vg(r)&&!Lg(r))return!1;return!0}return!1}(n)}function Ug(n){if(Z(n instanceof me||n instanceof Ae),n instanceof me)return n;if(n.filters.length===1)return Ug(n.filters[0]);let e=n.filters.map(r=>Ug(r)),t=Ae.create(e,n.op);return t=Uh(t),cC(t)?t:(Z(t instanceof Ae),Z(_o(t)),Z(t.filters.length>1),t.filters.reduce((r,i)=>gy(r,i)))}function gy(n,e){let t;return Z(n instanceof me||n instanceof Ae),Z(e instanceof me||e instanceof Ae),t=n instanceof me?e instanceof me?function(i,s){return Ae.create([i,s],"and")}(n,e):b1(n,e):e instanceof me?b1(e,n):function(i,s){if(Z(i.filters.length>0&&s.filters.length>0),_o(i)&&_o(s))return SD(i,s.getFilters());let o=dg(i)?i:s,a=dg(i)?s:i,c=o.filters.map(l=>gy(l,a));return Ae.create(c,"or")}(n,e),Uh(t)}function b1(n,e){if(_o(e))return SD(e,n.getFilters());{let t=e.filters.map(r=>gy(n,r));return Ae.create(t,"or")}}function Uh(n){if(Z(n instanceof me||n instanceof Ae),n instanceof me)return n;let e=n.getFilters();if(e.length===1)return Uh(e[0]);if(TD(n))return n;let t=e.map(i=>Uh(i)),r=[];return t.forEach(i=>{i instanceof me?r.push(i):i instanceof Ae&&(i.op===n.op?r.push(...i.filters):r.push(i))}),r.length===1?r[0]:Ae.create(r,n.op)}var jg=class{constructor(){this.Tn=new Ru}addToCollectionParentIndex(e,t){return this.Tn.add(t),M.resolve()}getCollectionParents(e,t){return M.resolve(this.Tn.getEntries(t))}addFieldIndex(e,t){return M.resolve()}deleteFieldIndex(e,t){return M.resolve()}deleteAllFieldIndexes(e){return M.resolve()}createTargetIndexes(e,t){return M.resolve()}getDocumentsMatchingTarget(e,t){return M.resolve(null)}getIndexType(e,t){return M.resolve(0)}getFieldIndexes(e,t){return M.resolve([])}getNextCollectionGroupToUpdate(e){return M.resolve(null)}getMinOffset(e,t){return M.resolve(tn.min())}getMinOffsetFromCollectionGroup(e,t){return M.resolve(tn.min())}updateCollectionGroup(e,t,r){return M.resolve()}updateIndexEntries(e,t){return M.resolve()}},Ru=class{constructor(){this.index={}}add(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new Ie(_e.comparator),s=!i.has(r);return this.index[t]=i.add(r),s}has(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Ie(_e.comparator)).toArray()}};var T1="IndexedDbIndexManager",ih=new Uint8Array(0),zg=class{constructor(e,t){this.databaseId=t,this.In=new Ru,this.En=new gn(r=>Qi(r),(r,i)=>zu(r,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.In.has(t)){let r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener(()=>{this.In.add(t)});let s={collectionId:r,parent:wt(i)};return I1(e).put(s)}return M.resolve()}getCollectionParents(e,t){let r=[],i=IDBKeyRange.bound([t,""],[rD(t),""],!1,!0);return I1(e).G(i).next(s=>{for(let o of s){if(o.collectionId!==t)break;r.push(kn(o.parent))}return r})}addFieldIndex(e,t){let r=ru(e),i=function(a){return{indexId:a.indexId,collectionGroup:a.collectionGroup,fields:a.fields.map(c=>[c.fieldPath.canonicalString(),c.kind])}}(t);delete i.indexId;let s=r.add(i);if(t.indexState){let o=Xs(e);return s.next(a=>{o.put(E1(a,this.uid,t.indexState.sequenceNumber,t.indexState.offset))})}return s.next()}deleteFieldIndex(e,t){let r=ru(e),i=Xs(e),s=Qs(e);return r.delete(t.indexId).next(()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>s.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){let t=ru(e),r=Qs(e),i=Xs(e);return t.J().next(()=>r.J()).next(()=>i.J())}createTargetIndexes(e,t){return M.forEach(this.dn(t),r=>this.getIndexType(e,r).next(i=>{if(i===0||i===1){let s=new Lh(r).Pn();if(s!=null)return this.addFieldIndex(e,s)}}))}getDocumentsMatchingTarget(e,t){let r=Qs(e),i=!0,s=new Map;return M.forEach(this.dn(t),o=>this.An(e,o).next(a=>{i&&(i=!!a),s.set(o,a)})).next(()=>{if(i){let o=ce(),a=[];return M.forEach(s,(c,l)=>{z(T1,`Using index ${function(R){return`id=${R.indexId}|cg=${R.collectionGroup}|f=${R.fields.map(F=>`${F.fieldPath}:${F.kind}`).join(",")}`}(c)} to execute ${Qi(t)}`);let h=function(R,F){let k=eg(F);if(k===void 0)return null;for(let P of Fh(R,k.fieldPath))switch(P.op){case"array-contains-any":return P.value.arrayValue.values||[];case"array-contains":return[P.value]}return null}(l,c),f=function(R,F){let k=new Map;for(let P of Bi(F))for(let T of Fh(R,P.fieldPath))switch(T.op){case"==":case"in":k.set(P.fieldPath.canonicalString(),T.value);break;case"not-in":case"!=":return k.set(P.fieldPath.canonicalString(),T.value),Array.from(k.values())}return null}(l,c),p=function(R,F){let k=[],P=!0;for(let T of Bi(F)){let v=T.kind===0?a1(R,T.fieldPath,R.startAt):u1(R,T.fieldPath,R.startAt);k.push(v.value),P&&(P=v.inclusive)}return new Ln(k,P)}(l,c),m=function(R,F){let k=[],P=!0;for(let T of Bi(F)){let v=T.kind===0?u1(R,T.fieldPath,R.endAt):a1(R,T.fieldPath,R.endAt);k.push(v.value),P&&(P=v.inclusive)}return new Ln(k,P)}(l,c),y=this.Rn(c,l,p),w=this.Rn(c,l,m),E=this.Vn(c,l,f),x=this.mn(c.indexId,h,y,p.inclusive,w,m.inclusive,E);return M.forEach(x,D=>r.H(D,t.limit).next(R=>{R.forEach(F=>{let k=K.fromSegments(F.documentKey);o.has(k)||(o=o.add(k),a.push(k))})}))}).next(()=>a)}return M.resolve(null)})}dn(e){let t=this.En.get(e);return t||(e.filters.length===0?t=[e]:t=vP(Ae.create(e.filters,"and")).map(r=>Eg(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.En.set(e,t),t)}mn(e,t,r,i,s,o,a){let c=(t!=null?t.length:1)*Math.max(r.length,s.length),l=c/(t!=null?t.length:1),h=[];for(let f=0;f<c;++f){let p=t?this.fn(t[f/l]):ih,m=this.gn(e,p,r[f%l],i),y=this.pn(e,p,s[f%l],o),w=a.map(E=>this.gn(e,p,E,!0));h.push(...this.createRange(m,y,w))}return h}gn(e,t,r,i){let s=new zi(e,K.empty(),t,r);return i?s:s.nn()}pn(e,t,r,i){let s=new zi(e,K.empty(),t,r);return i?s.nn():s}An(e,t){let r=new Lh(t),i=t.collectionGroup!=null?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,i).next(s=>{let o=null;for(let a of s)r.un(a)&&(!o||a.fields.length>o.fields.length)&&(o=a);return o})}getIndexType(e,t){let r=2,i=this.dn(t);return M.forEach(i,s=>this.An(e,s).next(o=>{o?r!==0&&o.fields.length<function(c){let l=new Ie(it.comparator),h=!1;for(let f of c.filters)for(let p of f.getFlattenedFilters())p.field.isKeyField()||(p.op==="array-contains"||p.op==="array-contains-any"?h=!0:l=l.add(p.field));for(let f of c.orderBy)f.field.isKeyField()||(l=l.add(f.field));return l.size+(h?1:0)}(s)&&(r=1):r=0})).next(()=>function(o){return o.limit!==null}(t)&&i.length>1&&r===2?1:r)}yn(e,t){let r=new ji;for(let i of Bi(e)){let s=t.data.field(i.fieldPath);if(s==null)return null;let o=r.tn(i.kind);nr.xt.At(s,o)}return r.Yt()}fn(e){let t=new ji;return nr.xt.At(e,t.tn(0)),t.Yt()}wn(e,t){let r=new ji;return nr.xt.At(Wi(this.databaseId,t),r.tn(function(s){let o=Bi(s);return o.length===0?0:o[o.length-1].kind}(e))),r.Yt()}Vn(e,t,r){if(r===null)return[];let i=[];i.push(new ji);let s=0;for(let o of Bi(e)){let a=r[s++];for(let c of i)if(this.Sn(t,o.fieldPath)&&wu(a))i=this.bn(i,o,a);else{let l=c.tn(o.kind);nr.xt.At(a,l)}}return this.Dn(i)}Rn(e,t,r){return this.Vn(e,t,r.position)}Dn(e){let t=[];for(let r=0;r<e.length;++r)t[r]=e[r].Yt();return t}bn(e,t,r){let i=[...e],s=[];for(let o of r.arrayValue.values||[])for(let a of i){let c=new ji;c.seed(a.Yt()),nr.xt.At(o,c.tn(t.kind)),s.push(c)}return s}Sn(e,t){return!!e.filters.find(r=>r instanceof me&&r.field.isEqual(t)&&(r.op==="in"||r.op==="not-in"))}getFieldIndexes(e,t){let r=ru(e),i=Xs(e);return(t?r.G(og,IDBKeyRange.bound(t,t)):r.G()).next(s=>{let o=[];return M.forEach(s,a=>i.get([a.indexId,this.uid]).next(c=>{o.push(function(h,f){let p=f?new pu(f.sequenceNumber,new tn(Zi(f.readTime),new K(kn(f.documentKey)),f.largestBatchId)):pu.empty(),m=h.fields.map(([y,w])=>new io(it.fromServerFormat(y),w));return new lo(h.indexId,h.collectionGroup,m,p)}(a,c))})).next(()=>o)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>t.length===0?null:(t.sort((r,i)=>{let s=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return s!==0?s:se(r.collectionGroup,i.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){let i=ru(e),s=Xs(e);return this.vn(e).next(o=>i.G(og,IDBKeyRange.bound(t,t)).next(a=>M.forEach(a,c=>s.put(E1(c.indexId,this.uid,o,r)))))}updateIndexEntries(e,t){let r=new Map;return M.forEach(t,(i,s)=>{let o=r.get(i.collectionGroup);return(o?M.resolve(o):this.getFieldIndexes(e,i.collectionGroup)).next(a=>(r.set(i.collectionGroup,a),M.forEach(a,c=>this.Cn(e,i,c).next(l=>{let h=this.Fn(s,c);return l.isEqual(h)?M.resolve():this.Mn(e,s,c,l,h)}))))})}xn(e,t,r,i){return Qs(e).put({indexId:i.indexId,uid:this.uid,arrayValue:i.arrayValue,directionalValue:i.directionalValue,orderedDocumentKey:this.wn(r,t.key),documentKey:t.key.path.toArray()})}On(e,t,r,i){return Qs(e).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,this.wn(r,t.key),t.key.path.toArray()])}Cn(e,t,r){let i=Qs(e),s=new Ie(Vr);return i.Z({index:fD,range:IDBKeyRange.only([r.indexId,this.uid,this.wn(r,t)])},(o,a)=>{s=s.add(new zi(r.indexId,t,a.arrayValue,a.directionalValue))}).next(()=>s)}Fn(e,t){let r=new Ie(Vr),i=this.yn(t,e);if(i==null)return r;let s=eg(t);if(s!=null){let o=e.data.field(s.fieldPath);if(wu(o))for(let a of o.arrayValue.values||[])r=r.add(new zi(t.indexId,e.key,this.fn(a),i))}else r=r.add(new zi(t.indexId,e.key,ih,i));return r}Mn(e,t,r,i,s){z(T1,"Updating index entries for document '%s'",t.key);let o=[];return function(c,l,h,f,p){let m=c.getIterator(),y=l.getIterator(),w=Ws(m),E=Ws(y);for(;w||E;){let x=!1,D=!1;if(w&&E){let R=h(w,E);R<0?D=!0:R>0&&(x=!0)}else w!=null?D=!0:x=!0;x?(f(E),E=Ws(y)):D?(p(w),w=Ws(m)):(w=Ws(m),E=Ws(y))}}(i,s,Vr,a=>{o.push(this.xn(e,t,r,a))},a=>{o.push(this.On(e,t,r,a))}),M.waitFor(o)}vn(e){let t=1;return Xs(e).Z({index:dD,reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,s)=>{s.done(),t=i.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((o,a)=>Vr(o,a)).filter((o,a,c)=>!a||Vr(o,c[a-1])!==0);let i=[];i.push(e);for(let o of r){let a=Vr(o,e),c=Vr(o,t);if(a===0)i[0]=e.nn();else if(a>0&&c<0)i.push(o),i.push(o.nn());else if(c>0)break}i.push(t);let s=[];for(let o=0;o<i.length;o+=2){if(this.Nn(i[o],i[o+1]))return[];let a=[i[o].indexId,this.uid,i[o].arrayValue,i[o].directionalValue,ih,[]],c=[i[o+1].indexId,this.uid,i[o+1].arrayValue,i[o+1].directionalValue,ih,[]];s.push(IDBKeyRange.bound(a,c))}return s}Nn(e,t){return Vr(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(S1)}getMinOffset(e,t){return M.mapArray(this.dn(t),r=>this.An(e,r).next(i=>i||Y())).next(S1)}};function I1(n){return st(n,vu)}function Qs(n){return st(n,Ah)}function ru(n){return st(n,iy)}function Xs(n){return st(n,Ch)}function S1(n){Z(n.length!==0);let e=n[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<n.length;r++){let i=n[r].indexState.offset;ty(i,e)<0&&(e=i),t<i.largestBatchId&&(t=i.largestBatchId)}return new tn(e.readTime,e.documentKey,t)}var R1={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},lC=41943040,kt=class n{static withCacheSize(e){return new n(e,n.DEFAULT_COLLECTION_PERCENTILE,n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}};function hC(n,e,t){let r=n.store(fn),i=n.store(ho),s=[],o=IDBKeyRange.only(t.batchId),a=0,c=r.Z({range:o},(h,f,p)=>(a++,p.delete()));s.push(c.next(()=>{Z(a===1)}));let l=[];for(let h of t.mutations){let f=cD(e,h.key.path,t.batchId);s.push(i.delete(f)),l.push(h.key)}return M.waitFor(s).next(()=>l)}function jh(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw Y();e=n.noDocument}return JSON.stringify(e).length}kt.DEFAULT_COLLECTION_PERCENTILE=10,kt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,kt.DEFAULT=new kt(lC,kt.DEFAULT_COLLECTION_PERCENTILE,kt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),kt.DISABLED=new kt(-1,0,0);var zh=class n{constructor(e,t,r,i){this.userId=e,this.serializer=t,this.indexManager=r,this.referenceDelegate=i,this.Bn={}}static It(e,t,r,i){Z(e.uid!=="");let s=e.isAuthenticated()?e.uid:"";return new n(s,t,r,i)}checkEmpty(e){let t=!0,r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Lr(e).Z({index:$i,range:r},(i,s,o)=>{t=!1,o.done()}).next(()=>t)}addMutationBatch(e,t,r,i){let s=no(e),o=Lr(e);return o.add({}).next(a=>{Z(typeof a=="number");let c=new Cu(a,t,r,i),l=function(m,y,w){let E=w.baseMutations.map(D=>Su(m.Tt,D)),x=w.mutations.map(D=>Su(m.Tt,D));return{userId:y,batchId:w.batchId,localWriteTimeMs:w.localWriteTime.toMillis(),baseMutations:E,mutations:x}}(this.serializer,this.userId,c),h=[],f=new Ie((p,m)=>se(p.canonicalString(),m.canonicalString()));for(let p of i){let m=cD(this.userId,p.key.path,a);f=f.add(p.key.path.popLast()),h.push(o.put(l)),h.push(s.put(m,vF))}return f.forEach(p=>{h.push(this.indexManager.addToCollectionParentIndex(e,p))}),e.addOnCommittedListener(()=>{this.Bn[a]=c.keys()}),M.waitFor(h).next(()=>c)})}lookupMutationBatch(e,t){return Lr(e).get(t).next(r=>r?(Z(r.userId===this.userId),Ui(this.serializer,r)):null)}Ln(e,t){return this.Bn[t]?M.resolve(this.Bn[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){let i=r.keys();return this.Bn[t]=i,i}return null})}getNextMutationBatchAfterBatchId(e,t){let r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]),s=null;return Lr(e).Z({index:$i,range:i},(o,a,c)=>{a.userId===this.userId&&(Z(a.batchId>=r),s=Ui(this.serializer,a)),c.done()}).next(()=>s)}getHighestUnacknowledgedBatchId(e){let t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),r=qr;return Lr(e).Z({index:$i,range:t,reverse:!0},(i,s,o)=>{r=s.batchId,o.done()}).next(()=>r)}getAllMutationBatches(e){let t=IDBKeyRange.bound([this.userId,qr],[this.userId,Number.POSITIVE_INFINITY]);return Lr(e).G($i,t).next(r=>r.map(i=>Ui(this.serializer,i)))}getAllMutationBatchesAffectingDocumentKey(e,t){let r=uh(this.userId,t.path),i=IDBKeyRange.lowerBound(r),s=[];return no(e).Z({range:i},(o,a,c)=>{let[l,h,f]=o,p=kn(h);if(l===this.userId&&t.path.isEqual(p))return Lr(e).get(f).next(m=>{if(!m)throw Y();Z(m.userId===this.userId),s.push(Ui(this.serializer,m))});c.done()}).next(()=>s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Ie(se),i=[];return t.forEach(s=>{let o=uh(this.userId,s.path),a=IDBKeyRange.lowerBound(o),c=no(e).Z({range:a},(l,h,f)=>{let[p,m,y]=l,w=kn(m);p===this.userId&&s.path.isEqual(w)?r=r.add(y):f.done()});i.push(c)}),M.waitFor(i).next(()=>this.kn(e,r))}getAllMutationBatchesAffectingQuery(e,t){let r=t.path,i=r.length+1,s=uh(this.userId,r),o=IDBKeyRange.lowerBound(s),a=new Ie(se);return no(e).Z({range:o},(c,l,h)=>{let[f,p,m]=c,y=kn(p);f===this.userId&&r.isPrefixOf(y)?y.length===i&&(a=a.add(m)):h.done()}).next(()=>this.kn(e,a))}kn(e,t){let r=[],i=[];return t.forEach(s=>{i.push(Lr(e).get(s).next(o=>{if(o===null)throw Y();Z(o.userId===this.userId),r.push(Ui(this.serializer,o))}))}),M.waitFor(i).next(()=>r)}removeMutationBatch(e,t){return hC(e.ue,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.qn(t.batchId)}),M.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}qn(e){delete this.Bn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return M.resolve();let r=IDBKeyRange.lowerBound(function(o){return[o]}(this.userId)),i=[];return no(e).Z({range:r},(s,o,a)=>{if(s[0]===this.userId){let c=kn(s[1]);i.push(c)}else a.done()}).next(()=>{Z(i.length===0)})})}containsKey(e,t){return dC(e,this.userId,t)}Qn(e){return fC(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:qr,lastStreamToken:""})}};function dC(n,e,t){let r=uh(e,t.path),i=r[1],s=IDBKeyRange.lowerBound(r),o=!1;return no(n).Z({range:s,Y:!0},(a,c,l)=>{let[h,f,p]=a;h===e&&f===i&&(o=!0),l.done()}).next(()=>o)}function Lr(n){return st(n,fn)}function no(n){return st(n,ho)}function fC(n){return st(n,mu)}var Co=class n{constructor(e){this.$n=e}next(){return this.$n+=2,this.$n}static Un(){return new n(0)}static Kn(){return new n(-1)}};var $g=class{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.Wn(e).next(t=>{let r=new Co(t.highestTargetId);return t.highestTargetId=r.next(),this.Gn(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.Wn(e).next(t=>J.fromTimestamp(new ze(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.Wn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.Wn(e).next(i=>(i.highestListenSequenceNumber=t,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),this.Gn(e,i)))}addTargetData(e,t){return this.zn(e,t).next(()=>this.Wn(e).next(r=>(r.targetCount+=1,this.jn(t,r),this.Gn(e,r))))}updateTargetData(e,t){return this.zn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>Ys(e).delete(t.targetId)).next(()=>this.Wn(e)).next(r=>(Z(r.targetCount>0),r.targetCount-=1,this.Gn(e,r)))}removeTargets(e,t,r){let i=0,s=[];return Ys(e).Z((o,a)=>{let c=au(a);c.sequenceNumber<=t&&r.get(c.targetId)===null&&(i++,s.push(this.removeTargetData(e,c)))}).next(()=>M.waitFor(s)).next(()=>i)}forEachTarget(e,t){return Ys(e).Z((r,i)=>{let s=au(i);t(s)})}Wn(e){return F1(e).get(Dh).next(t=>(Z(t!==null),t))}Gn(e,t){return F1(e).put(Dh,t)}zn(e,t){return Ys(e).put(aC(this.serializer,t))}jn(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.Wn(e).next(t=>t.targetCount)}getTargetData(e,t){let r=Qi(t),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]),s=null;return Ys(e).Z({range:i,index:hD},(o,a,c)=>{let l=au(a);zu(t,l.target)&&(s=l,c.done())}).next(()=>s)}addMatchingKeys(e,t,r){let i=[],s=jr(e);return t.forEach(o=>{let a=wt(o.path);i.push(s.put({targetId:r,path:a})),i.push(this.referenceDelegate.addReference(e,r,o))}),M.waitFor(i)}removeMatchingKeys(e,t,r){let i=jr(e);return M.forEach(t,s=>{let o=wt(s.path);return M.waitFor([i.delete([r,o]),this.referenceDelegate.removeReference(e,r,s)])})}removeMatchingKeysForTargetId(e,t){let r=jr(e),i=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,t){let r=IDBKeyRange.bound([t],[t+1],!1,!0),i=jr(e),s=ce();return i.Z({range:r,Y:!0},(o,a,c)=>{let l=kn(o[1]),h=new K(l);s=s.add(h)}).next(()=>s)}containsKey(e,t){let r=wt(t.path),i=IDBKeyRange.bound([r],[rD(r)],!1,!0),s=0;return jr(e).Z({index:ry,Y:!0,range:i},([o,a],c,l)=>{o!==0&&(s++,l.done())}).next(()=>s>0)}lt(e,t){return Ys(e).get(t).next(r=>r?au(r):null)}};function Ys(n){return st(n,fo)}function F1(n){return st(n,Gi)}function jr(n){return st(n,po)}var P1="LruGarbageCollector",_P=1048576;function k1([n,e],[t,r]){let i=se(n,t);return i===0?se(e,r):i}var qg=class{constructor(e){this.Hn=e,this.buffer=new Ie(k1),this.Jn=0}Yn(){return++this.Jn}Zn(e){let t=[e,this.Yn()];if(this.buffer.size<this.Hn)this.buffer=this.buffer.add(t);else{let r=this.buffer.last();k1(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}},$h=class{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Xn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.er(6e4)}stop(){this.Xn&&(this.Xn.cancel(),this.Xn=null)}get started(){return this.Xn!==null}er(e){z(P1,`Garbage collection scheduled in ${e}ms`),this.Xn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,()=>O(this,null,function*(){this.Xn=null;try{yield this.localStore.collectGarbage(this.garbageCollector)}catch(t){si(t)?z(P1,"Ignoring IndexedDB error during garbage collection: ",t):yield ii(t)}yield this.er(3e5)}))}},Hg=class{constructor(e,t){this.tr=e,this.params=t}calculateTargetCount(e,t){return this.tr.nr(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(t===0)return M.resolve(Wt.ae);let r=new qg(t);return this.tr.forEachTarget(e,i=>r.Zn(i.sequenceNumber)).next(()=>this.tr.rr(e,i=>r.Zn(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.tr.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.tr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(z("LruGarbageCollector","Garbage collection skipped; disabled"),M.resolve(R1)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(z("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),R1):this.ir(e,t))}getCacheSize(e){return this.tr.getCacheSize(e)}ir(e,t){let r,i,s,o,a,c,l,h=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(f=>(f>this.params.maximumSequenceNumbersToCollect?(z("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${f}`),i=this.params.maximumSequenceNumbersToCollect):i=f,o=Date.now(),this.nthSequenceNumber(e,i))).next(f=>(r=f,a=Date.now(),this.removeTargets(e,r,t))).next(f=>(s=f,c=Date.now(),this.removeOrphanedDocuments(e,r))).next(f=>(l=Date.now(),Zs()<=wn.DEBUG&&z("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-h}ms
	Determined least recently used ${i} in `+(a-o)+`ms
	Removed ${s} targets in `+(c-a)+`ms
	Removed ${f} documents in `+(l-c)+`ms
Total Duration: ${l-h}ms`),M.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:s,documentsRemoved:f})))}};function pC(n,e){return new Hg(n,e)}var Gg=class{constructor(e,t){this.db=e,this.garbageCollector=pC(this,t)}nr(e){let t=this.sr(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}sr(e){let t=0;return this.rr(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}rr(e,t){return this._r(e,(r,i)=>t(i))}addReference(e,t,r){return sh(e,r)}removeReference(e,t,r){return sh(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return sh(e,t)}ar(e,t){return function(i,s){let o=!1;return fC(i).X(a=>dC(i,a,s).next(c=>(c&&(o=!0),M.resolve(!c)))).next(()=>o)}(e,t)}removeOrphanedDocuments(e,t){let r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[],s=0;return this._r(e,(o,a)=>{if(a<=t){let c=this.ar(e,o).next(l=>{if(!l)return s++,r.getEntry(e,o).next(()=>(r.removeEntry(o,J.min()),jr(e).delete(function(f){return[0,wt(f.path)]}(o))))});i.push(c)}}).next(()=>M.waitFor(i)).next(()=>r.apply(e)).next(()=>s)}removeTarget(e,t){let r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return sh(e,t)}_r(e,t){let r=jr(e),i,s=Wt.ae;return r.Z({index:ry},([o,a],{path:c,sequenceNumber:l})=>{o===0?(s!==Wt.ae&&t(new K(kn(i)),s),s=l,i=c):s=Wt.ae}).next(()=>{s!==Wt.ae&&t(new K(kn(i)),s)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}};function sh(n,e){return jr(n).put(function(r,i){return{targetId:0,path:wt(r.path),sequenceNumber:i}}(e,n.currentSequenceNumber))}var qh=class{constructor(){this.changes=new gn(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Je.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();let r=this.changes.get(t);return r!==void 0?M.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var Wg=class{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return Oi(e).put(r)}removeEntry(e,t,r){return Oi(e).delete(function(s,o){let a=s.path.toArray();return[a.slice(0,a.length-2),a[a.length-2],Bh(o),a[a.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.ur(e,r)))}getEntry(e,t){let r=Je.newInvalidDocument(t);return Oi(e).Z({index:ch,range:IDBKeyRange.only(iu(t))},(i,s)=>{r=this.cr(t,s)}).next(()=>r)}lr(e,t){let r={size:0,document:Je.newInvalidDocument(t)};return Oi(e).Z({index:ch,range:IDBKeyRange.only(iu(t))},(i,s)=>{r={document:this.cr(t,s),size:jh(s)}}).next(()=>r)}getEntries(e,t){let r=Nt();return this.hr(e,t,(i,s)=>{let o=this.cr(i,s);r=r.insert(i,o)}).next(()=>r)}Pr(e,t){let r=Nt(),i=new ke(K.comparator);return this.hr(e,t,(s,o)=>{let a=this.cr(s,o);r=r.insert(s,a),i=i.insert(s,jh(o))}).next(()=>({documents:r,Tr:i}))}hr(e,t,r){if(t.isEmpty())return M.resolve();let i=new Ie(O1);t.forEach(c=>i=i.add(c));let s=IDBKeyRange.bound(iu(i.first()),iu(i.last())),o=i.getIterator(),a=o.getNext();return Oi(e).Z({index:ch,range:s},(c,l,h)=>{let f=K.fromSegments([...l.prefixPath,l.collectionGroup,l.documentId]);for(;a&&O1(a,f)<0;)r(a,null),a=o.getNext();a&&a.isEqual(f)&&(r(a,l),a=o.hasNext()?o.getNext():null),a?h.W(iu(a)):h.done()}).next(()=>{for(;a;)r(a,null),a=o.hasNext()?o.getNext():null})}getDocumentsMatchingQuery(e,t,r,i,s){let o=t.path,a=[o.popLast().toArray(),o.lastSegment(),Bh(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],c=[o.popLast().toArray(),o.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Oi(e).G(IDBKeyRange.bound(a,c,!0)).next(l=>{s?.incrementDocumentReadCount(l.length);let h=Nt();for(let f of l){let p=this.cr(K.fromSegments(f.prefixPath.concat(f.collectionGroup,f.documentId)),f);p.isFoundDocument()&&(qu(t,p)||i.has(p.key))&&(h=h.insert(p.key,p))}return h})}getAllFromCollectionGroup(e,t,r,i){let s=Nt(),o=M1(t,r),a=M1(t,tn.max());return Oi(e).Z({index:lD,range:IDBKeyRange.bound(o,a,!0)},(c,l,h)=>{let f=this.cr(K.fromSegments(l.prefixPath.concat(l.collectionGroup,l.documentId)),l);s=s.insert(f.key,f),s.size===i&&h.done()}).next(()=>s)}newChangeBuffer(e){return new Kg(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return N1(e).get(sg).next(t=>(Z(!!t),t))}ur(e,t){return N1(e).put(sg,t)}cr(e,t){if(t){let r=mP(this.serializer,t);if(!(r.isNoDocument()&&r.version.isEqual(J.min())))return r}return Je.newInvalidDocument(e)}};function gC(n){return new Wg(n)}var Kg=class extends qh{constructor(e,t){super(),this.Ir=e,this.trackRemovals=t,this.Er=new gn(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){let t=[],r=0,i=new Ie((s,o)=>se(s.canonicalString(),o.canonicalString()));return this.changes.forEach((s,o)=>{let a=this.Er.get(s);if(t.push(this.Ir.removeEntry(e,s,a.readTime)),o.isValidDocument()){let c=_1(this.Ir.serializer,o);i=i.add(s.path.popLast());let l=jh(c);r+=l-a.size,t.push(this.Ir.addEntry(e,s,c))}else if(r-=a.size,this.trackRemovals){let c=_1(this.Ir.serializer,o.convertToNoDocument(J.min()));t.push(this.Ir.addEntry(e,s,c))}}),i.forEach(s=>{t.push(this.Ir.indexManager.addToCollectionParentIndex(e,s))}),t.push(this.Ir.updateMetadata(e,r)),M.waitFor(t)}getFromCache(e,t){return this.Ir.lr(e,t).next(r=>(this.Er.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.Ir.Pr(e,t).next(({documents:r,Tr:i})=>(i.forEach((s,o)=>{this.Er.set(s,{size:o,readTime:r.get(s).readTime})}),r))}};function N1(n){return st(n,yu)}function Oi(n){return st(n,wh)}function iu(n){let e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function M1(n,e){let t=e.documentKey.path.toArray();return[n,Bh(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function O1(n,e){let t=n.path.toArray(),r=e.path.toArray(),i=0;for(let s=0;s<t.length-2&&s<r.length-2;++s)if(i=se(t[s],r[s]),i)return i;return i=se(t.length,r.length),i||(i=se(t[t.length-2],r[r.length-2]),i||se(t[t.length-1],r[r.length-1]))}var Qg=class{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}};var Hh=class{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(r!==null&&hu(r.mutation,i,Kt.empty(),ze.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,ce()).next(()=>r))}getLocalViewOfDocuments(e,t,r=ce()){let i=Nn();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(s=>{let o=ou();return s.forEach((a,c)=>{o=o.insert(a,c.overlayedDocument)}),o}))}getOverlayedDocuments(e,t){let r=Nn();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,ce()))}populateOverlays(e,t,r){let i=[];return r.forEach(s=>{t.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,a)=>{t.set(o,a)})})}computeViews(e,t,r,i){let s=Nt(),o=lu(),a=function(){return lu()}();return t.forEach((c,l)=>{let h=r.get(l.key);i.has(l.key)&&(h===void 0||h.mutation instanceof mn)?s=s.insert(l.key,l):h!==void 0?(o.set(l.key,h.mutation.getFieldMask()),hu(h.mutation,l,h.mutation.getFieldMask(),ze.now())):o.set(l.key,Kt.empty())}),this.recalculateAndSaveOverlays(e,s).next(c=>(c.forEach((l,h)=>o.set(l,h)),t.forEach((l,h)=>{var f;return a.set(l,new Qg(h,(f=o.get(l))!==null&&f!==void 0?f:null))}),a))}recalculateAndSaveOverlays(e,t){let r=lu(),i=new ke((o,a)=>o-a),s=ce();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(o=>{for(let a of o)a.keys().forEach(c=>{let l=t.get(c);if(l===null)return;let h=r.get(c)||Kt.empty();h=a.applyToLocalView(l,h),r.set(c,h);let f=(i.get(a.batchId)||ce()).add(c);i=i.insert(a.batchId,f)})}).next(()=>{let o=[],a=i.getReverseIterator();for(;a.hasNext();){let c=a.getNext(),l=c.key,h=c.value,f=VD();h.forEach(p=>{if(!s.has(p)){let m=HD(t.get(p),r.get(p));m!==null&&f.set(p,m),s=s.add(p)}}),o.push(this.documentOverlayCache.saveOverlays(e,l,f))}return M.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,i){return function(o){return K.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):ly(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i)}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(s=>{let o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-s.size):M.resolve(Nn()),a=co,c=s;return o.next(l=>M.forEach(l,(h,f)=>(a<f.largestBatchId&&(a=f.largestBatchId),s.get(h)?M.resolve():this.remoteDocumentCache.getEntry(e,h).next(p=>{c=c.insert(h,p)}))).next(()=>this.populateOverlays(e,l,s)).next(()=>this.computeViews(e,c,l,ce())).next(h=>({batchId:a,changes:BD(h)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new K(t)).next(r=>{let i=ou();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){let s=t.collectionGroup,o=ou();return this.indexManager.getCollectionParents(e,s).next(a=>M.forEach(a,c=>{let l=function(f,p){return new pn(p,null,f.explicitOrderBy.slice(),f.filters.slice(),f.limit,f.limitType,f.startAt,f.endAt)}(t,c.child(s));return this.getDocumentsMatchingCollectionQuery(e,l,r,i).next(h=>{h.forEach((f,p)=>{o=o.insert(f,p)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,t,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,s,i))).next(o=>{s.forEach((c,l)=>{let h=l.getKey();o.get(h)===null&&(o=o.insert(h,Je.newInvalidDocument(h)))});let a=ou();return o.forEach((c,l)=>{let h=s.get(c);h!==void 0&&hu(h.mutation,l,Kt.empty(),ze.now()),qu(t,l)&&(a=a.insert(c,l))}),a})}};var Xg=class{constructor(e){this.serializer=e,this.dr=new Map,this.Ar=new Map}getBundleMetadata(e,t){return M.resolve(this.dr.get(t))}saveBundleMetadata(e,t){return this.dr.set(t.id,function(i){return{id:i.id,version:i.version,createTime:$e(i.createTime)}}(t)),M.resolve()}getNamedQuery(e,t){return M.resolve(this.Ar.get(t))}saveNamedQuery(e,t){return this.Ar.set(t.name,function(i){return{name:i.name,query:py(i.bundledQuery),readTime:$e(i.readTime)}}(t)),M.resolve()}};var Yg=class{constructor(){this.overlays=new ke(K.comparator),this.Rr=new Map}getOverlay(e,t){return M.resolve(this.overlays.get(t))}getOverlays(e,t){let r=Nn();return M.forEach(t,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,s)=>{this.Et(e,t,s)}),M.resolve()}removeOverlaysForBatchId(e,t,r){let i=this.Rr.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.Rr.delete(r)),M.resolve()}getOverlaysForCollection(e,t,r){let i=Nn(),s=t.length+1,o=new K(t.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){let c=a.getNext().value,l=c.getKey();if(!t.isPrefixOf(l.path))break;l.path.length===s&&c.largestBatchId>r&&i.set(c.getKey(),c)}return M.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let s=new ke((l,h)=>l-h),o=this.overlays.getIterator();for(;o.hasNext();){let l=o.getNext().value;if(l.getKey().getCollectionGroup()===t&&l.largestBatchId>r){let h=s.get(l.largestBatchId);h===null&&(h=Nn(),s=s.insert(l.largestBatchId,h)),h.set(l.getKey(),l)}}let a=Nn(),c=s.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((l,h)=>a.set(l,h)),!(a.size()>=i)););return M.resolve(a)}Et(e,t,r){let i=this.overlays.get(r.key);if(i!==null){let o=this.Rr.get(i.largestBatchId).delete(r.key);this.Rr.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new Au(t,r));let s=this.Rr.get(t);s===void 0&&(s=ce(),this.Rr.set(t,s)),this.Rr.set(t,s.add(r.key))}};var Zg=class{constructor(){this.sessionToken=He.EMPTY_BYTE_STRING}getSessionToken(e){return M.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,M.resolve()}};var Fu=class{constructor(){this.Vr=new Ie(Ye.mr),this.gr=new Ie(Ye.pr)}isEmpty(){return this.Vr.isEmpty()}addReference(e,t){let r=new Ye(e,t);this.Vr=this.Vr.add(r),this.gr=this.gr.add(r)}yr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.wr(new Ye(e,t))}Sr(e,t){e.forEach(r=>this.removeReference(r,t))}br(e){let t=new K(new _e([])),r=new Ye(t,e),i=new Ye(t,e+1),s=[];return this.gr.forEachInRange([r,i],o=>{this.wr(o),s.push(o.key)}),s}Dr(){this.Vr.forEach(e=>this.wr(e))}wr(e){this.Vr=this.Vr.delete(e),this.gr=this.gr.delete(e)}vr(e){let t=new K(new _e([])),r=new Ye(t,e),i=new Ye(t,e+1),s=ce();return this.gr.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){let t=new Ye(e,0),r=this.Vr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}},Ye=class{constructor(e,t){this.key=e,this.Cr=t}static mr(e,t){return K.comparator(e.key,t.key)||se(e.Cr,t.Cr)}static pr(e,t){return se(e.Cr,t.Cr)||K.comparator(e.key,t.key)}};var Jg=class{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Fr=1,this.Mr=new Ie(Ye.mr)}checkEmpty(e){return M.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,i){let s=this.Fr;this.Fr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let o=new Cu(s,t,r,i);this.mutationQueue.push(o);for(let a of i)this.Mr=this.Mr.add(new Ye(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return M.resolve(o)}lookupMutationBatch(e,t){return M.resolve(this.Or(t))}getNextMutationBatchAfterBatchId(e,t){let r=t+1,i=this.Nr(r),s=i<0?0:i;return M.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return M.resolve(this.mutationQueue.length===0?qr:this.Fr-1)}getAllMutationBatches(e){return M.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){let r=new Ye(t,0),i=new Ye(t,Number.POSITIVE_INFINITY),s=[];return this.Mr.forEachInRange([r,i],o=>{let a=this.Or(o.Cr);s.push(a)}),M.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Ie(se);return t.forEach(i=>{let s=new Ye(i,0),o=new Ye(i,Number.POSITIVE_INFINITY);this.Mr.forEachInRange([s,o],a=>{r=r.add(a.Cr)})}),M.resolve(this.Br(r))}getAllMutationBatchesAffectingQuery(e,t){let r=t.path,i=r.length+1,s=r;K.isDocumentKey(s)||(s=s.child(""));let o=new Ye(new K(s),0),a=new Ie(se);return this.Mr.forEachWhile(c=>{let l=c.key.path;return!!r.isPrefixOf(l)&&(l.length===i&&(a=a.add(c.Cr)),!0)},o),M.resolve(this.Br(a))}Br(e){let t=[];return e.forEach(r=>{let i=this.Or(r);i!==null&&t.push(i)}),t}removeMutationBatch(e,t){Z(this.Lr(t.batchId,"removed")===0),this.mutationQueue.shift();let r=this.Mr;return M.forEach(t.mutations,i=>{let s=new Ye(i.key,t.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Mr=r})}qn(e){}containsKey(e,t){let r=new Ye(t,0),i=this.Mr.firstAfterOrEqual(r);return M.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,M.resolve()}Lr(e,t){return this.Nr(e)}Nr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Or(e){let t=this.Nr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}};var em=class{constructor(e){this.kr=e,this.docs=function(){return new ke(K.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){let r=t.key,i=this.docs.get(r),s=i?i.size:0,o=this.kr(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){let t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){let r=this.docs.get(t);return M.resolve(r?r.document.mutableCopy():Je.newInvalidDocument(t))}getEntries(e,t){let r=Nt();return t.forEach(i=>{let s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():Je.newInvalidDocument(i))}),M.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let s=Nt(),o=t.path,a=new K(o.child("__id-9223372036854775808__")),c=this.docs.getIteratorFrom(a);for(;c.hasNext();){let{key:l,value:{document:h}}=c.getNext();if(!o.isPrefixOf(l.path))break;l.path.length>o.length+1||ty(sD(h),r)<=0||(i.has(h.key)||qu(t,h))&&(s=s.insert(h.key,h.mutableCopy()))}return M.resolve(s)}getAllFromCollectionGroup(e,t,r,i){Y()}qr(e,t){return M.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new tm(this)}getSize(e){return M.resolve(this.size)}},tm=class extends qh{constructor(e){super(),this.Ir=e}applyChanges(e){let t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.Ir.addEntry(e,i)):this.Ir.removeEntry(r)}),M.waitFor(t)}getFromCache(e,t){return this.Ir.getEntry(e,t)}getAllFromCache(e,t){return this.Ir.getEntries(e,t)}};var nm=class{constructor(e){this.persistence=e,this.Qr=new gn(t=>Qi(t),zu),this.lastRemoteSnapshotVersion=J.min(),this.highestTargetId=0,this.$r=0,this.Ur=new Fu,this.targetCount=0,this.Kr=Co.Un()}forEachTarget(e,t){return this.Qr.forEach((r,i)=>t(i)),M.resolve()}getLastRemoteSnapshotVersion(e){return M.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return M.resolve(this.$r)}allocateTargetId(e){return this.highestTargetId=this.Kr.next(),M.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.$r&&(this.$r=t),M.resolve()}zn(e){this.Qr.set(e.target,e);let t=e.targetId;t>this.highestTargetId&&(this.Kr=new Co(t),this.highestTargetId=t),e.sequenceNumber>this.$r&&(this.$r=e.sequenceNumber)}addTargetData(e,t){return this.zn(t),this.targetCount+=1,M.resolve()}updateTargetData(e,t){return this.zn(t),M.resolve()}removeTargetData(e,t){return this.Qr.delete(t.target),this.Ur.br(t.targetId),this.targetCount-=1,M.resolve()}removeTargets(e,t,r){let i=0,s=[];return this.Qr.forEach((o,a)=>{a.sequenceNumber<=t&&r.get(a.targetId)===null&&(this.Qr.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),M.waitFor(s).next(()=>i)}getTargetCount(e){return M.resolve(this.targetCount)}getTargetData(e,t){let r=this.Qr.get(t)||null;return M.resolve(r)}addMatchingKeys(e,t,r){return this.Ur.yr(t,r),M.resolve()}removeMatchingKeys(e,t,r){this.Ur.Sr(t,r);let i=this.persistence.referenceDelegate,s=[];return i&&t.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),M.waitFor(s)}removeMatchingKeysForTargetId(e,t){return this.Ur.br(t),M.resolve()}getMatchingKeysForTargetId(e,t){let r=this.Ur.vr(t);return M.resolve(r)}containsKey(e,t){return M.resolve(this.Ur.containsKey(t))}};var Pu=class{constructor(e,t){this.Wr={},this.overlays={},this.Gr=new Wt(0),this.zr=!1,this.zr=!0,this.jr=new Zg,this.referenceDelegate=e(this),this.Hr=new nm(this),this.indexManager=new jg,this.remoteDocumentCache=function(i){return new em(i)}(r=>this.referenceDelegate.Jr(r)),this.serializer=new Oh(t),this.Yr=new Xg(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.zr=!1,Promise.resolve()}get started(){return this.zr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new Yg,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.Wr[e.toKey()];return r||(r=new Jg(t,this.referenceDelegate),this.Wr[e.toKey()]=r),r}getGlobalsCache(){return this.jr}getTargetCache(){return this.Hr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Yr}runTransaction(e,t,r){z("MemoryPersistence","Starting transaction:",e);let i=new rm(this.Gr.next());return this.referenceDelegate.Zr(),r(i).next(s=>this.referenceDelegate.Xr(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}ei(e,t){return M.or(Object.values(this.Wr).map(r=>()=>r.containsKey(e,t)))}},rm=class extends _h{constructor(e){super(),this.currentSequenceNumber=e}},Gh=class n{constructor(e){this.persistence=e,this.ti=new Fu,this.ni=null}static ri(e){return new n(e)}get ii(){if(this.ni)return this.ni;throw Y()}addReference(e,t,r){return this.ti.addReference(r,t),this.ii.delete(r.toString()),M.resolve()}removeReference(e,t,r){return this.ti.removeReference(r,t),this.ii.add(r.toString()),M.resolve()}markPotentiallyOrphaned(e,t){return this.ii.add(t.toString()),M.resolve()}removeTarget(e,t){this.ti.br(t.targetId).forEach(i=>this.ii.add(i.toString()));let r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(s=>this.ii.add(s.toString()))}).next(()=>r.removeTargetData(e,t))}Zr(){this.ni=new Set}Xr(e){let t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return M.forEach(this.ii,r=>{let i=K.fromPath(r);return this.si(e,i).next(s=>{s||t.removeEntry(i,J.min())})}).next(()=>(this.ni=null,t.apply(e)))}updateLimboDocument(e,t){return this.si(e,t).next(r=>{r?this.ii.delete(t.toString()):this.ii.add(t.toString())})}Jr(e){return 0}si(e,t){return M.or([()=>M.resolve(this.ti.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.ei(e,t)])}},Wh=class n{constructor(e,t){this.persistence=e,this.oi=new gn(r=>wt(r.path),(r,i)=>r.isEqual(i)),this.garbageCollector=pC(this,t)}static ri(e,t){return new n(e,t)}Zr(){}Xr(e){return M.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}nr(e){let t=this.sr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}sr(e){let t=0;return this.rr(e,r=>{t++}).next(()=>t)}rr(e,t){return M.forEach(this.oi,(r,i)=>this.ar(e,r,i).next(s=>s?M.resolve():t(i)))}removeTargets(e,t,r){return this.persistence.getTargetCache().removeTargets(e,t,r)}removeOrphanedDocuments(e,t){let r=0,i=this.persistence.getRemoteDocumentCache(),s=i.newChangeBuffer();return i.qr(e,o=>this.ar(e,o,t).next(a=>{a||(r++,s.removeEntry(o,J.min()))})).next(()=>s.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,t){return this.oi.set(t,e.currentSequenceNumber),M.resolve()}removeTarget(e,t){let r=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,t,r){return this.oi.set(r,e.currentSequenceNumber),M.resolve()}removeReference(e,t,r){return this.oi.set(r,e.currentSequenceNumber),M.resolve()}updateLimboDocument(e,t){return this.oi.set(t,e.currentSequenceNumber),M.resolve()}Jr(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=hh(e.data.value)),t}ar(e,t,r){return M.or([()=>this.persistence.ei(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{let i=this.oi.get(t);return M.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}};var im=class{constructor(e){this.serializer=e}B(e,t,r,i){let s=new xh("createOrUpgrade",t);r<1&&i>=1&&(function(c){c.createObjectStore(ju)}(e),function(c){c.createObjectStore(mu,{keyPath:yF}),c.createObjectStore(fn,{keyPath:Xw,autoIncrement:!0}).createIndex($i,Yw,{unique:!0}),c.createObjectStore(ho)}(e),B1(e),function(c){c.createObjectStore(Vi)}(e));let o=M.resolve();return r<3&&i>=3&&(r!==0&&(function(c){c.deleteObjectStore(po),c.deleteObjectStore(fo),c.deleteObjectStore(Gi)}(e),B1(e)),o=o.next(()=>function(c){let l=c.store(Gi),h={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:J.min().toTimestamp(),targetCount:0};return l.put(Dh,h)}(s))),r<4&&i>=4&&(r!==0&&(o=o.next(()=>function(c,l){return l.store(fn).G().next(f=>{c.deleteObjectStore(fn),c.createObjectStore(fn,{keyPath:Xw,autoIncrement:!0}).createIndex($i,Yw,{unique:!0});let p=l.store(fn),m=f.map(y=>p.put(y));return M.waitFor(m)})}(e,s))),o=o.next(()=>{(function(c){c.createObjectStore(go,{keyPath:bF})})(e)})),r<5&&i>=5&&(o=o.next(()=>this._i(s))),r<6&&i>=6&&(o=o.next(()=>(function(c){c.createObjectStore(yu)}(e),this.ai(s)))),r<7&&i>=7&&(o=o.next(()=>this.ui(s))),r<8&&i>=8&&(o=o.next(()=>this.ci(e,s))),r<9&&i>=9&&(o=o.next(()=>{(function(c){c.objectStoreNames.contains("remoteDocumentChanges")&&c.deleteObjectStore("remoteDocumentChanges")})(e)})),r<10&&i>=10&&(o=o.next(()=>this.li(s))),r<11&&i>=11&&(o=o.next(()=>{(function(c){c.createObjectStore(_d,{keyPath:TF})})(e),function(c){c.createObjectStore(xd,{keyPath:IF})}(e)})),r<12&&i>=12&&(o=o.next(()=>{(function(c){let l=c.createObjectStore(Ed,{keyPath:MF});l.createIndex(ag,OF,{unique:!1}),l.createIndex(pD,BF,{unique:!1})})(e)})),r<13&&i>=13&&(o=o.next(()=>function(c){let l=c.createObjectStore(wh,{keyPath:_F});l.createIndex(ch,xF),l.createIndex(lD,EF)}(e)).next(()=>this.hi(e,s)).next(()=>e.deleteObjectStore(Vi))),r<14&&i>=14&&(o=o.next(()=>this.Pi(e,s))),r<15&&i>=15&&(o=o.next(()=>function(c){c.createObjectStore(iy,{keyPath:SF,autoIncrement:!0}).createIndex(og,RF,{unique:!1}),c.createObjectStore(Ch,{keyPath:FF}).createIndex(dD,PF,{unique:!1}),c.createObjectStore(Ah,{keyPath:kF}).createIndex(fD,NF,{unique:!1})}(e))),r<16&&i>=16&&(o=o.next(()=>{t.objectStore(Ch).clear()}).next(()=>{t.objectStore(Ah).clear()})),r<17&&i>=17&&(o=o.next(()=>{(function(c){c.createObjectStore(sy,{keyPath:VF})})(e)})),o}ai(e){let t=0;return e.store(Vi).Z((r,i)=>{t+=jh(i)}).next(()=>{let r={byteSize:t};return e.store(yu).put(sg,r)})}_i(e){let t=e.store(mu),r=e.store(fn);return t.G().next(i=>M.forEach(i,s=>{let o=IDBKeyRange.bound([s.userId,qr],[s.userId,s.lastAcknowledgedBatchId]);return r.G($i,o).next(a=>M.forEach(a,c=>{Z(c.userId===s.userId);let l=Ui(this.serializer,c);return hC(e,s.userId,l).next(()=>{})}))}))}ui(e){let t=e.store(po),r=e.store(Vi);return e.store(Gi).get(Dh).next(i=>{let s=[];return r.Z((o,a)=>{let c=new _e(o),l=function(f){return[0,wt(f)]}(c);s.push(t.get(l).next(h=>h?M.resolve():(f=>t.put({targetId:0,path:wt(f),sequenceNumber:i.highestListenSequenceNumber}))(c)))}).next(()=>M.waitFor(s))})}ci(e,t){e.createObjectStore(vu,{keyPath:AF});let r=t.store(vu),i=new Ru,s=o=>{if(i.add(o)){let a=o.lastSegment(),c=o.popLast();return r.put({collectionId:a,parent:wt(c)})}};return t.store(Vi).Z({Y:!0},(o,a)=>{let c=new _e(o);return s(c.popLast())}).next(()=>t.store(ho).Z({Y:!0},([o,a,c],l)=>{let h=kn(a);return s(h.popLast())}))}li(e){let t=e.store(fo);return t.Z((r,i)=>{let s=au(i),o=aC(this.serializer,s);return t.put(o)})}hi(e,t){let r=t.store(Vi),i=[];return r.Z((s,o)=>{let a=t.store(wh),c=function(f){return f.document?new K(_e.fromString(f.document.name).popFirst(5)):f.noDocument?K.fromSegments(f.noDocument.path):f.unknownDocument?K.fromSegments(f.unknownDocument.path):Y()}(o).path.toArray(),l={prefixPath:c.slice(0,c.length-2),collectionGroup:c[c.length-2],documentId:c[c.length-1],readTime:o.readTime||[0,0],unknownDocument:o.unknownDocument,noDocument:o.noDocument,document:o.document,hasCommittedMutations:!!o.hasCommittedMutations};i.push(a.put(l))}).next(()=>M.waitFor(i))}Pi(e,t){let r=t.store(fn),i=gC(this.serializer),s=new Pu(Gh.ri,this.serializer.Tt);return r.G().next(o=>{let a=new Map;return o.forEach(c=>{var l;let h=(l=a.get(c.userId))!==null&&l!==void 0?l:ce();Ui(this.serializer,c).keys().forEach(f=>h=h.add(f)),a.set(c.userId,h)}),M.forEach(a,(c,l)=>{let h=new Ze(l),f=Vh.It(this.serializer,h),p=s.getIndexManager(h),m=zh.It(h,this.serializer,p,s.referenceDelegate);return new Hh(i,m,f,p).recalculateAndSaveOverlaysForDocumentKeys(new _u(t,Wt.ae),c).next()})})}};function B1(n){n.createObjectStore(po,{keyPath:DF}).createIndex(ry,CF,{unique:!0}),n.createObjectStore(fo,{keyPath:"targetId"}).createIndex(hD,wF,{unique:!0}),n.createObjectStore(Gi)}var Ur="IndexedDbPersistence",jp=18e5,zp=5e3,$p="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",mC="main",sm=class n{constructor(e,t,r,i,s,o,a,c,l,h,f=17){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.Ti=s,this.window=o,this.document=a,this.Ii=l,this.Ei=h,this.di=f,this.Gr=null,this.zr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Ai=null,this.inForeground=!1,this.Ri=null,this.Vi=null,this.mi=Number.NEGATIVE_INFINITY,this.fi=p=>Promise.resolve(),!n.D())throw new $(B.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new Gg(this,i),this.gi=t+mC,this.serializer=new Oh(c),this.pi=new Gr(this.gi,this.di,new im(this.serializer)),this.jr=new Ng,this.Hr=new $g(this.referenceDelegate,this.serializer),this.remoteDocumentCache=gC(this.serializer),this.Yr=new kg,this.window&&this.window.localStorage?this.yi=this.window.localStorage:(this.yi=null,h===!1&&je(Ur,"LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.wi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new $(B.FAILED_PRECONDITION,$p);return this.Si(),this.bi(),this.Di(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Hr.getHighestSequenceNumber(e))}).then(e=>{this.Gr=new Wt(e,this.Ii)}).then(()=>{this.zr=!0}).catch(e=>(this.pi&&this.pi.close(),Promise.reject(e)))}Ci(e){return this.fi=t=>O(this,null,function*(){if(this.started)return e(t)}),e(this.isPrimary)}setDatabaseDeletedListener(e){this.pi.k(t=>O(this,null,function*(){t.newVersion===null&&(yield e())}))}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.Ti.enqueueAndForget(()=>O(this,null,function*(){this.started&&(yield this.wi())})))}wi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>oh(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.Fi(e).next(t=>{t||(this.isPrimary=!1,this.Ti.enqueueRetryable(()=>this.fi(!1)))})}).next(()=>this.Mi(e)).next(t=>this.isPrimary&&!t?this.xi(e).next(()=>!1):!!t&&this.Oi(e).next(()=>!0))).catch(e=>{if(si(e))return z(Ur,"Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return z(Ur,"Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Ti.enqueueRetryable(()=>this.fi(e)),this.isPrimary=e})}Fi(e){return su(e).get(Gs).next(t=>M.resolve(this.Ni(t)))}Bi(e){return oh(e).delete(this.clientId)}Li(){return O(this,null,function*(){if(this.isPrimary&&!this.ki(this.mi,jp)){this.mi=Date.now();let e=yield this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",t=>{let r=st(t,go);return r.G().next(i=>{let s=this.qi(i,jp),o=i.filter(a=>s.indexOf(a)===-1);return M.forEach(o,a=>r.delete(a.clientId)).next(()=>o)})}).catch(()=>[]);if(this.yi)for(let t of e)this.yi.removeItem(this.Qi(t.clientId))}})}Di(){this.Vi=this.Ti.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.wi().then(()=>this.Li()).then(()=>this.Di()))}Ni(e){return!!e&&e.ownerId===this.clientId}Mi(e){return this.Ei?M.resolve(!0):su(e).get(Gs).next(t=>{if(t!==null&&this.ki(t.leaseTimestampMs,zp)&&!this.$i(t.ownerId)){if(this.Ni(t)&&this.networkEnabled)return!0;if(!this.Ni(t)){if(!t.allowTabSynchronization)throw new $(B.FAILED_PRECONDITION,$p);return!1}}return!(!this.networkEnabled||!this.inForeground)||oh(e).G().next(r=>this.qi(r,zp).find(i=>{if(this.clientId!==i.clientId){let s=!this.networkEnabled&&i.networkEnabled,o=!this.inForeground&&i.inForeground,a=this.networkEnabled===i.networkEnabled;if(s||o&&a)return!0}return!1})===void 0)}).next(t=>(this.isPrimary!==t&&z(Ur,`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){return O(this,null,function*(){this.zr=!1,this.Ui(),this.Vi&&(this.Vi.cancel(),this.Vi=null),this.Ki(),this.Wi(),yield this.pi.runTransaction("shutdown","readwrite",[ju,go],e=>{let t=new _u(e,Wt.ae);return this.xi(t).next(()=>this.Bi(t))}),this.pi.close(),this.Gi()})}qi(e,t){return e.filter(r=>this.ki(r.updateTimeMs,t)&&!this.$i(r.clientId))}zi(){return this.runTransaction("getActiveClients","readonly",e=>oh(e).G().next(t=>this.qi(t,jp).map(r=>r.clientId)))}get started(){return this.zr}getGlobalsCache(){return this.jr}getMutationQueue(e,t){return zh.It(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Hr}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new zg(e,this.serializer.Tt.databaseId)}getDocumentOverlayCache(e){return Vh.It(this.serializer,e)}getBundleCache(){return this.Yr}runTransaction(e,t,r){z(Ur,"Starting transaction:",e);let i=t==="readonly"?"readonly":"readwrite",s=function(c){return c===17?jF:c===16?UF:c===15?oy:c===14?yD:c===13?mD:c===12?LF:c===11?gD:void Y()}(this.di),o;return this.pi.runTransaction(e,i,s,a=>(o=new _u(a,this.Gr?this.Gr.next():Wt.ae),t==="readwrite-primary"?this.Fi(o).next(c=>!!c||this.Mi(o)).next(c=>{if(!c)throw je(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Ti.enqueueRetryable(()=>this.fi(!1)),new $(B.FAILED_PRECONDITION,oD);return r(o)}).next(c=>this.Oi(o).next(()=>c)):this.ji(o).next(()=>r(o)))).then(a=>(o.raiseOnCommittedEvent(),a))}ji(e){return su(e).get(Gs).next(t=>{if(t!==null&&this.ki(t.leaseTimestampMs,zp)&&!this.$i(t.ownerId)&&!this.Ni(t)&&!(this.Ei||this.allowTabSynchronization&&t.allowTabSynchronization))throw new $(B.FAILED_PRECONDITION,$p)})}Oi(e){let t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return su(e).put(Gs,t)}static D(){return Gr.D()}xi(e){let t=su(e);return t.get(Gs).next(r=>this.Ni(r)?(z(Ur,"Releasing primary lease."),t.delete(Gs)):M.resolve())}ki(e,t){let r=Date.now();return!(e<r-t)&&(!(e>r)||(je(`Detected an update time that is in the future: ${e} > ${r}`),!1))}Si(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Ri=()=>{this.Ti.enqueueAndForget(()=>(this.inForeground=this.document.visibilityState==="visible",this.wi()))},this.document.addEventListener("visibilitychange",this.Ri),this.inForeground=this.document.visibilityState==="visible")}Ki(){this.Ri&&(this.document.removeEventListener("visibilitychange",this.Ri),this.Ri=null)}bi(){var e;typeof((e=this.window)===null||e===void 0?void 0:e.addEventListener)=="function"&&(this.Ai=()=>{this.Ui();let t=/(?:Version|Mobile)\/1[456]/;n0()&&(navigator.appVersion.match(t)||navigator.userAgent.match(t))&&this.Ti.enterRestrictedMode(!0),this.Ti.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Ai))}Wi(){this.Ai&&(this.window.removeEventListener("pagehide",this.Ai),this.Ai=null)}$i(e){var t;try{let r=((t=this.yi)===null||t===void 0?void 0:t.getItem(this.Qi(e)))!==null;return z(Ur,`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return je(Ur,"Failed to get zombied client id.",r),!1}}Ui(){if(this.yi)try{this.yi.setItem(this.Qi(this.clientId),String(Date.now()))}catch(e){je("Failed to set zombie client id.",e)}}Gi(){if(this.yi)try{this.yi.removeItem(this.Qi(this.clientId))}catch{}}Qi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}};function su(n){return st(n,ju)}function oh(n){return st(n,go)}function my(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}var om=class n{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.Hi=r,this.Ji=i}static Yi(e,t){let r=ce(),i=ce();for(let s of t.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new n(e,t.fromCache,r,i)}};var am=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var Kh=class{constructor(){this.Zi=!1,this.Xi=!1,this.es=100,this.ts=function(){return n0()?8:aD(ua())>0?6:4}()}initialize(e,t){this.ns=e,this.indexManager=t,this.Zi=!0}getDocumentsMatchingQuery(e,t,r,i){let s={result:null};return this.rs(e,t).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.ss(e,t,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;let o=new am;return this._s(e,t,o).next(a=>{if(s.result=a,this.Xi)return this.us(e,t,o,a.size)})}).next(()=>s.result)}us(e,t,r,i){return r.documentReadCount<this.es?(Zs()<=wn.DEBUG&&z("QueryEngine","SDK will not create cache indexes for query:",Js(t),"since it only creates cache indexes for collection contains","more than or equal to",this.es,"documents"),M.resolve()):(Zs()<=wn.DEBUG&&z("QueryEngine","Query:",Js(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.ts*i?(Zs()<=wn.DEBUG&&z("QueryEngine","The SDK decides to create cache indexes for query:",Js(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,bt(t))):M.resolve())}rs(e,t){if(c1(t))return M.resolve(null);let r=bt(t);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(t.limit!==null&&i===1&&(t=Ph(t,null,"F"),r=bt(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{let o=ce(...s);return this.ns.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(c=>{let l=this.cs(t,a);return this.ls(t,l,o,c.readTime)?this.rs(e,Ph(t,null,"F")):this.hs(e,l,t,c)}))})))}ss(e,t,r,i){return c1(t)||i.isEqual(J.min())?M.resolve(null):this.ns.getDocuments(e,r).next(s=>{let o=this.cs(t,s);return this.ls(t,o,r,i)?M.resolve(null):(Zs()<=wn.DEBUG&&z("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Js(t)),this.hs(e,o,t,iD(i,co)).next(a=>a))})}cs(e,t){let r=new Ie(MD(e));return t.forEach((i,s)=>{qu(e,s)&&(r=r.add(s))}),r}ls(e,t,r,i){if(e.limit===null)return!1;if(r.size!==t.size)return!0;let s=e.limitType==="F"?t.last():t.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}_s(e,t,r){return Zs()<=wn.DEBUG&&z("QueryEngine","Using full collection scan to execute query:",Js(t)),this.ns.getDocumentsMatchingQuery(e,t,tn.min(),r)}hs(e,t,r,i){return this.ns.getDocumentsMatchingQuery(e,r,i).next(s=>(t.forEach(o=>{s=s.insert(o.key,o)}),s))}};var yy="LocalStore",xP=3e8,um=class{constructor(e,t,r,i){this.persistence=e,this.Ps=t,this.serializer=i,this.Ts=new ke(se),this.Is=new gn(s=>Qi(s),zu),this.Es=new Map,this.ds=e.getRemoteDocumentCache(),this.Hr=e.getTargetCache(),this.Yr=e.getBundleCache(),this.As(r)}As(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Hh(this.ds,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.ds.setIndexManager(this.indexManager),this.Ps.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ts))}};function yC(n,e,t,r){return new um(n,e,t,r)}function vC(n,e){return O(this,null,function*(){let t=W(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,t.As(e),t.mutationQueue.getAllMutationBatches(r))).next(s=>{let o=[],a=[],c=ce();for(let l of i){o.push(l.batchId);for(let h of l.mutations)c=c.add(h.key)}for(let l of s){a.push(l.batchId);for(let h of l.mutations)c=c.add(h.key)}return t.localDocuments.getDocuments(r,c).next(l=>({Rs:l,removedBatchIds:o,addedBatchIds:a}))})})})}function EP(n,e){let t=W(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{let i=e.batch.keys(),s=t.ds.newChangeBuffer({trackRemovals:!0});return function(a,c,l,h){let f=l.batch,p=f.keys(),m=M.resolve();return p.forEach(y=>{m=m.next(()=>h.getEntry(c,y)).next(w=>{let E=l.docVersions.get(y);Z(E!==null),w.version.compareTo(E)<0&&(f.applyToRemoteDocument(w,l),w.isValidDocument()&&(w.setReadTime(l.commitVersion),h.addEntry(w)))})}),m.next(()=>a.mutationQueue.removeMutationBatch(c,f))}(t,r,e,s).next(()=>s.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let c=ce();for(let l=0;l<a.mutationResults.length;++l)a.mutationResults[l].transformResults.length>0&&(c=c.add(a.batch.mutations[l].key));return c}(e))).next(()=>t.localDocuments.getDocuments(r,i))})}function _C(n){let e=W(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Hr.getLastRemoteSnapshotVersion(t))}function wP(n,e){let t=W(n),r=e.snapshotVersion,i=t.Ts;return t.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{let o=t.ds.newChangeBuffer({trackRemovals:!0});i=t.Ts;let a=[];e.targetChanges.forEach((h,f)=>{let p=i.get(f);if(!p)return;a.push(t.Hr.removeMatchingKeys(s,h.removedDocuments,f).next(()=>t.Hr.addMatchingKeys(s,h.addedDocuments,f)));let m=p.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(f)!==null?m=m.withResumeToken(He.EMPTY_BYTE_STRING,J.min()).withLastLimboFreeSnapshotVersion(J.min()):h.resumeToken.approximateByteSize()>0&&(m=m.withResumeToken(h.resumeToken,r)),i=i.insert(f,m),function(w,E,x){return w.resumeToken.approximateByteSize()===0||E.snapshotVersion.toMicroseconds()-w.snapshotVersion.toMicroseconds()>=xP?!0:x.addedDocuments.size+x.modifiedDocuments.size+x.removedDocuments.size>0}(p,m,h)&&a.push(t.Hr.updateTargetData(s,m))});let c=Nt(),l=ce();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&a.push(t.persistence.referenceDelegate.updateLimboDocument(s,h))}),a.push(xC(s,o,e.documentUpdates).next(h=>{c=h.Vs,l=h.fs})),!r.isEqual(J.min())){let h=t.Hr.getLastRemoteSnapshotVersion(s).next(f=>t.Hr.setTargetsMetadata(s,s.currentSequenceNumber,r));a.push(h)}return M.waitFor(a).next(()=>o.apply(s)).next(()=>t.localDocuments.getLocalViewOfDocuments(s,c,l)).next(()=>c)}).then(s=>(t.Ts=i,s))}function xC(n,e,t){let r=ce(),i=ce();return t.forEach(s=>r=r.add(s)),e.getEntries(n,r).next(s=>{let o=Nt();return t.forEach((a,c)=>{let l=s.get(a);c.isFoundDocument()!==l.isFoundDocument()&&(i=i.add(a)),c.isNoDocument()&&c.version.isEqual(J.min())?(e.removeEntry(a,c.readTime),o=o.insert(a,c)):!l.isValidDocument()||c.version.compareTo(l.version)>0||c.version.compareTo(l.version)===0&&l.hasPendingWrites?(e.addEntry(c),o=o.insert(a,c)):z(yy,"Ignoring outdated watch update for ",a,". Current version:",l.version," Watch version:",c.version)}),{Vs:o,fs:i}})}function DP(n,e){let t=W(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=qr),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function Ao(n,e){let t=W(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.Hr.getTargetData(r,e).next(s=>s?(i=s,M.resolve(i)):t.Hr.allocateTargetId(r).next(o=>(i=new Do(e,o,"TargetPurposeListen",r.currentSequenceNumber),t.Hr.addTargetData(r,i).next(()=>i))))}).then(r=>{let i=t.Ts.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.Ts=t.Ts.insert(r.targetId,r),t.Is.set(e,r.targetId)),r})}function bo(n,e,t){return O(this,null,function*(){let r=W(n),i=r.Ts.get(e),s=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i)))}catch(o){if(!si(o))throw o;z(yy,`Failed to update sequence numbers for target ${e}: ${o}`)}r.Ts=r.Ts.remove(e),r.Is.delete(i.target)})}function Qh(n,e,t){let r=W(n),i=J.min(),s=ce();return r.persistence.runTransaction("Execute query","readwrite",o=>function(c,l,h){let f=W(c),p=f.Is.get(h);return p!==void 0?M.resolve(f.Ts.get(p)):f.Hr.getTargetData(l,h)}(r,o,bt(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Hr.getMatchingKeysForTargetId(o,a.targetId).next(c=>{s=c})}).next(()=>r.Ps.getDocumentsMatchingQuery(o,e,t?i:J.min(),t?s:ce())).next(a=>(DC(r,ND(e),a),{documents:a,gs:s})))}function EC(n,e){let t=W(n),r=W(t.Hr),i=t.Ts.get(e);return i?Promise.resolve(i.target):t.persistence.runTransaction("Get target data","readonly",s=>r.lt(s,e).next(o=>o?o.target:null))}function wC(n,e){let t=W(n),r=t.Es.get(e)||J.min();return t.persistence.runTransaction("Get new document changes","readonly",i=>t.ds.getAllFromCollectionGroup(i,e,iD(r,co),Number.MAX_SAFE_INTEGER)).then(i=>(DC(t,e,i),i))}function DC(n,e,t){let r=n.Es.get(e)||J.min();t.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),n.Es.set(e,r)}function CP(n,e,t,r){return O(this,null,function*(){let i=W(n),s=ce(),o=Nt();for(let l of t){let h=e.ps(l.metadata.name);l.document&&(s=s.add(h));let f=e.ys(l);f.setReadTime(e.ws(l.metadata.readTime)),o=o.insert(h,f)}let a=i.ds.newChangeBuffer({trackRemovals:!0}),c=yield Ao(i,function(h){return bt(No(_e.fromString(`__bundle__/docs/${h}`)))}(r));return i.persistence.runTransaction("Apply bundle documents","readwrite",l=>xC(l,a,o).next(h=>(a.apply(l),h)).next(h=>i.Hr.removeMatchingKeysForTargetId(l,c.targetId).next(()=>i.Hr.addMatchingKeys(l,s,c.targetId)).next(()=>i.localDocuments.getLocalViewOfDocuments(l,h.Vs,h.fs)).next(()=>h.Vs)))})}function AP(r,i){return O(this,arguments,function*(n,e,t=ce()){let s=yield Ao(n,bt(py(e.bundledQuery))),o=W(n);return o.persistence.runTransaction("Save named query","readwrite",a=>{let c=$e(e.readTime);if(s.snapshotVersion.compareTo(c)>=0)return o.Yr.saveNamedQuery(a,e);let l=s.withResumeToken(He.EMPTY_BYTE_STRING,c);return o.Ts=o.Ts.insert(l.targetId,l),o.Hr.updateTargetData(a,l).next(()=>o.Hr.removeMatchingKeysForTargetId(a,s.targetId)).next(()=>o.Hr.addMatchingKeys(a,t,s.targetId)).next(()=>o.Yr.saveNamedQuery(a,e))})})}var CC="firestore_clients";function V1(n,e){return`${CC}_${n}_${e}`}var AC="firestore_mutations";function L1(n,e,t){let r=`${AC}_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}var bC="firestore_targets";function qp(n,e){return`${bC}_${n}_${e}`}var Pn="SharedClientState",Xh=class n{constructor(e,t,r,i){this.user=e,this.batchId=t,this.state=r,this.error=i}static Ss(e,t,r){let i=JSON.parse(r),s,o=typeof i=="object"&&["pending","acknowledged","rejected"].indexOf(i.state)!==-1&&(i.error===void 0||typeof i.error=="object");return o&&i.error&&(o=typeof i.error.message=="string"&&typeof i.error.code=="string",o&&(s=new $(i.error.code,i.error.message))),o?new n(e,t,i.state,s):(je(Pn,`Failed to parse mutation state for ID '${t}': ${r}`),null)}bs(){let e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}},du=class n{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static Ss(e,t){let r=JSON.parse(t),i,s=typeof r=="object"&&["not-current","current","rejected"].indexOf(r.state)!==-1&&(r.error===void 0||typeof r.error=="object");return s&&r.error&&(s=typeof r.error.message=="string"&&typeof r.error.code=="string",s&&(i=new $(r.error.code,r.error.message))),s?new n(e,r.state,i):(je(Pn,`Failed to parse target state for ID '${e}': ${t}`),null)}bs(){let e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}},Yh=class n{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Ss(e,t){let r=JSON.parse(t),i=typeof r=="object"&&r.activeTargetIds instanceof Array,s=hy();for(let o=0;i&&o<r.activeTargetIds.length;++o)i=uD(r.activeTargetIds[o]),s=s.add(r.activeTargetIds[o]);return i?new n(e,s):(je(Pn,`Failed to parse client data for instance '${e}': ${t}`),null)}},cm=class n{constructor(e,t){this.clientId=e,this.onlineState=t}static Ss(e){let t=JSON.parse(e);return typeof t=="object"&&["Unknown","Online","Offline"].indexOf(t.onlineState)!==-1&&typeof t.clientId=="string"?new n(t.clientId,t.onlineState):(je(Pn,`Failed to parse online state: ${e}`),null)}},ku=class{constructor(){this.activeTargetIds=hy()}Ds(e){this.activeTargetIds=this.activeTargetIds.add(e)}vs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}bs(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}},fu=class{constructor(e,t,r,i,s){this.window=e,this.Ti=t,this.persistenceKey=r,this.Cs=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.Fs=this.Ms.bind(this),this.xs=new ke(se),this.started=!1,this.Os=[];let o=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=s,this.Ns=V1(this.persistenceKey,this.Cs),this.Bs=function(c){return`firestore_sequence_number_${c}`}(this.persistenceKey),this.xs=this.xs.insert(this.Cs,new ku),this.Ls=new RegExp(`^${CC}_${o}_([^_]*)$`),this.ks=new RegExp(`^${AC}_${o}_(\\d+)(?:_(.*))?$`),this.qs=new RegExp(`^${bC}_${o}_(\\d+)$`),this.Qs=function(c){return`firestore_online_state_${c}`}(this.persistenceKey),this.$s=function(c){return`firestore_bundle_loaded_v2_${c}`}(this.persistenceKey),this.window.addEventListener("storage",this.Fs)}static D(e){return!(!e||!e.localStorage)}start(){return O(this,null,function*(){let e=yield this.syncEngine.zi();for(let r of e){if(r===this.Cs)continue;let i=this.getItem(V1(this.persistenceKey,r));if(i){let s=Yh.Ss(r,i);s&&(this.xs=this.xs.insert(s.clientId,s))}}this.Us();let t=this.storage.getItem(this.Qs);if(t){let r=this.Ks(t);r&&this.Ws(r)}for(let r of this.Os)this.Ms(r);this.Os=[],this.window.addEventListener("pagehide",()=>this.shutdown()),this.started=!0})}writeSequenceNumber(e){this.setItem(this.Bs,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Gs(this.xs)}isActiveQueryTarget(e){let t=!1;return this.xs.forEach((r,i)=>{i.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.zs(e,"pending")}updateMutationState(e,t,r){this.zs(e,t,r),this.js(e)}addLocalQueryTarget(e,t=!0){let r="not-current";if(this.isActiveQueryTarget(e)){let i=this.storage.getItem(qp(this.persistenceKey,e));if(i){let s=du.Ss(e,i);s&&(r=s.state)}}return t&&this.Hs.Ds(e),this.Us(),r}removeLocalQueryTarget(e){this.Hs.vs(e),this.Us()}isLocalQueryTarget(e){return this.Hs.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(qp(this.persistenceKey,e))}updateQueryState(e,t,r){this.Js(e,t,r)}handleUserChange(e,t,r){t.forEach(i=>{this.js(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.Ys(e)}notifyBundleLoaded(e){this.Zs(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.Fs),this.removeItem(this.Ns),this.started=!1)}getItem(e){let t=this.storage.getItem(e);return z(Pn,"READ",e,t),t}setItem(e,t){z(Pn,"SET",e,t),this.storage.setItem(e,t)}removeItem(e){z(Pn,"REMOVE",e),this.storage.removeItem(e)}Ms(e){let t=e;if(t.storageArea===this.storage){if(z(Pn,"EVENT",t.key,t.newValue),t.key===this.Ns)return void je("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Ti.enqueueRetryable(()=>O(this,null,function*(){if(this.started){if(t.key!==null){if(this.Ls.test(t.key)){if(t.newValue==null){let r=this.Xs(t.key);return this.eo(r,null)}{let r=this.no(t.key,t.newValue);if(r)return this.eo(r.clientId,r)}}else if(this.ks.test(t.key)){if(t.newValue!==null){let r=this.ro(t.key,t.newValue);if(r)return this.io(r)}}else if(this.qs.test(t.key)){if(t.newValue!==null){let r=this.so(t.key,t.newValue);if(r)return this.oo(r)}}else if(t.key===this.Qs){if(t.newValue!==null){let r=this.Ks(t.newValue);if(r)return this.Ws(r)}}else if(t.key===this.Bs){let r=function(s){let o=Wt.ae;if(s!=null)try{let a=JSON.parse(s);Z(typeof a=="number"),o=a}catch(a){je(Pn,"Failed to read sequence number from WebStorage",a)}return o}(t.newValue);r!==Wt.ae&&this.sequenceNumberHandler(r)}else if(t.key===this.$s){let r=this._o(t.newValue);yield Promise.all(r.map(i=>this.syncEngine.ao(i)))}}}else this.Os.push(t)}))}}get Hs(){return this.xs.get(this.Cs)}Us(){this.setItem(this.Ns,this.Hs.bs())}zs(e,t,r){let i=new Xh(this.currentUser,e,t,r),s=L1(this.persistenceKey,this.currentUser,e);this.setItem(s,i.bs())}js(e){let t=L1(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Ys(e){let t={clientId:this.Cs,onlineState:e};this.storage.setItem(this.Qs,JSON.stringify(t))}Js(e,t,r){let i=qp(this.persistenceKey,e),s=new du(e,t,r);this.setItem(i,s.bs())}Zs(e){let t=JSON.stringify(Array.from(e));this.setItem(this.$s,t)}Xs(e){let t=this.Ls.exec(e);return t?t[1]:null}no(e,t){let r=this.Xs(e);return Yh.Ss(r,t)}ro(e,t){let r=this.ks.exec(e),i=Number(r[1]),s=r[2]!==void 0?r[2]:null;return Xh.Ss(new Ze(s),i,t)}so(e,t){let r=this.qs.exec(e),i=Number(r[1]);return du.Ss(i,t)}Ks(e){return cm.Ss(e)}_o(e){return JSON.parse(e)}io(e){return O(this,null,function*(){if(e.user.uid===this.currentUser.uid)return this.syncEngine.uo(e.batchId,e.state,e.error);z(Pn,`Ignoring mutation for non-active user ${e.user.uid}`)})}oo(e){return this.syncEngine.co(e.targetId,e.state,e.error)}eo(e,t){let r=t?this.xs.insert(e,t):this.xs.remove(e),i=this.Gs(this.xs),s=this.Gs(r),o=[],a=[];return s.forEach(c=>{i.has(c)||o.push(c)}),i.forEach(c=>{s.has(c)||a.push(c)}),this.syncEngine.lo(o,a).then(()=>{this.xs=r})}Ws(e){this.xs.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Gs(e){let t=hy();return e.forEach((r,i)=>{t=t.unionWith(i.activeTargetIds)}),t}},Zh=class{constructor(){this.ho=new ku,this.Po={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.ho.Ds(e),this.Po[e]||"not-current"}updateQueryState(e,t,r){this.Po[e]=t}removeLocalQueryTarget(e){this.ho.vs(e)}isLocalQueryTarget(e){return this.ho.activeTargetIds.has(e)}clearQueryState(e){delete this.Po[e]}getAllActiveQueryTargets(){return this.ho.activeTargetIds}isActiveQueryTarget(e){return this.ho.activeTargetIds.has(e)}start(){return this.ho=new ku,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var lm=class{To(e){}shutdown(){}};var U1="ConnectivityMonitor",Jh=class{constructor(){this.Io=()=>this.Eo(),this.Ao=()=>this.Ro(),this.Vo=[],this.mo()}To(e){this.Vo.push(e)}shutdown(){window.removeEventListener("online",this.Io),window.removeEventListener("offline",this.Ao)}mo(){window.addEventListener("online",this.Io),window.addEventListener("offline",this.Ao)}Eo(){z(U1,"Network connectivity changed: AVAILABLE");for(let e of this.Vo)e(0)}Ro(){z(U1,"Network connectivity changed: UNAVAILABLE");for(let e of this.Vo)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var ah=null;function hm(){return ah===null?ah=function(){return 268435456+Math.round(2147483648*Math.random())}():ah++,"0x"+ah.toString(16)}var Hp="RestConnection",bP={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"},dm=class{get fo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;let t=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.po=t+"://"+e.host,this.yo=`projects/${r}/databases/${i}`,this.wo=this.databaseId.database===cg?`project_id=${r}`:`project_id=${r}&database_id=${i}`}So(e,t,r,i,s){let o=hm(),a=this.bo(e,t.toUriEncodedString());z(Hp,`Sending RPC '${e}' ${o}:`,a,r);let c={"google-cloud-resource-prefix":this.yo,"x-goog-request-params":this.wo};return this.Do(c,i,s),this.vo(e,a,c,r).then(l=>(z(Hp,`Received RPC '${e}' ${o}: `,l),l),l=>{throw ir(Hp,`RPC '${e}' ${o} failed with error: `,l,"url: ",a,"request:",r),l})}Co(e,t,r,i,s,o){return this.So(e,t,r,i,s)}Do(e,t,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+ko}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((i,s)=>e[s]=i),r&&r.headers.forEach((i,s)=>e[s]=i)}bo(e,t){let r=bP[e];return`${this.po}/v1/${t}:${r}`}terminate(){}};var fm=class{constructor(e){this.Fo=e.Fo,this.Mo=e.Mo}xo(e){this.Oo=e}No(e){this.Bo=e}Lo(e){this.ko=e}onMessage(e){this.qo=e}close(){this.Mo()}send(e){this.Fo(e)}Qo(){this.Oo()}$o(){this.Bo()}Uo(e){this.ko(e)}Ko(e){this.qo(e)}};var xt="WebChannelConnection",pm=class extends dm{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}vo(e,t,r,i){let s=hm();return new Promise((o,a)=>{let c=new Mp;c.setWithCredentials(!0),c.listenOnce(Op.COMPLETE,()=>{try{switch(c.getLastErrorCode()){case tu.NO_ERROR:let h=c.getResponseJson();z(xt,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(h)),o(h);break;case tu.TIMEOUT:z(xt,`RPC '${e}' ${s} timed out`),a(new $(B.DEADLINE_EXCEEDED,"Request time out"));break;case tu.HTTP_ERROR:let f=c.getStatus();if(z(xt,`RPC '${e}' ${s} failed with status:`,f,"response text:",c.getResponseText()),f>0){let p=c.getResponseJson();Array.isArray(p)&&(p=p[0]);let m=p?.error;if(m&&m.status&&m.message){let y=function(E){let x=E.toLowerCase().replace(/_/g,"-");return Object.values(B).indexOf(x)>=0?x:B.UNKNOWN}(m.status);a(new $(y,m.message))}else a(new $(B.UNKNOWN,"Server responded with status "+c.getStatus()))}else a(new $(B.UNAVAILABLE,"Connection failed."));break;default:Y()}}finally{z(xt,`RPC '${e}' ${s} completed.`)}});let l=JSON.stringify(i);z(xt,`RPC '${e}' ${s} sending request:`,i),c.send(t,"POST",l,r,15)})}Wo(e,t,r){let i=hm(),s=[this.po,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=Lp(),a=Vp(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;l!==void 0&&(c.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(c.useFetchStreams=!0),this.Do(c.initMessageHeaders,t,r),c.encodeInitMessageHeaders=!0;let h=s.join("");z(xt,`Creating RPC '${e}' stream ${i}: ${h}`,c);let f=o.createWebChannel(h,c),p=!1,m=!1,y=new fm({Fo:E=>{m?z(xt,`Not sending because RPC '${e}' stream ${i} is closed:`,E):(p||(z(xt,`Opening RPC '${e}' stream ${i} transport.`),f.open(),p=!0),z(xt,`RPC '${e}' stream ${i} sending:`,E),f.send(E))},Mo:()=>f.close()}),w=(E,x,D)=>{E.listen(x,R=>{try{D(R)}catch(F){setTimeout(()=>{throw F},0)}})};return w(f,Hs.EventType.OPEN,()=>{m||(z(xt,`RPC '${e}' stream ${i} transport opened.`),y.Qo())}),w(f,Hs.EventType.CLOSE,()=>{m||(m=!0,z(xt,`RPC '${e}' stream ${i} transport closed`),y.Uo())}),w(f,Hs.EventType.ERROR,E=>{m||(m=!0,ir(xt,`RPC '${e}' stream ${i} transport errored:`,E),y.Uo(new $(B.UNAVAILABLE,"The operation could not be completed")))}),w(f,Hs.EventType.MESSAGE,E=>{var x;if(!m){let D=E.data[0];Z(!!D);let R=D,F=R?.error||((x=R[0])===null||x===void 0?void 0:x.error);if(F){z(xt,`RPC '${e}' stream ${i} received error:`,F);let k=F.status,P=function(C){let I=Xe[C];if(I!==void 0)return KD(I)}(k),T=F.message;P===void 0&&(P=B.INTERNAL,T="Unknown error status: "+k+" with message "+F.message),m=!0,y.Uo(new $(P,T)),f.close()}else z(xt,`RPC '${e}' stream ${i} received:`,D),y.Ko(D)}}),w(a,Bp.STAT_EVENT,E=>{E.stat===nh.PROXY?z(xt,`RPC '${e}' stream ${i} detected buffering proxy`):E.stat===nh.NOPROXY&&z(xt,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{y.$o()},0),y}};function TC(){return typeof window<"u"?window:null}function ph(){return typeof document<"u"?document:null}function Hu(n){return new Ig(n,!0)}var Nu=class{constructor(e,t,r=1e3,i=1.5,s=6e4){this.Ti=e,this.timerId=t,this.Go=r,this.zo=i,this.jo=s,this.Ho=0,this.Jo=null,this.Yo=Date.now(),this.reset()}reset(){this.Ho=0}Zo(){this.Ho=this.jo}Xo(e){this.cancel();let t=Math.floor(this.Ho+this.e_()),r=Math.max(0,Date.now()-this.Yo),i=Math.max(0,t-r);i>0&&z("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Ho} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.Jo=this.Ti.enqueueAfterDelay(this.timerId,i,()=>(this.Yo=Date.now(),e())),this.Ho*=this.zo,this.Ho<this.Go&&(this.Ho=this.Go),this.Ho>this.jo&&(this.Ho=this.jo)}t_(){this.Jo!==null&&(this.Jo.skipDelay(),this.Jo=null)}cancel(){this.Jo!==null&&(this.Jo.cancel(),this.Jo=null)}e_(){return(Math.random()-.5)*this.Ho}};var j1="PersistentStream",ed=class{constructor(e,t,r,i,s,o,a,c){this.Ti=e,this.n_=r,this.r_=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=c,this.state=0,this.i_=0,this.s_=null,this.o_=null,this.stream=null,this.__=0,this.a_=new Nu(e,t)}u_(){return this.state===1||this.state===5||this.c_()}c_(){return this.state===2||this.state===3}start(){this.__=0,this.state!==4?this.auth():this.l_()}stop(){return O(this,null,function*(){this.u_()&&(yield this.close(0))})}h_(){this.state=0,this.a_.reset()}P_(){this.c_()&&this.s_===null&&(this.s_=this.Ti.enqueueAfterDelay(this.n_,6e4,()=>this.T_()))}I_(e){this.E_(),this.stream.send(e)}T_(){return O(this,null,function*(){if(this.c_())return this.close(0)})}E_(){this.s_&&(this.s_.cancel(),this.s_=null)}d_(){this.o_&&(this.o_.cancel(),this.o_=null)}close(e,t){return O(this,null,function*(){this.E_(),this.d_(),this.a_.cancel(),this.i_++,e!==4?this.a_.reset():t&&t.code===B.RESOURCE_EXHAUSTED?(je(t.toString()),je("Using maximum backoff delay to prevent overloading the backend."),this.a_.Zo()):t&&t.code===B.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.A_(),this.stream.close(),this.stream=null),this.state=e,yield this.listener.Lo(t)})}A_(){}auth(){this.state=1;let e=this.R_(this.i_),t=this.i_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.i_===t&&this.V_(r,i)},r=>{e(()=>{let i=new $(B.UNKNOWN,"Fetching auth token failed: "+r.message);return this.m_(i)})})}V_(e,t){let r=this.R_(this.i_);this.stream=this.f_(e,t),this.stream.xo(()=>{r(()=>this.listener.xo())}),this.stream.No(()=>{r(()=>(this.state=2,this.o_=this.Ti.enqueueAfterDelay(this.r_,1e4,()=>(this.c_()&&(this.state=3),Promise.resolve())),this.listener.No()))}),this.stream.Lo(i=>{r(()=>this.m_(i))}),this.stream.onMessage(i=>{r(()=>++this.__==1?this.g_(i):this.onNext(i))})}l_(){this.state=5,this.a_.Xo(()=>O(this,null,function*(){this.state=0,this.start()}))}m_(e){return z(j1,`close with error: ${e}`),this.stream=null,this.close(4,e)}R_(e){return t=>{this.Ti.enqueueAndForget(()=>this.i_===e?t():(z(j1,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},gm=class extends ed{constructor(e,t,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,o),this.serializer=s}f_(e,t){return this.connection.Wo("Listen",e,t)}g_(e){return this.onNext(e)}onNext(e){this.a_.reset();let t=cP(this.serializer,e),r=function(s){if(!("targetChange"in s))return J.min();let o=s.targetChange;return o.targetIds&&o.targetIds.length?J.min():o.readTime?$e(o.readTime):J.min()}(e);return this.listener.p_(t,r)}y_(e){let t={};t.database=Fg(this.serializer),t.addTarget=function(s,o){let a,c=o.target;if(a=Rh(c)?{documents:tC(s,c)}:{query:nC(s,c).ht},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=QD(s,o.resumeToken);let l=Sg(s,o.expectedCount);l!==null&&(a.expectedCount=l)}else if(o.snapshotVersion.compareTo(J.min())>0){a.readTime=wo(s,o.snapshotVersion.toTimestamp());let l=Sg(s,o.expectedCount);l!==null&&(a.expectedCount=l)}return a}(this.serializer,e);let r=hP(this.serializer,e);r&&(t.labels=r),this.I_(t)}w_(e){let t={};t.database=Fg(this.serializer),t.removeTarget=e,this.I_(t)}},mm=class extends ed{constructor(e,t,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,o),this.serializer=s}get S_(){return this.__>0}start(){this.lastStreamToken=void 0,super.start()}A_(){this.S_&&this.b_([])}f_(e,t){return this.connection.Wo("Write",e,t)}g_(e){return Z(!!e.streamToken),this.lastStreamToken=e.streamToken,Z(!e.writeResults||e.writeResults.length===0),this.listener.D_()}onNext(e){Z(!!e.streamToken),this.lastStreamToken=e.streamToken,this.a_.reset();let t=lP(e.writeResults,e.commitTime),r=$e(e.commitTime);return this.listener.v_(r,t)}C_(){let e={};e.database=Fg(this.serializer),this.I_(e)}b_(e){let t={streamToken:this.lastStreamToken,writes:e.map(r=>Su(this.serializer,r))};this.I_(t)}};var ym=class{},vm=class extends ym{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.F_=!1}M_(){if(this.F_)throw new $(B.FAILED_PRECONDITION,"The client has already been terminated.")}So(e,t,r,i){return this.M_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.So(e,Rg(t,r),i,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===B.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new $(B.UNKNOWN,s.toString())})}Co(e,t,r,i,s){return this.M_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Co(e,Rg(t,r),i,o,a,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===B.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new $(B.UNKNOWN,o.toString())})}terminate(){this.F_=!0,this.connection.terminate()}},_m=class{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.x_=0,this.O_=null,this.N_=!0}B_(){this.x_===0&&(this.L_("Unknown"),this.O_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.O_=null,this.k_("Backend didn't respond within 10 seconds."),this.L_("Offline"),Promise.resolve())))}q_(e){this.state==="Online"?this.L_("Unknown"):(this.x_++,this.x_>=1&&(this.Q_(),this.k_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.L_("Offline")))}set(e){this.Q_(),this.x_=0,e==="Online"&&(this.N_=!1),this.L_(e)}L_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}k_(e){let t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.N_?(je(t),this.N_=!1):z("OnlineStateTracker",t)}Q_(){this.O_!==null&&(this.O_.cancel(),this.O_=null)}};var Ji="RemoteStore",xm=class{constructor(e,t,r,i,s){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.U_=[],this.K_=new Map,this.W_=new Set,this.G_=[],this.z_=s,this.z_.To(o=>{r.enqueueAndForget(()=>O(this,null,function*(){ai(this)&&(z(Ji,"Restarting streams for network reachability change."),yield function(c){return O(this,null,function*(){let l=W(c);l.W_.add(4),yield Mo(l),l.j_.set("Unknown"),l.W_.delete(4),yield Gu(l)})}(this))}))}),this.j_=new _m(r,i)}};function Gu(n){return O(this,null,function*(){if(ai(n))for(let e of n.G_)yield e(!0)})}function Mo(n){return O(this,null,function*(){for(let e of n.G_)yield e(!1)})}function Ad(n,e){let t=W(n);t.K_.has(e.targetId)||(t.K_.set(e.targetId,e),xy(t)?_y(t):Bo(t).c_()&&vy(t,e))}function To(n,e){let t=W(n),r=Bo(t);t.K_.delete(e),r.c_()&&IC(t,e),t.K_.size===0&&(r.c_()?r.P_():ai(t)&&t.j_.set("Unknown"))}function vy(n,e){if(n.H_.Ne(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(J.min())>0){let t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Bo(n).y_(e)}function IC(n,e){n.H_.Ne(e),Bo(n).w_(e)}function _y(n){n.H_=new Tg({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),lt:e=>n.K_.get(e)||null,it:()=>n.datastore.serializer.databaseId}),Bo(n).start(),n.j_.B_()}function xy(n){return ai(n)&&!Bo(n).u_()&&n.K_.size>0}function ai(n){return W(n).W_.size===0}function SC(n){n.H_=void 0}function TP(n){return O(this,null,function*(){n.j_.set("Online")})}function IP(n){return O(this,null,function*(){n.K_.forEach((e,t)=>{vy(n,e)})})}function SP(n,e){return O(this,null,function*(){SC(n),xy(n)?(n.j_.q_(e),_y(n)):n.j_.set("Unknown")})}function RP(n,e,t){return O(this,null,function*(){if(n.j_.set("Online"),e instanceof Nh&&e.state===2&&e.cause)try{yield function(i,s){return O(this,null,function*(){let o=s.cause;for(let a of s.targetIds)i.K_.has(a)&&(yield i.remoteSyncer.rejectListen(a,o),i.K_.delete(a),i.H_.removeTarget(a))})}(n,e)}catch(r){z(Ji,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield td(n,r)}else if(e instanceof oo?n.H_.We(e):e instanceof kh?n.H_.Ze(e):n.H_.je(e),!t.isEqual(J.min()))try{let r=yield _C(n.localStore);t.compareTo(r)>=0&&(yield function(s,o){let a=s.H_.ot(o);return a.targetChanges.forEach((c,l)=>{if(c.resumeToken.approximateByteSize()>0){let h=s.K_.get(l);h&&s.K_.set(l,h.withResumeToken(c.resumeToken,o))}}),a.targetMismatches.forEach((c,l)=>{let h=s.K_.get(c);if(!h)return;s.K_.set(c,h.withResumeToken(He.EMPTY_BYTE_STRING,h.snapshotVersion)),IC(s,c);let f=new Do(h.target,c,l,h.sequenceNumber);vy(s,f)}),s.remoteSyncer.applyRemoteEvent(a)}(n,t))}catch(r){z(Ji,"Failed to raise snapshot:",r),yield td(n,r)}})}function td(n,e,t){return O(this,null,function*(){if(!si(e))throw e;n.W_.add(1),yield Mo(n),n.j_.set("Offline"),t||(t=()=>_C(n.localStore)),n.asyncQueue.enqueueRetryable(()=>O(this,null,function*(){z(Ji,"Retrying IndexedDB access"),yield t(),n.W_.delete(1),yield Gu(n)}))})}function RC(n,e){return e().catch(t=>td(n,t,e))}function Oo(n){return O(this,null,function*(){let e=W(n),t=Jr(e),r=e.U_.length>0?e.U_[e.U_.length-1].batchId:qr;for(;FP(e);)try{let i=yield DP(e.localStore,r);if(i===null){e.U_.length===0&&t.P_();break}r=i.batchId,PP(e,i)}catch(i){yield td(e,i)}FC(e)&&PC(e)})}function FP(n){return ai(n)&&n.U_.length<10}function PP(n,e){n.U_.push(e);let t=Jr(n);t.c_()&&t.S_&&t.b_(e.mutations)}function FC(n){return ai(n)&&!Jr(n).u_()&&n.U_.length>0}function PC(n){Jr(n).start()}function kP(n){return O(this,null,function*(){Jr(n).C_()})}function NP(n){return O(this,null,function*(){let e=Jr(n);for(let t of n.U_)e.b_(t.mutations)})}function MP(n,e,t){return O(this,null,function*(){let r=n.U_.shift(),i=Cg.from(r,e,t);yield RC(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield Oo(n)})}function OP(n,e){return O(this,null,function*(){e&&Jr(n).S_&&(yield function(r,i){return O(this,null,function*(){if(function(o){return WD(o)&&o!==B.ABORTED}(i.code)){let s=r.U_.shift();Jr(r).h_(),yield RC(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),yield Oo(r)}})}(n,e)),FC(n)&&PC(n)})}function z1(n,e){return O(this,null,function*(){let t=W(n);t.asyncQueue.verifyOperationInProgress(),z(Ji,"RemoteStore received new credentials");let r=ai(t);t.W_.add(3),yield Mo(t),r&&t.j_.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.W_.delete(3),yield Gu(t)})}function Em(n,e){return O(this,null,function*(){let t=W(n);e?(t.W_.delete(2),yield Gu(t)):e||(t.W_.add(2),yield Mo(t),t.j_.set("Unknown"))})}function Bo(n){return n.J_||(n.J_=function(t,r,i){let s=W(t);return s.M_(),new gm(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(n.datastore,n.asyncQueue,{xo:TP.bind(null,n),No:IP.bind(null,n),Lo:SP.bind(null,n),p_:RP.bind(null,n)}),n.G_.push(e=>O(this,null,function*(){e?(n.J_.h_(),xy(n)?_y(n):n.j_.set("Unknown")):(yield n.J_.stop(),SC(n))}))),n.J_}function Jr(n){return n.Y_||(n.Y_=function(t,r,i){let s=W(t);return s.M_(),new mm(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(n.datastore,n.asyncQueue,{xo:()=>Promise.resolve(),No:kP.bind(null,n),Lo:OP.bind(null,n),D_:NP.bind(null,n),v_:MP.bind(null,n)}),n.G_.push(e=>O(this,null,function*(){e?(n.Y_.h_(),yield Oo(n)):(yield n.Y_.stop(),n.U_.length>0&&(z(Ji,`Stopping write stream with ${n.U_.length} pending writes`),n.U_=[]))}))),n.Y_}var wm=class n{constructor(e,t,r,i,s){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new rt,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,s){let o=Date.now()+r,a=new n(e,t,o,i,s);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new $(B.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function Vo(n,e){if(je("AsyncQueue",`${e}: ${n}`),si(n))return new $(B.UNAVAILABLE,`${e}: ${n}`);throw n}var nd=class n{static emptySet(e){return new n(e.comparator)}constructor(e){this.comparator=e?(t,r)=>e(t,r)||K.comparator(t.key,r.key):(t,r)=>K.comparator(t.key,r.key),this.keyedMap=ou(),this.sortedSet=new ke(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){let t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){let t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){let i=t.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){let e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){let r=new n;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}};var rd=class{constructor(){this.Z_=new ke(K.comparator)}track(e){let t=e.doc.key,r=this.Z_.get(t);r?e.type!==0&&r.type===3?this.Z_=this.Z_.insert(t,e):e.type===3&&r.type!==1?this.Z_=this.Z_.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.Z_=this.Z_.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.Z_=this.Z_.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.Z_=this.Z_.remove(t):e.type===1&&r.type===2?this.Z_=this.Z_.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.Z_=this.Z_.insert(t,{type:2,doc:e.doc}):Y():this.Z_=this.Z_.insert(t,e)}X_(){let e=[];return this.Z_.inorderTraversal((t,r)=>{e.push(r)}),e}},Io=class n{constructor(e,t,r,i,s,o,a,c,l){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=c,this.hasCachedResults=l}static fromInitialDocuments(e,t,r,i,s){let o=[];return t.forEach(a=>{o.push({type:0,doc:a})}),new n(e,t,nd.emptySet(t),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&$u(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}};var Dm=class{constructor(){this.ea=void 0,this.ta=[]}na(){return this.ta.some(e=>e.ra())}},Cm=class{constructor(){this.queries=$1(),this.onlineState="Unknown",this.ia=new Set}terminate(){(function(t,r){let i=W(t),s=i.queries;i.queries=$1(),s.forEach((o,a)=>{for(let c of a.ta)c.onError(r)})})(this,new $(B.ABORTED,"Firestore shutting down"))}};function $1(){return new gn(n=>kD(n),$u)}function Ey(n,e){return O(this,null,function*(){let t=W(n),r=3,i=e.query,s=t.queries.get(i);s?!s.na()&&e.ra()&&(r=2):(s=new Dm,r=e.ra()?0:1);try{switch(r){case 0:s.ea=yield t.onListen(i,!0);break;case 1:s.ea=yield t.onListen(i,!1);break;case 2:yield t.onFirstRemoteStoreListen(i)}}catch(o){let a=Vo(o,`Initialization of query '${Js(e.query)}' failed`);return void e.onError(a)}t.queries.set(i,s),s.ta.push(e),e.sa(t.onlineState),s.ea&&e.oa(s.ea)&&Dy(t)})}function wy(n,e){return O(this,null,function*(){let t=W(n),r=e.query,i=3,s=t.queries.get(r);if(s){let o=s.ta.indexOf(e);o>=0&&(s.ta.splice(o,1),s.ta.length===0?i=e.ra()?0:1:!s.na()&&e.ra()&&(i=2))}switch(i){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}})}function BP(n,e){let t=W(n),r=!1;for(let i of e){let s=i.query,o=t.queries.get(s);if(o){for(let a of o.ta)a.oa(i)&&(r=!0);o.ea=i}}r&&Dy(t)}function VP(n,e,t){let r=W(n),i=r.queries.get(e);if(i)for(let s of i.ta)s.onError(t);r.queries.delete(e)}function Dy(n){n.ia.forEach(e=>{e.next()})}var Am,q1;(q1=Am||(Am={}))._a="default",q1.Cache="cache";var Mu=class{constructor(e,t,r){this.query=e,this.aa=t,this.ua=!1,this.ca=null,this.onlineState="Unknown",this.options=r||{}}oa(e){if(!this.options.includeMetadataChanges){let r=[];for(let i of e.docChanges)i.type!==3&&r.push(i);e=new Io(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.ua?this.la(e)&&(this.aa.next(e),t=!0):this.ha(e,this.onlineState)&&(this.Pa(e),t=!0),this.ca=e,t}onError(e){this.aa.error(e)}sa(e){this.onlineState=e;let t=!1;return this.ca&&!this.ua&&this.ha(this.ca,e)&&(this.Pa(this.ca),t=!0),t}ha(e,t){if(!e.fromCache||!this.ra())return!0;let r=t!=="Offline";return(!this.options.Ta||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}la(e){if(e.docChanges.length>0)return!0;let t=this.ca&&this.ca.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}Pa(e){e=Io.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.ua=!0,this.aa.next(e)}ra(){return this.options.source!==Am.Cache}};var bm=class{constructor(e,t){this.Ia=e,this.byteLength=t}Ea(){return"metadata"in this.Ia}};var id=class{constructor(e){this.serializer=e}ps(e){return On(this.serializer,e)}ys(e){return e.metadata.exists?eC(this.serializer,e.document,!1):Je.newNoDocument(this.ps(e.metadata.name),this.ws(e.metadata.readTime))}ws(e){return $e(e)}},Tm=class{constructor(e,t,r){this.da=e,this.localStore=t,this.serializer=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=kC(e)}Aa(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.Ia.namedQuery)this.queries.push(e.Ia.namedQuery);else if(e.Ia.documentMetadata){this.documents.push({metadata:e.Ia.documentMetadata}),e.Ia.documentMetadata.exists||++t;let r=_e.fromString(e.Ia.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.Ia.document&&(this.documents[this.documents.length-1].document=e.Ia.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}Ra(e){let t=new Map,r=new id(this.serializer);for(let i of e)if(i.metadata.queries){let s=r.ps(i.metadata.name);for(let o of i.metadata.queries){let a=(t.get(o)||ce()).add(s);t.set(o,a)}}return t}complete(){return O(this,null,function*(){let e=yield CP(this.localStore,new id(this.serializer),this.documents,this.da.id),t=this.Ra(this.documents);for(let r of this.queries)yield AP(this.localStore,r,t.get(r.name));return this.progress.taskState="Success",{progress:this.progress,Va:this.collectionGroups,ma:e}})}};function kC(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}var sd=class{constructor(e){this.key=e}},od=class{constructor(e){this.key=e}},ad=class{constructor(e,t){this.query=e,this.fa=t,this.ga=null,this.hasCachedResults=!1,this.current=!1,this.pa=ce(),this.mutatedKeys=ce(),this.ya=MD(e),this.wa=new nd(this.ya)}get Sa(){return this.fa}ba(e,t){let r=t?t.Da:new rd,i=t?t.wa:this.wa,s=t?t.mutatedKeys:this.mutatedKeys,o=i,a=!1,c=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,l=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((h,f)=>{let p=i.get(h),m=qu(this.query,f)?f:null,y=!!p&&this.mutatedKeys.has(p.key),w=!!m&&(m.hasLocalMutations||this.mutatedKeys.has(m.key)&&m.hasCommittedMutations),E=!1;p&&m?p.data.isEqual(m.data)?y!==w&&(r.track({type:3,doc:m}),E=!0):this.va(p,m)||(r.track({type:2,doc:m}),E=!0,(c&&this.ya(m,c)>0||l&&this.ya(m,l)<0)&&(a=!0)):!p&&m?(r.track({type:0,doc:m}),E=!0):p&&!m&&(r.track({type:1,doc:p}),E=!0,(c||l)&&(a=!0)),E&&(m?(o=o.add(m),s=w?s.add(h):s.delete(h)):(o=o.delete(h),s=s.delete(h)))}),this.query.limit!==null)for(;o.size>this.query.limit;){let h=this.query.limitType==="F"?o.last():o.first();o=o.delete(h.key),s=s.delete(h.key),r.track({type:1,doc:h})}return{wa:o,Da:r,ls:a,mutatedKeys:s}}va(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,i){let s=this.wa;this.wa=e.wa,this.mutatedKeys=e.mutatedKeys;let o=e.Da.X_();o.sort((h,f)=>function(m,y){let w=E=>{switch(E){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Y()}};return w(m)-w(y)}(h.type,f.type)||this.ya(h.doc,f.doc)),this.Ca(r),i=i!=null&&i;let a=t&&!i?this.Fa():[],c=this.pa.size===0&&this.current&&!i?1:0,l=c!==this.ga;return this.ga=c,o.length!==0||l?{snapshot:new Io(this.query,e.wa,s,o,e.mutatedKeys,c===0,l,!1,!!r&&r.resumeToken.approximateByteSize()>0),Ma:a}:{Ma:a}}sa(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({wa:this.wa,Da:new rd,mutatedKeys:this.mutatedKeys,ls:!1},!1)):{Ma:[]}}xa(e){return!this.fa.has(e)&&!!this.wa.has(e)&&!this.wa.get(e).hasLocalMutations}Ca(e){e&&(e.addedDocuments.forEach(t=>this.fa=this.fa.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.fa=this.fa.delete(t)),this.current=e.current)}Fa(){if(!this.current)return[];let e=this.pa;this.pa=ce(),this.wa.forEach(r=>{this.xa(r.key)&&(this.pa=this.pa.add(r.key))});let t=[];return e.forEach(r=>{this.pa.has(r)||t.push(new od(r))}),this.pa.forEach(r=>{e.has(r)||t.push(new sd(r))}),t}Oa(e){this.fa=e.gs,this.pa=ce();let t=this.ba(e.documents);return this.applyChanges(t,!0)}Na(){return Io.fromInitialDocuments(this.query,this.wa,this.mutatedKeys,this.ga===0,this.hasCachedResults)}},ui="SyncEngine",Im=class{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}},Sm=class{constructor(e){this.key=e,this.Ba=!1}},Rm=class{constructor(e,t,r,i,s,o){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.La={},this.ka=new gn(a=>kD(a),$u),this.qa=new Map,this.Qa=new Set,this.$a=new ke(K.comparator),this.Ua=new Map,this.Ka=new Fu,this.Wa={},this.Ga=new Map,this.za=Co.Kn(),this.onlineState="Unknown",this.ja=void 0}get isPrimaryClient(){return this.ja===!0}};function LP(n,e,t=!0){return O(this,null,function*(){let r=bd(n),i,s=r.ka.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.Na()):i=yield NC(r,e,t,!0),i})}function UP(n,e){return O(this,null,function*(){let t=bd(n);yield NC(t,e,!0,!1)})}function NC(n,e,t,r){return O(this,null,function*(){let i=yield Ao(n.localStore,bt(e)),s=i.targetId,o=n.sharedClientState.addLocalQueryTarget(s,t),a;return r&&(a=yield Cy(n,e,s,o==="current",i.resumeToken)),n.isPrimaryClient&&t&&Ad(n.remoteStore,i),a})}function Cy(n,e,t,r,i){return O(this,null,function*(){n.Ha=(f,p,m)=>function(w,E,x,D){return O(this,null,function*(){let R=E.view.ba(x);R.ls&&(R=yield Qh(w.localStore,E.query,!1).then(({documents:T})=>E.view.ba(T,R)));let F=D&&D.targetChanges.get(E.targetId),k=D&&D.targetMismatches.get(E.targetId)!=null,P=E.view.applyChanges(R,w.isPrimaryClient,F,k);return Fm(w,E.targetId,P.Ma),P.snapshot})}(n,f,p,m);let s=yield Qh(n.localStore,e,!0),o=new ad(e,s.gs),a=o.ba(s.documents),c=Tu.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",i),l=o.applyChanges(a,n.isPrimaryClient,c);Fm(n,t,l.Ma);let h=new Im(e,t,o);return n.ka.set(e,h),n.qa.has(t)?n.qa.get(t).push(e):n.qa.set(t,[e]),l.snapshot})}function jP(n,e,t){return O(this,null,function*(){let r=W(n),i=r.ka.get(e),s=r.qa.get(i.targetId);if(s.length>1)return r.qa.set(i.targetId,s.filter(o=>!$u(o,e))),void r.ka.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||(yield bo(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),t&&To(r.remoteStore,i.targetId),So(r,i.targetId)}).catch(ii))):(So(r,i.targetId),yield bo(r.localStore,i.targetId,!0))})}function zP(n,e){return O(this,null,function*(){let t=W(n),r=t.ka.get(e),i=t.qa.get(r.targetId);t.isPrimaryClient&&i.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),To(t.remoteStore,r.targetId))})}function $P(n,e,t){return O(this,null,function*(){let r=Iy(n);try{let i=yield function(o,a){let c=W(o),l=ze.now(),h=a.reduce((m,y)=>m.add(y.key),ce()),f,p;return c.persistence.runTransaction("Locally write mutations","readwrite",m=>{let y=Nt(),w=ce();return c.ds.getEntries(m,h).next(E=>{y=E,y.forEach((x,D)=>{D.isValidDocument()||(w=w.add(x))})}).next(()=>c.localDocuments.getOverlayedDocuments(m,y)).next(E=>{f=E;let x=[];for(let D of a){let R=nP(D,f.get(D.key).overlayedDocument);R!=null&&x.push(new mn(D.key,R,bD(R.value.mapValue),Ue.exists(!0)))}return c.mutationQueue.addMutationBatch(m,l,x,a)}).next(E=>{p=E;let x=E.applyToLocalDocumentSet(f,w);return c.documentOverlayCache.saveOverlays(m,E.batchId,x)})}).then(()=>({batchId:p.batchId,changes:BD(f)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(o,a,c){let l=o.Wa[o.currentUser.toKey()];l||(l=new ke(se)),l=l.insert(a,c),o.Wa[o.currentUser.toKey()]=l}(r,i.batchId,t),yield hr(r,i.changes),yield Oo(r.remoteStore)}catch(i){let s=Vo(i,"Failed to persist write");t.reject(s)}})}function MC(n,e){return O(this,null,function*(){let t=W(n);try{let r=yield wP(t.localStore,e);e.targetChanges.forEach((i,s)=>{let o=t.Ua.get(s);o&&(Z(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.Ba=!0:i.modifiedDocuments.size>0?Z(o.Ba):i.removedDocuments.size>0&&(Z(o.Ba),o.Ba=!1))}),yield hr(t,r,e)}catch(r){yield ii(r)}})}function H1(n,e,t){let r=W(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){let i=[];r.ka.forEach((s,o)=>{let a=o.view.sa(e);a.snapshot&&i.push(a.snapshot)}),function(o,a){let c=W(o);c.onlineState=a;let l=!1;c.queries.forEach((h,f)=>{for(let p of f.ta)p.sa(a)&&(l=!0)}),l&&Dy(c)}(r.eventManager,e),i.length&&r.La.p_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function qP(n,e,t){return O(this,null,function*(){let r=W(n);r.sharedClientState.updateQueryState(e,"rejected",t);let i=r.Ua.get(e),s=i&&i.key;if(s){let o=new ke(K.comparator);o=o.insert(s,Je.newNoDocument(s,J.min()));let a=ce().add(s),c=new bu(J.min(),new Map,new ke(se),o,a);yield MC(r,c),r.$a=r.$a.remove(s),r.Ua.delete(e),Ty(r)}else yield bo(r.localStore,e,!1).then(()=>So(r,e,t)).catch(ii)})}function HP(n,e){return O(this,null,function*(){let t=W(n),r=e.batch.batchId;try{let i=yield EP(t.localStore,e);by(t,r,null),Ay(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield hr(t,i)}catch(i){yield ii(i)}})}function GP(n,e,t){return O(this,null,function*(){let r=W(n);try{let i=yield function(o,a){let c=W(o);return c.persistence.runTransaction("Reject batch","readwrite-primary",l=>{let h;return c.mutationQueue.lookupMutationBatch(l,a).next(f=>(Z(f!==null),h=f.keys(),c.mutationQueue.removeMutationBatch(l,f))).next(()=>c.mutationQueue.performConsistencyCheck(l)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(l,h,a)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(l,h)).next(()=>c.localDocuments.getDocuments(l,h))})}(r.localStore,e);by(r,e,t),Ay(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield hr(r,i)}catch(i){yield ii(i)}})}function WP(n,e){return O(this,null,function*(){let t=W(n);ai(t.remoteStore)||z(ui,"The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{let r=yield function(o){let a=W(o);return a.persistence.runTransaction("Get highest unacknowledged batch id","readonly",c=>a.mutationQueue.getHighestUnacknowledgedBatchId(c))}(t.localStore);if(r===qr)return void e.resolve();let i=t.Ga.get(r)||[];i.push(e),t.Ga.set(r,i)}catch(r){let i=Vo(r,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}})}function Ay(n,e){(n.Ga.get(e)||[]).forEach(t=>{t.resolve()}),n.Ga.delete(e)}function by(n,e,t){let r=W(n),i=r.Wa[r.currentUser.toKey()];if(i){let s=i.get(e);s&&(t?s.reject(t):s.resolve(),i=i.remove(e)),r.Wa[r.currentUser.toKey()]=i}}function So(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(let r of n.qa.get(e))n.ka.delete(r),t&&n.La.Ja(r,t);n.qa.delete(e),n.isPrimaryClient&&n.Ka.br(e).forEach(r=>{n.Ka.containsKey(r)||OC(n,r)})}function OC(n,e){n.Qa.delete(e.path.canonicalString());let t=n.$a.get(e);t!==null&&(To(n.remoteStore,t),n.$a=n.$a.remove(e),n.Ua.delete(t),Ty(n))}function Fm(n,e,t){for(let r of t)r instanceof sd?(n.Ka.addReference(r.key,e),KP(n,r)):r instanceof od?(z(ui,"Document no longer in limbo: "+r.key),n.Ka.removeReference(r.key,e),n.Ka.containsKey(r.key)||OC(n,r.key)):Y()}function KP(n,e){let t=e.key,r=t.path.canonicalString();n.$a.get(t)||n.Qa.has(r)||(z(ui,"New document in limbo: "+t),n.Qa.add(r),Ty(n))}function Ty(n){for(;n.Qa.size>0&&n.$a.size<n.maxConcurrentLimboResolutions;){let e=n.Qa.values().next().value;n.Qa.delete(e);let t=new K(_e.fromString(e)),r=n.za.next();n.Ua.set(r,new Sm(t)),n.$a=n.$a.insert(t,r),Ad(n.remoteStore,new Do(bt(No(t.path)),r,"TargetPurposeLimboResolution",Wt.ae))}}function hr(n,e,t){return O(this,null,function*(){let r=W(n),i=[],s=[],o=[];r.ka.isEmpty()||(r.ka.forEach((a,c)=>{o.push(r.Ha(c,e,t).then(l=>{var h;if((l||t)&&r.isPrimaryClient){let f=l?!l.fromCache:(h=t?.targetChanges.get(c.targetId))===null||h===void 0?void 0:h.current;r.sharedClientState.updateQueryState(c.targetId,f?"current":"not-current")}if(l){i.push(l);let f=om.Yi(c.targetId,l);s.push(f)}}))}),yield Promise.all(o),r.La.p_(i),yield function(c,l){return O(this,null,function*(){let h=W(c);try{yield h.persistence.runTransaction("notifyLocalViewChanges","readwrite",f=>M.forEach(l,p=>M.forEach(p.Hi,m=>h.persistence.referenceDelegate.addReference(f,p.targetId,m)).next(()=>M.forEach(p.Ji,m=>h.persistence.referenceDelegate.removeReference(f,p.targetId,m)))))}catch(f){if(!si(f))throw f;z(yy,"Failed to update sequence numbers: "+f)}for(let f of l){let p=f.targetId;if(!f.fromCache){let m=h.Ts.get(p),y=m.snapshotVersion,w=m.withLastLimboFreeSnapshotVersion(y);h.Ts=h.Ts.insert(p,w)}}})}(r.localStore,s))})}function QP(n,e){return O(this,null,function*(){let t=W(n);if(!t.currentUser.isEqual(e)){z(ui,"User change. New user:",e.toKey());let r=yield vC(t.localStore,e);t.currentUser=e,function(s,o){s.Ga.forEach(a=>{a.forEach(c=>{c.reject(new $(B.CANCELLED,o))})}),s.Ga.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield hr(t,r.Rs)}})}function XP(n,e){let t=W(n),r=t.Ua.get(e);if(r&&r.Ba)return ce().add(r.key);{let i=ce(),s=t.qa.get(e);if(!s)return i;for(let o of s){let a=t.ka.get(o);i=i.unionWith(a.view.Sa)}return i}}function YP(n,e){return O(this,null,function*(){let t=W(n),r=yield Qh(t.localStore,e.query,!0),i=e.view.Oa(r);return t.isPrimaryClient&&Fm(t,e.targetId,i.Ma),i})}function ZP(n,e){return O(this,null,function*(){let t=W(n);return wC(t.localStore,e).then(r=>hr(t,r))})}function JP(n,e,t,r){return O(this,null,function*(){let i=W(n),s=yield function(a,c){let l=W(a),h=W(l.mutationQueue);return l.persistence.runTransaction("Lookup mutation documents","readonly",f=>h.Ln(f,c).next(p=>p?l.localDocuments.getDocuments(f,p):M.resolve(null)))}(i.localStore,e);s!==null?(t==="pending"?yield Oo(i.remoteStore):t==="acknowledged"||t==="rejected"?(by(i,e,r||null),Ay(i,e),function(a,c){W(W(a).mutationQueue).qn(c)}(i.localStore,e)):Y(),yield hr(i,s)):z(ui,"Cannot apply mutation batch with id: "+e)})}function ek(n,e){return O(this,null,function*(){let t=W(n);if(bd(t),Iy(t),e===!0&&t.ja!==!0){let r=t.sharedClientState.getAllActiveQueryTargets(),i=yield G1(t,r.toArray());t.ja=!0,yield Em(t.remoteStore,!0);for(let s of i)Ad(t.remoteStore,s)}else if(e===!1&&t.ja!==!1){let r=[],i=Promise.resolve();t.qa.forEach((s,o)=>{t.sharedClientState.isLocalQueryTarget(o)?r.push(o):i=i.then(()=>(So(t,o),bo(t.localStore,o,!0))),To(t.remoteStore,o)}),yield i,yield G1(t,r),function(o){let a=W(o);a.Ua.forEach((c,l)=>{To(a.remoteStore,l)}),a.Ka.Dr(),a.Ua=new Map,a.$a=new ke(K.comparator)}(t),t.ja=!1,yield Em(t.remoteStore,!1)}})}function G1(n,e,t){return O(this,null,function*(){let r=W(n),i=[],s=[];for(let o of e){let a,c=r.qa.get(o);if(c&&c.length!==0){a=yield Ao(r.localStore,bt(c[0]));for(let l of c){let h=r.ka.get(l),f=yield YP(r,h);f.snapshot&&s.push(f.snapshot)}}else{let l=yield EC(r.localStore,o);a=yield Ao(r.localStore,l),yield Cy(r,BC(l),o,!1,a.resumeToken)}i.push(a)}return r.La.p_(s),i})}function BC(n){return PD(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function tk(n){return function(t){return W(W(t).persistence).zi()}(W(n).localStore)}function nk(n,e,t,r){return O(this,null,function*(){let i=W(n);if(i.ja)return void z(ui,"Ignoring unexpected query state notification.");let s=i.qa.get(e);if(s&&s.length>0)switch(t){case"current":case"not-current":{let o=yield wC(i.localStore,ND(s[0])),a=bu.createSynthesizedRemoteEventForCurrentChange(e,t==="current",He.EMPTY_BYTE_STRING);yield hr(i,o,a);break}case"rejected":yield bo(i.localStore,e,!0),So(i,e,r);break;default:Y()}})}function rk(n,e,t){return O(this,null,function*(){let r=bd(n);if(r.ja){for(let i of e){if(r.qa.has(i)&&r.sharedClientState.isActiveQueryTarget(i)){z(ui,"Adding an already active target "+i);continue}let s=yield EC(r.localStore,i),o=yield Ao(r.localStore,s);yield Cy(r,BC(s),o.targetId,!1,o.resumeToken),Ad(r.remoteStore,o)}for(let i of t)r.qa.has(i)&&(yield bo(r.localStore,i,!1).then(()=>{To(r.remoteStore,i),So(r,i)}).catch(ii))}})}function bd(n){let e=W(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=MC.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=XP.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=qP.bind(null,e),e.La.p_=BP.bind(null,e.eventManager),e.La.Ja=VP.bind(null,e.eventManager),e}function Iy(n){let e=W(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=HP.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=GP.bind(null,e),e}function ik(n,e,t){let r=W(n);(function(s,o,a){return O(this,null,function*(){try{let c=yield o.getMetadata();if(yield function(m,y){let w=W(m),E=$e(y.createTime);return w.persistence.runTransaction("hasNewerBundle","readonly",x=>w.Yr.getBundleMetadata(x,y.id)).then(x=>!!x&&x.createTime.compareTo(E)>=0)}(s.localStore,c))return yield o.close(),a._completeWith(function(m){return{taskState:"Success",documentsLoaded:m.totalDocuments,bytesLoaded:m.totalBytes,totalDocuments:m.totalDocuments,totalBytes:m.totalBytes}}(c)),Promise.resolve(new Set);a._updateProgress(kC(c));let l=new Tm(c,s.localStore,o.serializer),h=yield o.Ya();for(;h;){let p=yield l.Aa(h);p&&a._updateProgress(p),h=yield o.Ya()}let f=yield l.complete();return yield hr(s,f.ma,void 0),yield function(m,y){let w=W(m);return w.persistence.runTransaction("Save bundle","readwrite",E=>w.Yr.saveBundleMetadata(E,y))}(s.localStore,c),a._completeWith(f.progress),Promise.resolve(f.Va)}catch(c){return ir(ui,`Loading bundle failed with ${c}`),a._failWith(c),Promise.resolve(new Set)}})})(r,e,t).then(i=>{r.sharedClientState.notifyBundleLoaded(i)})}var Sy=(()=>{class n{constructor(){this.kind="memory",this.synchronizeTabs=!1}initialize(t){return O(this,null,function*(){this.serializer=Hu(t.databaseInfo.databaseId),this.sharedClientState=this.Za(t),this.persistence=this.Xa(t),yield this.persistence.start(),this.localStore=this.eu(t),this.gcScheduler=this.tu(t,this.localStore),this.indexBackfillerScheduler=this.nu(t,this.localStore)})}tu(t,r){return null}nu(t,r){return null}eu(t){return yC(this.persistence,new Kh,t.initialUser,this.serializer)}Xa(t){return new Pu(Gh.ri,this.serializer)}Za(t){return new Zh}terminate(){return O(this,null,function*(){var t,r;(t=this.gcScheduler)===null||t===void 0||t.stop(),(r=this.indexBackfillerScheduler)===null||r===void 0||r.stop(),this.sharedClientState.shutdown(),yield this.persistence.shutdown()})}}return n.provider={build:()=>new n},n})(),Pm=class extends Sy{constructor(e){super(),this.cacheSizeBytes=e}tu(e,t){Z(this.persistence.referenceDelegate instanceof Wh);let r=this.persistence.referenceDelegate.garbageCollector;return new $h(r,e.asyncQueue,t)}Xa(e){let t=this.cacheSizeBytes!==void 0?kt.withCacheSize(this.cacheSizeBytes):kt.DEFAULT;return new Pu(r=>Wh.ri(r,t),this.serializer)}},ud=class n extends Sy{constructor(e,t,r){super(),this.ru=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.kind="persistent",this.synchronizeTabs=!1}initialize(e){return O(this,null,function*(){yield Ff(n.prototype,this,"initialize").call(this,e),yield this.ru.initialize(this,e),yield Iy(this.ru.syncEngine),yield Oo(this.ru.remoteStore),yield this.persistence.Ci(()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve()))})}eu(e){return yC(this.persistence,new Kh,e.initialUser,this.serializer)}tu(e,t){let r=this.persistence.referenceDelegate.garbageCollector;return new $h(r,e.asyncQueue,t)}nu(e,t){let r=new ig(t,this.persistence);return new rg(e.asyncQueue,r)}Xa(e){let t=my(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=this.cacheSizeBytes!==void 0?kt.withCacheSize(this.cacheSizeBytes):kt.DEFAULT;return new sm(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,TC(),ph(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Za(e){return new Zh}},km=class n extends ud{constructor(e,t){super(e,t,!1),this.ru=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){return O(this,null,function*(){yield Ff(n.prototype,this,"initialize").call(this,e);let t=this.ru.syncEngine;this.sharedClientState instanceof fu&&(this.sharedClientState.syncEngine={uo:JP.bind(null,t),co:nk.bind(null,t),lo:rk.bind(null,t),zi:tk.bind(null,t),ao:ZP.bind(null,t)},yield this.sharedClientState.start()),yield this.persistence.Ci(r=>O(this,null,function*(){yield ek(this.ru.syncEngine,r),this.gcScheduler&&(r&&!this.gcScheduler.started?this.gcScheduler.start():r||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(r&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():r||this.indexBackfillerScheduler.stop())}))})}Za(e){let t=TC();if(!fu.D(t))throw new $(B.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");let r=my(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new fu(t,e.asyncQueue,r,e.clientId,e.initialUser)}},Ry=(()=>{class n{initialize(t,r){return O(this,null,function*(){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>H1(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=QP.bind(null,this.syncEngine),yield Em(this.remoteStore,this.syncEngine.isPrimaryClient))})}createEventManager(t){return function(){return new Cm}()}createDatastore(t){let r=Hu(t.databaseInfo.databaseId),i=function(o){return new pm(o)}(t.databaseInfo);return function(o,a,c,l){return new vm(o,a,c,l)}(t.authCredentials,t.appCheckCredentials,i,r)}createRemoteStore(t){return function(i,s,o,a,c){return new xm(i,s,o,a,c)}(this.localStore,this.datastore,t.asyncQueue,r=>H1(this.syncEngine,r,0),function(){return Jh.D()?new Jh:new lm}())}createSyncEngine(t,r){return function(s,o,a,c,l,h,f){let p=new Rm(s,o,a,c,l,h);return f&&(p.ja=!0),p}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,r)}terminate(){return O(this,null,function*(){var t,r;yield function(s){return O(this,null,function*(){let o=W(s);z(Ji,"RemoteStore shutting down."),o.W_.add(5),yield Mo(o),o.z_.shutdown(),o.j_.set("Unknown")})}(this.remoteStore),(t=this.datastore)===null||t===void 0||t.terminate(),(r=this.eventManager)===null||r===void 0||r.terminate()})}}return n.provider={build:()=>new n},n})();function W1(n,e=10240){let t=0;return{read(){return O(this,null,function*(){if(t<n.byteLength){let i={value:n.slice(t,t+e),done:!1};return t+=e,i}return{done:!0}})},cancel(){return O(this,null,function*(){})},releaseLock(){},closed:Promise.resolve()}}var Ro=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.iu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.iu(this.observer.error,e):je("Uncaught Error in snapshot listener:",e.toString()))}su(){this.muted=!0}iu(e,t){setTimeout(()=>{this.muted||e(t)},0)}};var Nm=class{constructor(e,t){this.ou=e,this.serializer=t,this.metadata=new rt,this.buffer=new Uint8Array,this._u=function(){return new TextDecoder("utf-8")}(),this.au().then(r=>{r&&r.Ea()?this.metadata.resolve(r.Ia.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is
             ${JSON.stringify(r?.Ia)}`))},r=>this.metadata.reject(r))}close(){return this.ou.cancel()}getMetadata(){return O(this,null,function*(){return this.metadata.promise})}Ya(){return O(this,null,function*(){return yield this.getMetadata(),this.au()})}au(){return O(this,null,function*(){let e=yield this.uu();if(e===null)return null;let t=this._u.decode(e),r=Number(t);isNaN(r)&&this.cu(`length string (${t}) is not valid number`);let i=yield this.lu(r);return new bm(JSON.parse(i),e.length+r)})}hu(){return this.buffer.findIndex(e=>e===123)}uu(){return O(this,null,function*(){for(;this.hu()<0&&!(yield this.Pu()););if(this.buffer.length===0)return null;let e=this.hu();e<0&&this.cu("Reached the end of bundle when a length string is expected.");let t=this.buffer.slice(0,e);return this.buffer=this.buffer.slice(e),t})}lu(e){return O(this,null,function*(){for(;this.buffer.length<e;)(yield this.Pu())&&this.cu("Reached the end of bundle when more is expected.");let t=this._u.decode(this.buffer.slice(0,e));return this.buffer=this.buffer.slice(e),t})}cu(e){throw this.ou.cancel(),new Error(`Invalid bundle format: ${e}`)}Pu(){return O(this,null,function*(){let e=yield this.ou.read();if(!e.done){let t=new Uint8Array(this.buffer.length+e.value.length);t.set(this.buffer),t.set(e.value,this.buffer.length),this.buffer=t}return e.done})}};var Mm=class{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}lookup(e){return O(this,null,function*(){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new $(B.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;let t=yield function(i,s){return O(this,null,function*(){let o=W(i),a={documents:s.map(f=>Iu(o.serializer,f))},c=yield o.Co("BatchGetDocuments",o.serializer.databaseId,_e.emptyPath(),a,s.length),l=new Map;c.forEach(f=>{let p=uP(o.serializer,f);l.set(p.key.toString(),p)});let h=[];return s.forEach(f=>{let p=l.get(f.toString());Z(!!p),h.push(p)}),h})}(this.datastore,e);return t.forEach(r=>this.recordVersion(r)),t})}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastTransactionError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new Zr(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){return O(this,null,function*(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;let e=this.readVersions;this.mutations.forEach(t=>{e.delete(t.key.toString())}),e.forEach((t,r)=>{let i=K.fromPath(r);this.mutations.push(new Du(i,this.precondition(i)))}),yield function(r,i){return O(this,null,function*(){let s=W(r),o={writes:i.map(a=>Su(s.serializer,a))};yield s.So("Commit",s.serializer.databaseId,_e.emptyPath(),o)})}(this.datastore,this.mutations),this.committed=!0})}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw Y();t=J.min()}let r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new $(B.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){let t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(J.min())?Ue.exists(!1):Ue.updateTime(t):Ue.none()}preconditionForUpdate(e){let t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(J.min()))throw new $(B.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Ue.updateTime(t)}return Ue.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}};var Om=class{constructor(e,t,r,i,s){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=i,this.deferred=s,this.Tu=r.maxAttempts,this.a_=new Nu(this.asyncQueue,"transaction_retry")}Iu(){this.Tu-=1,this.Eu()}Eu(){this.a_.Xo(()=>O(this,null,function*(){let e=new Mm(this.datastore),t=this.du(e);t&&t.then(r=>{this.asyncQueue.enqueueAndForget(()=>e.commit().then(()=>{this.deferred.resolve(r)}).catch(i=>{this.Au(i)}))}).catch(r=>{this.Au(r)})}))}du(e){try{let t=this.updateFunction(e);return!Uu(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Au(e){this.Tu>0&&this.Ru(e)?(this.Tu-=1,this.asyncQueue.enqueueAndForget(()=>(this.Eu(),Promise.resolve()))):this.deferred.reject(e)}Ru(e){if(e.name==="FirebaseError"){let t=e.code;return t==="aborted"||t==="failed-precondition"||t==="already-exists"||!WD(t)}return!1}};var ei="FirestoreClient",Bm=class{constructor(e,t,r,i,s){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=Ze.UNAUTHENTICATED,this.clientId=yh.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(r,o=>O(this,null,function*(){z(ei,"Received user=",o.uid),yield this.authCredentialListener(o),this.user=o})),this.appCheckCredentials.start(r,o=>(z(ei,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();let e=new rt;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(()=>O(this,null,function*(){try{this._onlineComponents&&(yield this._onlineComponents.terminate()),this._offlineComponents&&(yield this._offlineComponents.terminate()),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){let r=Vo(t,"Failed to shutdown persistence");e.reject(r)}})),e.promise}};function Gp(n,e){return O(this,null,function*(){n.asyncQueue.verifyOperationInProgress(),z(ei,"Initializing OfflineComponentProvider");let t=n.configuration;yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(i=>O(this,null,function*(){r.isEqual(i)||(yield vC(e.localStore,i),r=i)})),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e})}function K1(n,e){return O(this,null,function*(){n.asyncQueue.verifyOperationInProgress();let t=yield Fy(n);z(ei,"Initializing OnlineComponentProvider"),yield e.initialize(t,n.configuration),n.setCredentialChangeListener(r=>z1(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,i)=>z1(e.remoteStore,i)),n._onlineComponents=e})}function Fy(n){return O(this,null,function*(){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){z(ei,"Using user provided OfflineComponentProvider");try{yield Gp(n,n._uninitializedComponentsProvider._offline)}catch(e){let t=e;if(!function(i){return i.name==="FirebaseError"?i.code===B.FAILED_PRECONDITION||i.code===B.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(t))throw t;ir("Error using user provided cache. Falling back to memory cache: "+t),yield Gp(n,new Sy)}}else z(ei,"Using default OfflineComponentProvider"),yield Gp(n,new Pm(void 0));return n._offlineComponents})}function Td(n){return O(this,null,function*(){return n._onlineComponents||(n._uninitializedComponentsProvider?(z(ei,"Using user provided OnlineComponentProvider"),yield K1(n,n._uninitializedComponentsProvider._online)):(z(ei,"Using default OnlineComponentProvider"),yield K1(n,new Ry))),n._onlineComponents})}function VC(n){return Fy(n).then(e=>e.persistence)}function Py(n){return Fy(n).then(e=>e.localStore)}function LC(n){return Td(n).then(e=>e.remoteStore)}function ky(n){return Td(n).then(e=>e.syncEngine)}function sk(n){return Td(n).then(e=>e.datastore)}function Fo(n){return O(this,null,function*(){let e=yield Td(n),t=e.eventManager;return t.onListen=LP.bind(null,e.syncEngine),t.onUnlisten=jP.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=UP.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=zP.bind(null,e.syncEngine),t})}function ok(n){return n.asyncQueue.enqueue(()=>O(this,null,function*(){let e=yield VC(n),t=yield LC(n);return e.setNetworkEnabled(!0),function(i){let s=W(i);return s.W_.delete(0),Gu(s)}(t)}))}function ak(n){return n.asyncQueue.enqueue(()=>O(this,null,function*(){let e=yield VC(n),t=yield LC(n);return e.setNetworkEnabled(!1),function(i){return O(this,null,function*(){let s=W(i);s.W_.add(0),yield Mo(s),s.j_.set("Offline")})}(t)}))}function uk(n,e){let t=new rt;return n.asyncQueue.enqueueAndForget(()=>O(this,null,function*(){return function(i,s,o){return O(this,null,function*(){try{let a=yield function(l,h){let f=W(l);return f.persistence.runTransaction("read document","readonly",p=>f.localDocuments.getDocument(p,h))}(i,s);a.isFoundDocument()?o.resolve(a):a.isNoDocument()?o.resolve(null):o.reject(new $(B.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(a){let c=Vo(a,`Failed to get document '${s} from cache`);o.reject(c)}})}(yield Py(n),e,t)})),t.promise}function UC(n,e,t={}){let r=new rt;return n.asyncQueue.enqueueAndForget(()=>O(this,null,function*(){return function(s,o,a,c,l){let h=new Ro({next:p=>{h.su(),o.enqueueAndForget(()=>wy(s,f));let m=p.docs.has(a);!m&&p.fromCache?l.reject(new $(B.UNAVAILABLE,"Failed to get document because the client is offline.")):m&&p.fromCache&&c&&c.source==="server"?l.reject(new $(B.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):l.resolve(p)},error:p=>l.reject(p)}),f=new Mu(No(a.path),h,{includeMetadataChanges:!0,Ta:!0});return Ey(s,f)}(yield Fo(n),n.asyncQueue,e,t,r)})),r.promise}function ck(n,e){let t=new rt;return n.asyncQueue.enqueueAndForget(()=>O(this,null,function*(){return function(i,s,o){return O(this,null,function*(){try{let a=yield Qh(i,s,!0),c=new ad(s,a.gs),l=c.ba(a.documents),h=c.applyChanges(l,!1);o.resolve(h.snapshot)}catch(a){let c=Vo(a,`Failed to execute query '${s} against cache`);o.reject(c)}})}(yield Py(n),e,t)})),t.promise}function jC(n,e,t={}){let r=new rt;return n.asyncQueue.enqueueAndForget(()=>O(this,null,function*(){return function(s,o,a,c,l){let h=new Ro({next:p=>{h.su(),o.enqueueAndForget(()=>wy(s,f)),p.fromCache&&c.source==="server"?l.reject(new $(B.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):l.resolve(p)},error:p=>l.reject(p)}),f=new Mu(a,h,{includeMetadataChanges:!0,Ta:!0});return Ey(s,f)}(yield Fo(n),n.asyncQueue,e,t,r)})),r.promise}function lk(n,e){let t=new Ro(e);return n.asyncQueue.enqueueAndForget(()=>O(this,null,function*(){return function(i,s){W(i).ia.add(s),s.next()}(yield Fo(n),t)})),()=>{t.su(),n.asyncQueue.enqueueAndForget(()=>O(this,null,function*(){return function(i,s){W(i).ia.delete(s)}(yield Fo(n),t)}))}}function hk(n,e,t,r){let i=function(o,a){let c;return c=typeof o=="string"?ey().encode(o):o,function(h,f){return new Nm(h,f)}(function(h,f){if(h instanceof Uint8Array)return W1(h,f);if(h instanceof ArrayBuffer)return W1(new Uint8Array(h),f);if(h instanceof ReadableStream)return h.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(c),a)}(t,Hu(e));n.asyncQueue.enqueueAndForget(()=>O(this,null,function*(){ik(yield ky(n),i,r)}))}function dk(n,e){return n.asyncQueue.enqueue(()=>O(this,null,function*(){return function(r,i){let s=W(r);return s.persistence.runTransaction("Get named query","readonly",o=>s.Yr.getNamedQuery(o,i))}(yield Py(n),e)}))}function zC(n){let e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}var Q1=new Map;function Ny(n,e,t){if(!t)throw new $(B.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function fk(n,e,t,r){if(e===!0&&r===!0)throw new $(B.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function X1(n){if(!K.isDocumentKey(n))throw new $(B.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function Y1(n){if(K.isDocumentKey(n))throw new $(B.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function Id(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{let e=function(r){return r.constructor?r.constructor.name:null}(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":Y()}function De(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new $(B.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let t=Id(n);throw new $(B.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function $C(n,e){if(e<=0)throw new $(B.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}var qC="firestore.googleapis.com",Z1=!0,cd=class{constructor(e){var t,r;if(e.host===void 0){if(e.ssl!==void 0)throw new $(B.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=qC,this.ssl=Z1}else this.host=e.host,this.ssl=(t=e.ssl)!==null&&t!==void 0?t:Z1;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=lC;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<_P)throw new $(B.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}fk("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=zC((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new $(B.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new $(B.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new $(B.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},es=class{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new cd({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new $(B.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new $(B.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new cd(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new Wp;switch(r.type){case"firstParty":return new Yp(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new $(B.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}_restart(){return O(this,null,function*(){this._terminateTask==="notTerminated"?yield this._terminate():this._terminateTask="notTerminated"})}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){let r=Q1.get(t);r&&(z("ComponentProvider","Removing Datastore"),Q1.delete(t),r.terminate())}(this),Promise.resolve()}};function t8(n,e,t,r={}){var i;let s=(n=De(n,es))._getSettings(),o=Object.assign(Object.assign({},s),{emulatorOptions:n._getEmulatorOptions()}),a=`${e}:${t}`;s.host!==qC&&s.host!==a&&ir("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");let c=Object.assign(Object.assign({},s),{host:a,ssl:!1,emulatorOptions:r});if(!Fc(c,o)&&(n._setSettings(c),r.mockUserToken)){let l,h;if(typeof r.mockUserToken=="string")l=r.mockUserToken,h=Ze.MOCK_USER;else{l=Ic(r.mockUserToken,(i=n._app)===null||i===void 0?void 0:i.options.projectId);let f=r.mockUserToken.sub||r.mockUserToken.user_id;if(!f)throw new $(B.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");h=new Ze(f)}n._authCredentials=new Kp(new gh(l,h))}}var dt=class n{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new n(this.firestore,e,this._query)}},qe=class n{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Bn(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new n(this.firestore,e,this._key)}},Bn=class n extends dt{constructor(e,t,r){super(e,t,No(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new qe(this.firestore,null,new K(e))}withConverter(e){return new n(this.firestore,e,this._path)}};function n8(n,e,...t){if(n=Ce(n),Ny("collection","path",e),n instanceof es){let r=_e.fromString(e,...t);return Y1(r),new Bn(n,null,r)}{if(!(n instanceof qe||n instanceof Bn))throw new $(B.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(_e.fromString(e,...t));return Y1(r),new Bn(n.firestore,null,r)}}function r8(n,e){if(n=De(n,es),Ny("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new $(B.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new dt(n,null,function(r){return new pn(_e.emptyPath(),r)}(e))}function pk(n,e,...t){if(n=Ce(n),arguments.length===1&&(e=yh.newId()),Ny("doc","path",e),n instanceof es){let r=_e.fromString(e,...t);return X1(r),new qe(n,null,new K(r))}{if(!(n instanceof qe||n instanceof Bn))throw new $(B.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(_e.fromString(e,...t));return X1(r),new qe(n.firestore,n instanceof Bn?n.converter:null,new K(r))}}function i8(n,e){return n=Ce(n),e=Ce(e),(n instanceof qe||n instanceof Bn)&&(e instanceof qe||e instanceof Bn)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function gk(n,e){return n=Ce(n),e=Ce(e),n instanceof dt&&e instanceof dt&&n.firestore===e.firestore&&$u(n._query,e._query)&&n.converter===e.converter}var J1="AsyncQueue",ld=class{constructor(e=Promise.resolve()){this.Vu=[],this.mu=!1,this.fu=[],this.gu=null,this.pu=!1,this.yu=!1,this.wu=[],this.a_=new Nu(this,"async_queue_retry"),this.Su=()=>{let r=ph();r&&z(J1,"Visibility state changed to "+r.visibilityState),this.a_.t_()},this.bu=e;let t=ph();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.Su)}get isShuttingDown(){return this.mu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Du(),this.vu(e)}enterRestrictedMode(e){if(!this.mu){this.mu=!0,this.yu=e||!1;let t=ph();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.Su)}}enqueue(e){if(this.Du(),this.mu)return new Promise(()=>{});let t=new rt;return this.vu(()=>this.mu&&this.yu?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Vu.push(e),this.Cu()))}Cu(){return O(this,null,function*(){if(this.Vu.length!==0){try{yield this.Vu[0](),this.Vu.shift(),this.a_.reset()}catch(e){if(!si(e))throw e;z(J1,"Operation failed with retryable error: "+e)}this.Vu.length>0&&this.a_.Xo(()=>this.Cu())}})}vu(e){let t=this.bu.then(()=>(this.pu=!0,e().catch(r=>{this.gu=r,this.pu=!1;let i=function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),a}(r);throw je("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.pu=!1,r))));return this.bu=t,t}enqueueAfterDelay(e,t,r){this.Du(),this.wu.indexOf(e)>-1&&(t=0);let i=wm.createAndSchedule(this,e,t,r,s=>this.Fu(s));return this.fu.push(i),i}Du(){this.gu&&Y()}verifyOperationInProgress(){}Mu(){return O(this,null,function*(){let e;do e=this.bu,yield e;while(e!==this.bu)})}xu(e){for(let t of this.fu)if(t.timerId===e)return!0;return!1}Ou(e){return this.Mu().then(()=>{this.fu.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(let t of this.fu)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Mu()})}Nu(e){this.wu.push(e)}Fu(e){let t=this.fu.indexOf(e);this.fu.splice(t,1)}};function Vm(n){return function(t,r){if(typeof t!="object"||t===null)return!1;let i=t;for(let s of r)if(s in i&&typeof i[s]=="function")return!0;return!1}(n,["next","error","complete"])}var Lm=class{constructor(){this._progressObserver={},this._taskCompletionResolver=new rt,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}};var s8=-1,Ve=class extends es{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new ld,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return O(this,null,function*(){if(this._firestoreClient){let e=this._firestoreClient.terminate();this._queue=new ld(e),this._firestoreClient=void 0,yield e}})}};function Tt(n){if(n._terminated)throw new $(B.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||HC(n),n._firestoreClient}function HC(n){var e,t,r;let i=n._freezeSettings(),s=function(a,c,l,h){return new ug(a,c,l,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,zC(h.experimentalLongPollingOptions),h.useFetchStreams)}(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,i);n._componentsProvider||!((t=i.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(n._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),n._firestoreClient=new Bm(n._authCredentials,n._appCheckCredentials,n._queue,s,n._componentsProvider&&function(a){let c=a?._online.build();return{_offline:a?._offline.build(c),_online:c}}(n._componentsProvider))}function o8(n,e){ir("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");let t=n._freezeSettings();return GC(n,Ry.provider,{build:r=>new ud(r,t.cacheSizeBytes,e?.forceOwnership)}),Promise.resolve()}function a8(n){return O(this,null,function*(){ir("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");let e=n._freezeSettings();GC(n,Ry.provider,{build:t=>new km(t,e.cacheSizeBytes)})})}function GC(n,e,t){if((n=De(n,Ve))._firestoreClient||n._terminated)throw new $(B.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.");if(n._componentsProvider||n._getSettings().localCache)throw new $(B.FAILED_PRECONDITION,"SDK cache is already specified.");n._componentsProvider={_online:e,_offline:t},HC(n)}function u8(n){if(n._initialized&&!n._terminated)throw new $(B.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");let e=new rt;return n._queue.enqueueAndForgetEvenWhileRestricted(()=>O(this,null,function*(){try{yield function(r){return O(this,null,function*(){if(!Gr.D())return Promise.resolve();let i=r+mC;yield Gr.delete(i)})}(my(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}})),e.promise}function c8(n){return function(t){let r=new rt;return t.asyncQueue.enqueueAndForget(()=>O(this,null,function*(){return WP(yield ky(t),r)})),r.promise}(Tt(n=De(n,Ve)))}function l8(n){return ok(Tt(n=De(n,Ve)))}function h8(n){return ak(Tt(n=De(n,Ve)))}function d8(n,e){let t=Tt(n=De(n,Ve)),r=new Lm;return hk(t,n._databaseId,e,r),r}function f8(n,e){return dk(Tt(n=De(n,Ve)),e).then(t=>t?new dt(n,null,t.query):null)}var Po=class n{constructor(e){this._byteString=e}static fromBase64String(e){try{return new n(He.fromBase64String(e))}catch(t){throw new $(B.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new n(He.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}};var ti=class{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new $(B.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new it(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var cr=class{constructor(e){this._methodName=e}};var Ou=class{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new $(B.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new $(B.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return se(this._lat,e._lat)||se(this._long,e._long)}};var Bu=class{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0}(this._values,e._values)}};var mk=/^__.*__$/,Um=class{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new mn(e,this.data,this.fieldMask,t,this.fieldTransforms):new Yr(e,this.data,t,this.fieldTransforms)}},hd=class{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new mn(e,this.data,this.fieldMask,t,this.fieldTransforms)}};function WC(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Y()}}var dd=class n{constructor(e,t,r,i,s,o){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.Bu(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Lu(){return this.settings.Lu}ku(e){return new n(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}qu(e){var t;let r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.ku({path:r,Qu:!1});return i.$u(e),i}Uu(e){var t;let r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.ku({path:r,Qu:!1});return i.Bu(),i}Ku(e){return this.ku({path:void 0,Qu:!0})}Wu(e){return fd(e,this.settings.methodName,this.settings.Gu||!1,this.path,this.settings.zu)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}Bu(){if(this.path)for(let e=0;e<this.path.length;e++)this.$u(this.path.get(e))}$u(e){if(e.length===0)throw this.Wu("Document fields must not be empty");if(WC(this.Lu)&&mk.test(e))throw this.Wu('Document fields cannot begin and end with "__"')}},jm=class{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||Hu(e)}ju(e,t,r,i=!1){return new dd({Lu:e,methodName:t,zu:r,path:it.emptyPath(),Qu:!1,Gu:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function rs(n){let e=n._freezeSettings(),t=Hu(n._databaseId);return new jm(n._databaseId,!!e.ignoreUndefinedProperties,t)}function Sd(n,e,t,r,i,s={}){let o=n.ju(s.merge||s.mergeFields?2:0,e,t,i);By("Data must be an object, but it was:",o,r);let a=XC(r,o),c,l;if(s.merge)c=new Kt(o.fieldMask),l=o.fieldTransforms;else if(s.mergeFields){let h=[];for(let f of s.mergeFields){let p=Gm(e,f,t);if(!o.contains(p))throw new $(B.INVALID_ARGUMENT,`Field '${p}' is specified in your field mask but missing from your input data.`);ZC(h,p)||h.push(p)}c=new Kt(h),l=o.fieldTransforms.filter(f=>c.covers(f.field))}else c=null,l=o.fieldTransforms;return new Um(new Et(a),c,l)}var Vu=class n extends cr{_toFieldTransform(e){if(e.Lu!==2)throw e.Lu===1?e.Wu(`${this._methodName}() can only appear at the top level of your update data`):e.Wu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof n}};function KC(n,e,t){return new dd({Lu:3,zu:e.settings.zu,methodName:n._methodName,Qu:t},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}var zm=class n extends cr{_toFieldTransform(e){return new Xi(e.path,new Qr)}isEqual(e){return e instanceof n}},$m=class n extends cr{constructor(e,t){super(e),this.Hu=t}_toFieldTransform(e){let t=KC(this,e,!0),r=this.Hu.map(s=>is(s,t)),i=new ar(r);return new Xi(e.path,i)}isEqual(e){return e instanceof n&&Fc(this.Hu,e.Hu)}},qm=class n extends cr{constructor(e,t){super(e),this.Hu=t}_toFieldTransform(e){let t=KC(this,e,!0),r=this.Hu.map(s=>is(s,t)),i=new ur(r);return new Xi(e.path,i)}isEqual(e){return e instanceof n&&Fc(this.Hu,e.Hu)}},Hm=class n extends cr{constructor(e,t){super(e),this.Ju=t}_toFieldTransform(e){let t=new Xr(e.serializer,UD(e.serializer,this.Ju));return new Xi(e.path,t)}isEqual(e){return e instanceof n&&this.Ju===e.Ju}};function My(n,e,t,r){let i=n.ju(1,e,t);By("Data must be an object, but it was:",i,r);let s=[],o=Et.empty();oi(r,(c,l)=>{let h=Vy(e,c,t);l=Ce(l);let f=i.Uu(h);if(l instanceof Vu)s.push(h);else{let p=is(l,f);p!=null&&(s.push(h),o.set(h,p))}});let a=new Kt(s);return new hd(o,a,i.fieldTransforms)}function Oy(n,e,t,r,i,s){let o=n.ju(1,e,t),a=[Gm(e,r,t)],c=[i];if(s.length%2!=0)throw new $(B.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let p=0;p<s.length;p+=2)a.push(Gm(e,s[p])),c.push(s[p+1]);let l=[],h=Et.empty();for(let p=a.length-1;p>=0;--p)if(!ZC(l,a[p])){let m=a[p],y=c[p];y=Ce(y);let w=o.Uu(m);if(y instanceof Vu)l.push(m);else{let E=is(y,w);E!=null&&(l.push(m),h.set(m,E))}}let f=new Kt(l);return new hd(h,f,o.fieldTransforms)}function QC(n,e,t,r=!1){return is(t,n.ju(r?4:3,e))}function is(n,e){if(YC(n=Ce(n)))return By("Unsupported field value:",e,n),XC(n,e);if(n instanceof cr)return function(r,i){if(!WC(i.Lu))throw i.Wu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Wu(`${r._methodName}() is not currently supported inside arrays`);let s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.Qu&&e.Lu!==4)throw e.Wu("Nested arrays are not supported");return function(r,i){let s=[],o=0;for(let a of r){let c=is(a,i.Ku(o));c==null&&(c={nullValue:"NULL_VALUE"}),s.push(c),o++}return{arrayValue:{values:s}}}(n,e)}return function(r,i){if((r=Ce(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return UD(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){let s=ze.fromDate(r);return{timestampValue:wo(i.serializer,s)}}if(r instanceof ze){let s=new ze(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:wo(i.serializer,s)}}if(r instanceof Ou)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Po)return{bytesValue:QD(i.serializer,r._byteString)};if(r instanceof qe){let s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.Wu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:fy(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof Bu)return function(o,a){return{mapValue:{fields:{[ay]:{stringValue:uy},[yo]:{arrayValue:{values:o.toArray().map(l=>{if(typeof l!="number")throw a.Wu("VectorValues must only contain numeric values.");return dy(a.serializer,l)})}}}}}}(r,i);throw i.Wu(`Unsupported field value: ${Id(r)}`)}(n,e)}function XC(n,e){let t={};return vD(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):oi(n,(r,i)=>{let s=is(i,e.qu(r));s!=null&&(t[r]=s)}),{mapValue:{fields:t}}}function YC(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof ze||n instanceof Ou||n instanceof Po||n instanceof qe||n instanceof cr||n instanceof Bu)}function By(n,e,t){if(!YC(t)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(t)){let r=Id(t);throw r==="an object"?e.Wu(n+" a custom object"):e.Wu(n+" "+r)}}function Gm(n,e,t){if((e=Ce(e))instanceof ti)return e._internalPath;if(typeof e=="string")return Vy(n,e);throw fd("Field path arguments must be of type string or ",n,!1,void 0,t)}var yk=new RegExp("[~\\*/\\[\\]]");function Vy(n,e,t){if(e.search(yk)>=0)throw fd(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new ti(...e.split("."))._internalPath}catch{throw fd(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function fd(n,e,t,r,i){let s=r&&!r.isEmpty(),o=i!==void 0,a=`Function ${e}() called with invalid data`;t&&(a+=" (via `toFirestore()`)"),a+=". ";let c="";return(s||o)&&(c+=" (found",s&&(c+=` in field ${r}`),o&&(c+=` in document ${i}`),c+=")"),new $(B.INVALID_ARGUMENT,a+n+c)}function ZC(n,e){return n.some(t=>t.isEqual(e))}var ts=class{constructor(e,t,r,i,s){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new qe(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new Wm(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let t=this._document.data.field(Rd("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}},Wm=class extends ts{data(){return super.data()}};function Rd(n,e){return typeof e=="string"?Vy(n,e):e instanceof ti?e._internalPath:e._delegate._internalPath}function JC(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new $(B.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var Lu=class{},ns=class extends Lu{};function p8(n,e,...t){let r=[];e instanceof Lu&&r.push(e),r=r.concat(t),function(s){let o=s.filter(c=>c instanceof Km).length,a=s.filter(c=>c instanceof pd).length;if(o>1||o>0&&a>0)throw new $(B.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(let i of r)n=i._apply(n);return n}var pd=class n extends ns{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new n(e,t,r)}_apply(e){let t=this._parse(e);return tA(e._query,t),new dt(e.firestore,e.converter,wg(e._query,t))}_parse(e){let t=rs(e.firestore);return function(s,o,a,c,l,h,f){let p;if(l.isKeyField()){if(h==="array-contains"||h==="array-contains-any")throw new $(B.INVALID_ARGUMENT,`Invalid Query. You can't perform '${h}' queries on documentId().`);if(h==="in"||h==="not-in"){tD(f,h);let y=[];for(let w of f)y.push(eD(c,s,w));p={arrayValue:{values:y}}}else p=eD(c,s,f)}else h!=="in"&&h!=="not-in"&&h!=="array-contains-any"||tD(f,h),p=QC(a,o,f,h==="in"||h==="not-in");return me.create(l,h,p)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}};function g8(n,e,t){let r=e,i=Rd("where",n);return pd._create(i,r,t)}var Km=class n extends Lu{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new n(e,t)}_parse(e){let t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return t.length===1?t[0]:Ae.create(t,this._getOperator())}_apply(e){let t=this._parse(e);return t.getFilters().length===0?e:(function(i,s){let o=i,a=s.getFlattenedFilters();for(let c of a)tA(o,c),o=wg(o,c)}(e._query,t),new dt(e.firestore,e.converter,wg(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}};var Qm=class n extends ns{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new n(e,t)}_apply(e){let t=function(i,s,o){if(i.startAt!==null)throw new $(B.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new $(B.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Ki(s,o)}(e._query,this._field,this._direction);return new dt(e.firestore,e.converter,function(i,s){let o=i.explicitOrderBy.concat([s]);return new pn(i.path,i.collectionGroup,o,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,t))}};function m8(n,e="asc"){let t=e,r=Rd("orderBy",n);return Qm._create(r,t)}var gd=class n extends ns{constructor(e,t,r){super(),this.type=e,this._limit=t,this._limitType=r}static _create(e,t,r){return new n(e,t,r)}_apply(e){return new dt(e.firestore,e.converter,Ph(e._query,this._limit,this._limitType))}};function y8(n){return $C("limit",n),gd._create("limit",n,"F")}function v8(n){return $C("limitToLast",n),gd._create("limitToLast",n,"L")}var md=class n extends ns{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new n(e,t,r)}_apply(e){let t=eA(e,this.type,this._docOrFields,this._inclusive);return new dt(e.firestore,e.converter,function(i,s){return new pn(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,s,i.endAt)}(e._query,t))}};function _8(...n){return md._create("startAt",n,!0)}function x8(...n){return md._create("startAfter",n,!1)}var yd=class n extends ns{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new n(e,t,r)}_apply(e){let t=eA(e,this.type,this._docOrFields,this._inclusive);return new dt(e.firestore,e.converter,function(i,s){return new pn(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,i.startAt,s)}(e._query,t))}};function E8(...n){return yd._create("endBefore",n,!1)}function w8(...n){return yd._create("endAt",n,!0)}function eA(n,e,t,r){if(t[0]=Ce(t[0]),t[0]instanceof ts)return function(s,o,a,c,l){if(!c)throw new $(B.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${a}().`);let h=[];for(let f of so(s))if(f.field.isKeyField())h.push(Wi(o,c.key));else{let p=c.data.field(f.field);if(wd(p))throw new $(B.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+f.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(p===null){let m=f.field.canonicalString();throw new $(B.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${m}' (used as the orderBy) does not exist.`)}h.push(p)}return new Ln(h,l)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{let i=rs(n.firestore);return function(o,a,c,l,h,f){let p=o.explicitOrderBy;if(h.length>p.length)throw new $(B.INVALID_ARGUMENT,`Too many arguments provided to ${l}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);let m=[];for(let y=0;y<h.length;y++){let w=h[y];if(p[y].field.isKeyField()){if(typeof w!="string")throw new $(B.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${l}(), but got a ${typeof w}`);if(!ly(o)&&w.indexOf("/")!==-1)throw new $(B.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${l}() must be a plain document ID, but '${w}' contains a slash.`);let E=o.path.child(_e.fromString(w));if(!K.isDocumentKey(E))throw new $(B.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${l}() must result in a valid document path, but '${E}' is not because it contains an odd number of segments.`);let x=new K(E);m.push(Wi(a,x))}else{let E=QC(c,l,w);m.push(E)}}return new Ln(m,f)}(n._query,n.firestore._databaseId,i,e,t,r)}}function eD(n,e,t){if(typeof(t=Ce(t))=="string"){if(t==="")throw new $(B.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!ly(e)&&t.indexOf("/")!==-1)throw new $(B.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);let r=e.path.child(_e.fromString(t));if(!K.isDocumentKey(r))throw new $(B.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Wi(n,new K(r))}if(t instanceof qe)return Wi(n,t._key);throw new $(B.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Id(t)}.`)}function tD(n,e){if(!Array.isArray(n)||n.length===0)throw new $(B.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function tA(n,e){let t=function(i,s){for(let o of i)for(let a of o.getFlattenedFilters())if(s.indexOf(a.op)>=0)return a.op;return null}(n.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(t!==null)throw t===e.op?new $(B.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new $(B.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}var vd=class{convertValue(e,t="none"){switch(Wr(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Oe(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(or(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Y()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){let r={};return oi(e,(i,s)=>{r[i]=this.convertValue(s,t)}),r}convertVectorValue(e){var t,r,i;let s=(i=(r=(t=e.fields)===null||t===void 0?void 0:t[yo].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(o=>Oe(o.doubleValue));return new Bu(s)}convertGeoPoint(e){return new Ou(Oe(e.latitude),Oe(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":let r=Dd(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(xu(e));default:return null}}convertTimestamp(e){let t=sr(e);return new ze(t.seconds,t.nanos)}convertDocumentKey(e,t){let r=_e.fromString(e);Z(oC(r));let i=new mo(r.get(1),r.get(3)),s=new K(r.popFirst(5));return i.isEqual(t)||je(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),s}};function Fd(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}var Xm=class extends vd{constructor(e){super(),this.firestore=e}convertBytes(e){return new Po(e)}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return new qe(this.firestore,null,t)}};var rr=class{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},ni=class extends ts{constructor(e,t,r,i,s,o){super(e,t,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let t=new ao(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){let r=this._document.data.field(Rd("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}},ao=class extends ni{data(e={}){return super.data(e)}},ri=class{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new rr(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){let e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new ao(this._firestore,this._userDataWriter,r.key,r,new rr(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new $(B.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(a=>{let c=new ao(i._firestore,i._userDataWriter,a.doc.key,a.doc,new rr(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:c,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>s||a.type!==3).map(a=>{let c=new ao(i._firestore,i._userDataWriter,a.doc.key,a.doc,new rr(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter),l=-1,h=-1;return a.type!==0&&(l=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),h=o.indexOf(a.doc.key)),{type:vk(a.type),doc:c,oldIndex:l,newIndex:h}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}};function vk(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Y()}}function D8(n,e){return n instanceof ni&&e instanceof ni?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(n._document===null?e._document===null:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof ri&&e instanceof ri&&n._firestore===e._firestore&&gk(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}function C8(n){n=De(n,qe);let e=De(n.firestore,Ve);return UC(Tt(e),n._key).then(t=>Ly(e,n,t))}var lr=class extends vd{constructor(e){super(),this.firestore=e}convertBytes(e){return new Po(e)}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return new qe(this.firestore,null,t)}};function A8(n){n=De(n,qe);let e=De(n.firestore,Ve),t=Tt(e),r=new lr(e);return uk(t,n._key).then(i=>new ni(e,r,n._key,i,new rr(i!==null&&i.hasLocalMutations,!0),n.converter))}function b8(n){n=De(n,qe);let e=De(n.firestore,Ve);return UC(Tt(e),n._key,{source:"server"}).then(t=>Ly(e,n,t))}function T8(n){n=De(n,dt);let e=De(n.firestore,Ve),t=Tt(e),r=new lr(e);return JC(n._query),jC(t,n._query).then(i=>new ri(e,r,n,i))}function I8(n){n=De(n,dt);let e=De(n.firestore,Ve),t=Tt(e),r=new lr(e);return ck(t,n._query).then(i=>new ri(e,r,n,i))}function S8(n){n=De(n,dt);let e=De(n.firestore,Ve),t=Tt(e),r=new lr(e);return jC(t,n._query,{source:"server"}).then(i=>new ri(e,r,n,i))}function R8(n,e,t){n=De(n,qe);let r=De(n.firestore,Ve),i=Fd(n.converter,e,t);return Pd(r,[Sd(rs(r),"setDoc",n._key,i,n.converter!==null,t).toMutation(n._key,Ue.none())])}function F8(n,e,t,...r){n=De(n,qe);let i=De(n.firestore,Ve),s=rs(i),o;return o=typeof(e=Ce(e))=="string"||e instanceof ti?Oy(s,"updateDoc",n._key,e,t,r):My(s,"updateDoc",n._key,e),Pd(i,[o.toMutation(n._key,Ue.exists(!0))])}function P8(n){return Pd(De(n.firestore,Ve),[new Zr(n._key,Ue.none())])}function k8(n,e){let t=De(n.firestore,Ve),r=pk(n),i=Fd(n.converter,e);return Pd(t,[Sd(rs(n.firestore),"addDoc",r._key,i,n.converter!==null,{}).toMutation(r._key,Ue.exists(!1))]).then(()=>r)}function N8(n,...e){var t,r,i;n=Ce(n);let s={includeMetadataChanges:!1,source:"default"},o=0;typeof e[o]!="object"||Vm(e[o])||(s=e[o],o++);let a={includeMetadataChanges:s.includeMetadataChanges,source:s.source};if(Vm(e[o])){let f=e[o];e[o]=(t=f.next)===null||t===void 0?void 0:t.bind(f),e[o+1]=(r=f.error)===null||r===void 0?void 0:r.bind(f),e[o+2]=(i=f.complete)===null||i===void 0?void 0:i.bind(f)}let c,l,h;if(n instanceof qe)l=De(n.firestore,Ve),h=No(n._key.path),c={next:f=>{e[o]&&e[o](Ly(l,n,f))},error:e[o+1],complete:e[o+2]};else{let f=De(n,dt);l=De(f.firestore,Ve),h=f._query;let p=new lr(l);c={next:m=>{e[o]&&e[o](new ri(l,p,f,m))},error:e[o+1],complete:e[o+2]},JC(n._query)}return function(p,m,y,w){let E=new Ro(w),x=new Mu(m,E,y);return p.asyncQueue.enqueueAndForget(()=>O(this,null,function*(){return Ey(yield Fo(p),x)})),()=>{E.su(),p.asyncQueue.enqueueAndForget(()=>O(this,null,function*(){return wy(yield Fo(p),x)}))}}(Tt(l),h,a,c)}function M8(n,e){return lk(Tt(n=De(n,Ve)),Vm(e)?e:{next:e})}function Pd(n,e){return function(r,i){let s=new rt;return r.asyncQueue.enqueueAndForget(()=>O(this,null,function*(){return $P(yield ky(r),i,s)})),s.promise}(Tt(n),e)}function Ly(n,e,t){let r=t.docs.get(e._key),i=new lr(n);return new ni(n,i,e._key,r,new rr(t.hasPendingWrites,t.fromCache),e.converter)}var _k={maxAttempts:5};var nD=class{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=rs(e)}set(e,t,r){this._verifyNotCommitted();let i=$r(e,this._firestore),s=Fd(i.converter,t,r),o=Sd(this._dataReader,"WriteBatch.set",i._key,s,i.converter!==null,r);return this._mutations.push(o.toMutation(i._key,Ue.none())),this}update(e,t,r,...i){this._verifyNotCommitted();let s=$r(e,this._firestore),o;return o=typeof(t=Ce(t))=="string"||t instanceof ti?Oy(this._dataReader,"WriteBatch.update",s._key,t,r,i):My(this._dataReader,"WriteBatch.update",s._key,t),this._mutations.push(o.toMutation(s._key,Ue.exists(!0))),this}delete(e){this._verifyNotCommitted();let t=$r(e,this._firestore);return this._mutations=this._mutations.concat(new Zr(t._key,Ue.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new $(B.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}};function $r(n,e){if((n=Ce(n)).firestore!==e)throw new $(B.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}var Ym=class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=rs(e)}get(e){let t=$r(e,this._firestore),r=new Xm(this._firestore);return this._transaction.lookup([t._key]).then(i=>{if(!i||i.length!==1)return Y();let s=i[0];if(s.isFoundDocument())return new ts(this._firestore,r,s.key,s,t.converter);if(s.isNoDocument())return new ts(this._firestore,r,t._key,null,t.converter);throw Y()})}set(e,t,r){let i=$r(e,this._firestore),s=Fd(i.converter,t,r),o=Sd(this._dataReader,"Transaction.set",i._key,s,i.converter!==null,r);return this._transaction.set(i._key,o),this}update(e,t,r,...i){let s=$r(e,this._firestore),o;return o=typeof(t=Ce(t))=="string"||t instanceof ti?Oy(this._dataReader,"Transaction.update",s._key,t,r,i):My(this._dataReader,"Transaction.update",s._key,t),this._transaction.update(s._key,o),this}delete(e){let t=$r(e,this._firestore);return this._transaction.delete(t._key),this}};var Zm=class extends Ym{constructor(e,t){super(e,t),this._firestore=e}get(e){let t=$r(e,this._firestore),r=new lr(this._firestore);return super.get(e).then(i=>new ni(this._firestore,r,t._key,i._document,new rr(!1,!1),t.converter))}};function O8(n,e,t){n=De(n,Ve);let r=Object.assign(Object.assign({},_k),t);return function(s){if(s.maxAttempts<1)throw new $(B.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(s,o,a){let c=new rt;return s.asyncQueue.enqueueAndForget(()=>O(this,null,function*(){let l=yield sk(s);new Om(s.asyncQueue,l,a,o,c).Iu()})),c.promise}(Tt(n),i=>e(new Zm(n,i)),r)}function B8(){return new Vu("deleteField")}function V8(){return new zm("serverTimestamp")}function L8(...n){return new $m("arrayUnion",n)}function U8(...n){return new qm("arrayRemove",n)}function j8(n){return new Hm("increment",n)}(function(e,t=!0){(function(i){ko=i})(Mc),bi(new Ai("firestore",(r,{instanceIdentifier:i,options:s})=>{let o=r.getProvider("app").getImmediate(),a=new Ve(new Qp(r.getProvider("auth-internal")),new Zp(o,r.getProvider("app-check-internal")),function(l,h){if(!Object.prototype.hasOwnProperty.apply(l.options,["projectId"]))throw new $(B.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new mo(l.options.projectId,h)}(o,i),o);return s=Object.assign({useFetchStreams:t},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),Jt(zw,$w,e),Jt(zw,$w,"esm2017")})();var hb=Ob(lb());var db=(()=>{class n{constructor(t,r){this.http=t,this.apiUrl=r}generateApiKey(){let t=new Date,r=`${t.getUTCFullYear()}-${t.getUTCMonth()}-${t.getUTCDate()}`;return hb.SHA256(`${r}:${Lw.apiSecret}`).toString()}getHeaders(){return new Dn({"Content-Type":"application/json","x-api-key":this.generateApiKey()})}create(t){return this.http.post(this.apiUrl,t,{headers:this.getHeaders()}).pipe(Bt(this.handleError))}getAll(){return this.http.get(this.apiUrl,{headers:this.getHeaders()}).pipe(Bt(this.handleError))}getById(t){return this.http.get(`${this.apiUrl}/${t}`,{headers:this.getHeaders()}).pipe(Bt(this.handleError))}update(t,r){return this.http.put(`${this.apiUrl}/${t}`,r,{headers:this.getHeaders()}).pipe(Bt(this.handleError))}delete(t){return this.http.delete(`${this.apiUrl}/${t}`,{headers:this.getHeaders()}).pipe(Bt(this.handleError))}handleError(t){return console.error("An error occurred:",t),xi(()=>new Error("Something bad happened; please try again later."))}static{this.\u0275fac=function(r){return new(r||n)(re(Es),re("API_URL"))}}static{this.\u0275prov=ne({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var J8=(()=>{class n extends db{constructor(t,r){super(t,r)}static{this.\u0275fac=function(r){return new(r||n)(re(Es),re("PERSONAL_API_URL"))}}static{this.\u0275prov=ne({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();export{Ke as a,Kc as b,Zb as c,tT as d,ga as e,Qc as f,y0 as g,_T as h,wT as i,Es as j,HT as k,GT as l,Jn as m,J0 as n,In as o,Hl as p,nR as q,cp as r,Lw as s,db as t,YB as u,ir as v,ZB as w,$ as x,ze as y,it as z,K as A,e8 as B,mo as C,fk as D,De as E,t8 as F,qe as G,n8 as H,r8 as I,pk as J,i8 as K,gk as L,s8 as M,Tt as N,o8 as O,a8 as P,u8 as Q,c8 as R,l8 as S,h8 as T,d8 as U,f8 as V,Po as W,ti as X,Ou as Y,p8 as Z,g8 as _,m8 as $,y8 as aa,v8 as ba,_8 as ca,x8 as da,E8 as ea,w8 as fa,vd as ga,ni as ha,ao as ia,ri as ja,D8 as ka,C8 as la,A8 as ma,b8 as na,T8 as oa,I8 as pa,S8 as qa,R8 as ra,F8 as sa,P8 as ta,k8 as ua,N8 as va,M8 as wa,Pd as xa,nD as ya,O8 as za,B8 as Aa,V8 as Ba,L8 as Ca,U8 as Da,j8 as Ea,bx as Fa,gx as Ga,pM as Ha,gM as Ia,yM as Ja,AI as Ka,TI as La,vM as Ma,Gx as Na,fO as Oa,J8 as Pa,lp as Qa,GE as Ra,dp as Sa,rw as Ta,Ep as Ua,a2 as Va,Ht as Wa,Rn as Xa,w2 as Ya,Xl as Za,aB as _a,Pt as $a,Ip as ab,rF as bb,iF as cb,sF as db,oF as eb,aF as fb,Fw as gb,uF as hb,Pw as ib,uB as jb,Nw as kb,AB as lb,BB as mb};
